var enumFSPillMessageType={Error:"Error",Success:"Success"};function showPillMessage_Error(e,s,l){showPillMessage(e,enumFSPillMessageType.Error,s,l)}function showPillMessage_Success(e,s,l){showPillMessage(e,enumFSPillMessageType.Success,s,l)}function showPillMessage(e,s,l,a){var i="wrong_error_type";switch(s){case enumFSPillMessageType.Error:i="fs_pillmessage--error";break;case enumFSPillMessageType.Success:i="fs_pillmessage--success"}var r=$("<div />");$(r).addClass("fs_pillmessage"),$(r).hide(),$(r).addClass(i);var n=$("<div />");if($(n).addClass("fs_pillmessage__text"),$(n).append(e),$(n).text().length>75?$(n).addClass("fs_pillmessage__text--right"):$(n).addClass("fs_pillmessage__text--center"),$(r).append(n),0!=l){var p=$("<button />",{type:"button"});$(p).addClass("fs_pillmessage__closeIcon"),$(p).click(function(){hidePillMessage(this)}),$(r).append(p)}var g=$(".fs_pillmessage_cmp");g="undefined"!=a&&null!=a?a:$(".fs_pillmessage_cmp"),$(g).html(""),$(g).append(r),$(g).find(".fs_pillmessage").slideDown()}function hidePillMessage(e){var s=$(".fs_pillmessage");if(s.length>1){var l=$(e).parents(".fs_pillmessage");1==l.length&&$(l).slideUp()}else $(s).slideUp()}Object.freeze(enumFSPillMessageType);
//# sourceMappingURL=../../fs_assets.map
var enumFSPopupMessageType={Info:"INFO",Alert:"ALERT",Success:"OK"};function popupMessage_ShowOneButton(o,e,a,s,n,l){var t=s,p=$("<div />"),i=popupMessage_getMessageContent(e,a,o);p.html(i),p.dialog({resizable:!1,modal:!0,title:"Save",height:"auto",width:413,buttons:{NO:{click:function(){$(this).dialog("close"),"function"==typeof n?(console.log("[FORM] [popupMessage_ShowOneButton] [confirmCallback] Callback response: "+l),void 0!==l?n(l):n()):console.log("[FORM] [popupMessage_ShowOneButton] [confirmCallback] Non-Callback response: "+l)},text:t,class:"vabutton2"}},open:function(o,e){$(".ui-dialog :button").blur()}})}function popupMessage_ShowTwoButtons(o,e,a,s,n,l,t,p,i){var c=$("<div />"),u=popupMessage_getMessageContent(e,a,o);c.html(u);var g=null==s?"Yes":s,d=null==t?"No":t;c.dialog({resizable:!1,modal:!0,title:"Save",height:"auto",width:413,buttons:{Yes:{click:function(){$(this).dialog("close"),"function"==typeof l?(console.log("[FORM] [popupMessage_ShowTwoButtons] [positiveCallback] Callback response: "+n),void 0!==n&&null!==n?l(n):l()):console.log("[FORM] [popupMessage_ShowTwoButtons] [positiveCallback] Non-Callback response: "+n)},text:g,class:"vabutton1"},No:{click:function(){$(this).dialog("close"),"function"==typeof i?(console.log("[FORM] [popupMessage_ShowTwoButtons] [negativeCallback] Callback response: "+p),void 0!==p&&null!==p?i(p):i()):console.log("[FORM] [popupMessage_ShowTwoButtons] [negativeCallback] Non-Callback response: "+p)},text:d,class:"vabutton2"}},open:function(o,e){$(".ui-dialog :button").blur()}})}function popupMessage_getMessageContent(o,e,a){var s="dialog__icon--alert";a==enumFSPopupMessageType.Success?s="dialog__icon--checkmark":a==enumFSPopupMessageType.Info&&(s="dialog__icon--info");var n=$("<div/>",{class:"dialog__icon"});n.addClass(s);var l=$("<div/>",{class:"dialogHeader"});l.append(n);var t=$("<div/>",{class:"dialogFont"}),p=$("<div/>",{class:"primary"}),i=$("<div/>",{class:"secondary"});p.html(o),p.append("<br /><br />"),i.html(e),t.append(p),t.append(i);var c=$("<div />");return c.html(l),c.append(t),c.html()}Object.freeze(enumFSPopupMessageType);
//# sourceMappingURL=../../fs_assets.map
var authStatusTimer,userSearchText="",userIds=[],orderByField="Name",orderByDirection="ASC",pageSize=10,currentPage=1,checkCurrentUserAuthorizationStatus=!1,authStatusCheckCount=0,authStatusCheckMaxCount=10,ResubmitFailedSubmissionIsChecked=!1,enumMessageType={Alert:"Alert",Success:"Success",Info:"Info",Error:"Error"};Object.freeze(enumMessageType);var panelLoadInformation={userManagement:{divId:"user-management",loadPanel:function(){initializePageComponents(),onFormPageLoad()}},sandboxManagement:{divId:"sandbox-management",loadPanel:function(){initializeSandboxPageComponents(!1)}},integrationSettings:{divId:"integration-settings",loadPanel:function(){document.getElementById("FSGrid-integration").getElementsByClassName("integrationTitle").length||fs.ISP.refreshIntegrations(function(e){var t=document.getElementById("FSGrid-integration");e.forEach(function(e){t.appendChild(e)})},!0,!1,engineEndpoint)}}},enumPackageTier={NativeCloud:"NativeCloud"};function setPanelControl(e){var t=document.querySelectorAll(".li-left-panel");console.log("[log] panel"+e);for(var o=0;o<t.length;o++)t[o].classList.remove("li-left-panel-selected");if(e.classList.add("li-left-panel-selected"),e.hasAttribute("PanelId")){var s=e.attributes.PanelId.value,n={};for(var o in panelLoadInformation)n[o]=document.getElementById(panelLoadInformation[o].divId),n[o].style.display="none";panelLoadInformation[s]&&(n[s].style.display="",panelLoadInformation[s].loadPanel())}}function initializePageComponents(){console.log("Set progressbar to "+assignedUserLicensePercent),$("#assignedUserLicenseProgress").progressbar({value:assignedUserLicensePercent}),$("#inputTextUserNames").length>0&&($("#inputTextUserNames").autocomplete({minLength:3,appendTo:"#suggestionList",source:function(e,t){getUsersByName(t,e.term)},focus:function(e,t){return $("#inputTextUserNames").val(t.item.Name),!1},select:function(e,t){var o=t.item.Id;return isNullOrEmpty(o)||($("#inputTextUserNames").val(t.item.Name),$("#inputTextUserNames").attr("data-userid",t.item.Id)),console.log("Set ui.item.Id = "+t.item.Id),!1}}),null!=$("#inputTextUserNames").data("ui-autocomplete")&&($("#inputTextUserNames").data("ui-autocomplete")._renderItem=function(e,t){var o="<a>"+t.Name+" ("+t.Username+")</a>";return $("<li></li>").data("item.autocomplete",t).append(o).appendTo(e)})),$(".fsform .btn").removeClass("btn"),checkTokenNotificationMessages(null),isSharingRuleEnable()}function onFormPageLoad(){makeSureCurrentUserHasFormstackPermission();checkFormRemoteSitesInfoForMDAPI(getFSNSVariable("SessionKey",""),["FormstackMDAPIEndpoint","FastFormsMDAPIEndpoint"],getCurrentPageUrl(),!0,checkFormRemoteSitesInfoForMDAPICallback)}function checkTokenNotificationMessages(e){console.log("[checkTokenNotificationMessages] Starts...");var t=REMOTE_ACTIONS.checkTokenNotifications;Visualforce.remoting.Manager.invokeAction(t,function(t,o){if(o.status)if(console.log(t),console.log(o),t.IsValid)console.log("[FORM] [checkTokenNotificationMessages] no error token notifications"),null!=e&&(stopCheckingAuthStatus(e,"Updating..."),authStatusCheckCount=0,packageTier!=enumPackageTier.NativeCloud?updateEngineToken(e,"token"):($("#adminNotificationBox").removeClass("notification---error"),$("#adminNotificationBox").html(""),showTokenMessageAsBar(FSCONSTANTS.AdminSettings.AuthSuccess,!0)));else if(null==e)if(1==$(".announcement-box .announcement-box__header").length)$("#adminNotificationBox").removeClass("notification---error"),$("#adminNotificationBox").html("");else{var s="",n=!isCurrentUserLicensed()||!isCurrentUserAPrimaryUser();if(!isCurrentUserLicensed()||isCurrentUserAPrimaryUser()||isPrimaryUserInactive())if(isCurrentUserLicensed()&&!isPrimaryUserInactive()){let e=$("<p/>").append(FSCONSTANTS.AdminSettings.AuthErrorPrimaryUser),t=$("<input/>",{id:"ckResubmitFailedSubmission",type:"checkbox",class:"fs-checkbox fs-checkbox-red"}),o=$("<label />",{for:"ckResubmitFailedSubmission",class:"fs-txt-checkbox fs-checkbox-label"});o.append(FSCONSTANTS.AdminSettings.ResubmitFaileSubmission);let n=$("<div />",{class:"resend-submission-container"});n.append(t).append(o);let i=$("<div />").append(e);packageTier!=enumPackageTier.NativeCloud&&i.append(n),s=i}else s=$("<p/>").append(FSCONSTANTS.AdminSettings.AuthErrorNoActivePrimaryUser);else s=$("<p/>").append(FSCONSTANTS.AdminSettings.AuthErrorNonPrimaryUser);var i=getDetailNotificationBox("Warning! Authentication Token Error",s,n,"Refresh Token");$(i).find(".notification-box__body").after(),$("#adminNotificationBox").hide().html($(i).html()),$("#adminNotificationBox").find(".vabutton2").click(function(){var e={authUrl:t.ResultText,elemSource:this,progressText:"Refreshing...",actionType:"token"};console.log("[FORM] checkTokenNotificationMessages positiveObject "),console.log(e),ResubmitFailedSubmissionIsChecked=!!$("#ckResubmitFailedSubmission").prop("checked"),assignToMePositiveCallback(e)}),$("#adminNotificationBox").addClass("notification---error"),$("#adminNotificationBox").slideDown()}else authStatusCheckCount==authStatusCheckMaxCount?(stopCheckingAuthStatus(e,"Failed"),showTokenMessageAsBar(FSCONSTANTS.Common.SomethingWentWrong,!1)):authStatusCheckCount++;else null!=e&&(clearInterval(authStatusTimer),checkCurrentUserAuthorizationStatus=!1,toggleActionBtn(e,!0,"Refresh Token"),authStatusCheckCount=0),$("#adminNotificationBox").removeClass("notification---error"),$("#adminNotificationBox").html(""),commonAlertMessage("Something went wrong.","Please contact support if the issue persists.")},{escape:!0})}function stopCheckingAuthStatus(e,t){clearInterval(authStatusTimer),checkCurrentUserAuthorizationStatus=!1,toggleActionBtn(e,!0,t),authStatusCheckCount=0}function makeSureCurrentUserHasFormstackPermission(){var e=REMOTE_ACTIONS.assignPermissionSetToUser;Visualforce.remoting.Manager.invokeAction(e,function(e,t){t.status?(console.log(e),console.log(t),e.IsValid?("RELOAD"==e.OtherText&&(window.location=window.location.href),console.log("[FORM] [makeSureCurrentUserHasFormstackPermission] Permission set status: "+e.ResultText)):console.log("[FORM] [makeSureCurrentUserHasFormstackPermission] Something went wrong: "+e.ResultText)):commonAlertMessage("Something went wrong.","Please contact support if the issue persists.")},{escape:!0})}function checkFormRemoteSitesInfoForMDAPICallback(e,t){console.log(t);var o=!1;t.IsValid&&$.each(t.results,function(e,t){var s=getXmlElementFromStr(t);if(firstElementByTagName(s,"url",!0)==GetWindowURL())return o=!0,!1}),o||(e?(console.log(" Let's add a remote site setting for current url "),setupFormMDAPIRemoteSite(getFSNSVariable("SessionKey",""),"FormstackMDAPIEndpoint",GetWindowURL(),"Allow to use Metadata API from APEX","upsert",!1,checkFormRemoteSitesInfoForMDAPICallback)):console.log("[FORM] We tried once"))}function addRemoteSitesForApexCallouts(e){var t=REMOTE_ACTIONS.updateRemoteSitesettingsForCallouts;toggleAddSitesBtn(e,!0,"Updating..."),Visualforce.remoting.Manager.invokeAction(t,function(t,o){if(o.status){console.log("[FORM] [updateRemoteSitesettingsForCallouts]"),console.log(t),console.log(o);var s=!0;null!=t&&t.length>0&&$.each(t,function(e,t){t.IsValid||(s=!1)}),s?toggleAddSitesBtn(e,!0,"Done"):(commonAlertMessage("Something went wrong",'Please contact support if the issue persists. <a class="a--blue" href="https://sfapphelp.formstack.com/hc/en-us/articles/360018480252-Prefilling-Community-Forms-from-Logged-in-User" title="Learn more">Learn more</a>'),toggleAddSitesBtn(e,!1,"Update Sites"))}else console.log(o.message),toggleAddSitesBtn(e,!1,"Update Sites"),commonAlertMessage("Something went wrong","Please contact support if the issue persists.")},{escape:!0})}function addSharingRules(e){toggleActionBtn(e,!0,"Create Sharing Rules"),addSharingRuleApexCallout()}function addCommunitySharingRules(e){toggleActionBtn(e,!0,"Create Sharing Rules"),addCommunitySharingRuleApexCallout()}function addCommunitySharingRuleApexCallout(){var e=REMOTE_ACTIONS.createCommunitySharingRules;Visualforce.remoting.Manager.invokeAction(e,function(e,t){var o=document.getElementById("btnCommunitySharingRules");t.status&&e.IsValid?(console.log("[FORM] [createCommunitySharingRules]"),toggleActionBtn(o,!0,"Done."),console.log(e),console.log(t)):(console.log("[FORM] [createCommunitySharingRules]"),console.log(t.message),console.log(e.ResultText),toggleActionBtn(o,!1,"Create Sharing Rules"),commonAlertMessage("Something went wrong","Please contact support if the issue persists."))},{escape:!0})}function addSharingRuleApexCallout(){var e=REMOTE_ACTIONS.createSharingRules;Visualforce.remoting.Manager.invokeAction(e,function(e,t){var o=document.getElementById("btnSharingRules");t.status&&e.IsValid?(console.log("[FORM] [createSharingRules]"),toggleActionBtn(o,!0,"Done."),console.log(e),console.log(t)):(console.log(t.message),console.log(e.ResultText),toggleActionBtn(o,!1,"Create Sharing Rules"),commonAlertMessage("Something went wrong","Please contact support if the issue persists."))},{escape:!0})}function isSharingRuleEnable(){var e=REMOTE_ACTIONS.hasSharingSettingRulesRecordsExist;Visualforce.remoting.Manager.invokeAction(e,function(e,t){var o=document.getElementById("btnSharingRules");t.status&&-1!=e.indexOf("Formstack")?(console.log("[FORM] [Error isSharingRuleEnable]"),toggleActionBtn(o,!1,"Create Sharing Rules"),console.log(e),console.log(t)):(console.log("[FORM] [isSharingRuleEnable]"),toggleActionBtn(o,!0,"Create Sharing Rules"),console.log(t.message),console.log(e))},{escape:!0})}function toggleActionBtn(e,t,o){t?$(e).hasClass("va-disabled")||$(e).addClass("va-disabled"):$(e).removeClass("va-disabled"),$(e).text(o)}function toggleAddSitesBtn(e,t,o){t?$(e).hasClass("va-disabled")||$(e).addClass("va-disabled"):$(e).removeClass("va-disabled"),$(e).text(o)}function addUser(e){addUserRemote("addUser",e)}function addUserRemote(e,t){console.log("[addUserRemote] Start...");var o=$("#inputTextUserNames").attr("data-userid");if($("#inputTextUserNames").attr("data-userid",""),o){var s=REMOTE_ACTIONS[e];Visualforce.remoting.Manager.invokeAction(s,o,function(e,t){t.status?addFSPermissionSet(o):(console.log(e),console.log(t),commonAlertMessage("Something went wrong","Please contact support if the issue persists."))},{escape:!0})}else commonAlertMessage("Something went wrong","Please select a user from the search list.")}function addFSPermissionSet(e){if(console.log("[addFSPermissionSet] Start..."),null!=e){var t=REMOTE_ACTIONS.addFSPermissionSet;Visualforce.remoting.Manager.invokeAction(t,e,function(t,o){if(o.status)if(t.IsValid&&""!=t.OtherText){var s="<b>Note:</b> The Salesforce license type for this user does not allow additional apps to be added to the application launcher. ";remoteResetAssignedSeatsCount({uiMessage:"User added successfully.",uiMessage2:s+='<a tabindex="-1" href="https://sfapphelp.formstack.com/hc/en-us/articles/360018996751-License-Management" target="__blank" class="a--blue" >Learn more</a>.',uiMessageType:enumMessageType.Success},resetLicenseCountResponse),console.log(t),console.log(o)}else if(t.IsValid){remoteResetAssignedSeatsCount({uiMessage:"User successfully added!"},resetLicenseCountResponse)}else removeUserPositiveCallback(e,!0),showPillMessage_Error('<span>Something went wrong! Couldn\'t assign a critical permission set to selected user. <a href="https://sfapphelp.formstack.com/hc/en-us/articles/360018690572-Couldn-t-assign-Critical-Permission-set-to-Selected-User" target="_blank" class="a--white">Learn more.</a></span>'),console.log(t),console.log(o);else commonAlertMessage("Something went wrong","Please contact support if the issue persists."),console.log(t),console.log(o)})}}function removeFSPermissionSet(e){if(console.log("[removeFSPermissionSet] Start..."),null!=e){var t=REMOTE_ACTIONS.removeFSPermissionSet;Visualforce.remoting.Manager.invokeAction(t,e,function(e,t){t.status?(console.log(e),console.log(t)):commonAlertMessage("Something went wrong","Please contact support if the issue persists.")},{escape:!0})}else commonAlertMessage("Something went wrong","Please select a user from the search list.")}function resetLicenseCountResponse(e){var t=safeStringValue(e.uiMessageType,""),o=safeStringValue(e.uiMessage,""),s=safeStringValue(e.uiMessage2,""),n=safeStringValue(e.uiButtonText,"Close");t==enumMessageType.Alert?popupMessage_ShowOneButton(enumFSPopupMessageType.Alert,o,s,n):t==enumMessageType.Info?commonInfoMessage(o,s,n):popupMessage_ShowOneButton(enumFSPopupMessageType.Success,o,s,n),reRenderUserLicenseBlocks()}function remoteResetAssignedSeatsCount(e,t){var o=REMOTE_ACTIONS.resetAssignedSeatsCount;Visualforce.remoting.Manager.invokeAction(o,function(o,s){s.status?(console.log(o),console.log(s),o.IsValid?"function"==typeof t&&(console.log("[FORM] [remoteResetAssignedSeatsCount] [positiveCallback] Callback response: "+e),void 0!==e?t(e):t()):(console.log("[FORM] remoteResetAssignedSeatsCount"),commonAlertMessage("Something went wrong while processing your request.","Please contact support if the issue persists."))):commonAlertMessage("Something went wrong","Please contact support if the issue persists.")},{escape:!0})}function confirmAndAssignPermissionSetToMe(e){console.log("[FORM] [confirmAndAssignPermissionSetToMe]");var t=REMOTE_ACTIONS.getAuthorizationLink;Visualforce.remoting.Manager.invokeAction(t,function(t,o){if(o.status)if(console.log("confirmAndAssignPermissionSetToMe result: "+t),console.log(o),isNullOrEmpty(t))commonAlertMessage("Something went wrong","Please contact support if the issue persists.");else{confirmDialogWithCallback("Assign Yourself as the Primary User?","After you become a Primary User, you will be the default owner of new Salesforce records created through form submissions.",{authUrl:t,elemSource:e,progressText:"Assigning...",actionType:"assignment"},assignToMePositiveCallback,"","","Assign to me","Cancel")}else console.log(o.message),commonAlertMessage("Something went wrong","Please contact support if the issue persists.")},{escape:!1})}function assignToMePositiveCallback(e){console.log("[assignToMePositiveCallback] Starts..."),checkCurrentUserAuthorizationStatus=!0;var t=e.authUrl;void 0!==t&&""!==t&&(t=t.replace(/&amp;/g,"&"));var o=e.elemSource,s=e.progressText;return toggleActionBtn(o,!0,s),authStatusTimer="token"==e.actionType?setInterval(function(){checkTokenRefreshStatus(o)},3e3):setInterval(function(){checkPrimaryUserAssignmentStatus(o)},3e3),console.log("[FORM] [assignToMePositiveCallback]"),console.log(t),!window.open(t)}function checkTokenRefreshStatus(e){checkCurrentUserAuthorizationStatus&&(console.log("[FORM] [checkPrimaryUserAssignmentStatus]"),checkTokenNotificationMessages(e))}function checkPrimaryUserAssignmentStatus(e){if(checkCurrentUserAuthorizationStatus){console.log("[FORM] [checkPrimaryUserAssignmentStatus]");var t=REMOTE_ACTIONS.isUserPrimaryLicenseHolder;Visualforce.remoting.Manager.invokeAction(t,SFCurrentUserId,function(t,o){if(o.status)if(console.log(t),console.log(o),t.IsValid)if(clearInterval(authStatusTimer),checkCurrentUserAuthorizationStatus=!1,$(".ticker-error--dark").hide(),"NativeCloud"!=packageTier)updateEngineToken(e,"assignment");else{toggleActionBtn(e,!0,"Done");popupMessage_ShowOneButton(enumFSPopupMessageType.Success,"Success! You are now a Primary User.","You are now the default owner of all records created through form submissions. You are also the only person who can refresh the Formstack authentication token if there is an issue.","You are all set to start building forms!",reRenderUserLicenseBlocks)}else console.log("[FORM] [checkPrimaryUserAssignmentStatus] checking status of primary user assignment");else console.log(o.message),clearInterval(authStatusTimer),checkCurrentUserAuthorizationStatus=!1,toggleActionBtn(e,!0,"Assign To Me"),commonAlertMessage("Something went wrong","Please contact support if issue persist.")},{escape:!0})}}function reRenderUserLicenseBlocks(){resetLicenseListJs()}function removeUser(e){if(e){confirmDialogWithCallback("Are you sure you want to remove this user?","This user will no longer be able to build forms and review form submissions.",e,removeUserPositiveCallback,"","")}}function removeUserPositiveCallback(e,t){var o=REMOTE_ACTIONS.removeUser;Visualforce.remoting.Manager.invokeAction(o,e,function(o,s){if(s.status){if(console.log(o),console.log(s),1==o)if(t);else{removeFSPermissionSet(e);remoteResetAssignedSeatsCount({uiMessage:"User successfully removed!"},resetLicenseCountResponse)}}else console.log(s.message),commonAlertMessage("Something went wrong","Please contact support if the issue persists.")},{escape:!0})}function submitFailedSubmissions(){console.log("[submitFailedSubmissions] Starts...");var e=REMOTE_ACTIONS.submitFailedSubmissions;Visualforce.remoting.Manager.invokeAction(e,function(e,t){console.log("[submitFailedSubmissions] return...."),t.status?(console.log(e),console.log(t)):console.log(t.message)},{escape:!0})}function updateEngineToken(e,t){var o=REMOTE_ACTIONS.updateEngineToken;Visualforce.remoting.Manager.invokeAction(o,function(o,s){if(s.status)if(console.log(o),console.log(s),null!=o&&o.IsValid)if(console.log("Updated engine token!"),"token"==t)showTokenMessageAsBar(FSCONSTANTS.AdminSettings.AuthSuccess,!0),ResubmitFailedSubmissionIsChecked&&(ResubmitFailedSubmissionIsChecked=!1,submitFailedSubmissions());else{toggleActionBtn(e,!0,"Done");popupMessage_ShowOneButton(enumFSPopupMessageType.Success,"Success! You are now a Primary User.","You are now the default owner of all records created through form submissions. You are also the only person who can refresh the Formstack authentication token if there is an issue.","You are all set to start building forms!",reRenderUserLicenseBlocks)}else"token"==t?showTokenMessageAsBar(FSCONSTANTS.Common.SomethingWentWrong,!1):(toggleActionBtn(e,!0,"Assign To Me"),commonAlertMessage("Something went wrong","Please contact support if the issue persists."));else console.log(s.message),"token"==t?showTokenMessageAsBar(FSCONSTANTS.Common.SomethingWentWrong,!1):(toggleActionBtn(e,!0,"Assign To Me"),commonAlertMessage("Something went wrong","Please contact support if the issue persists."))},{escape:!0})}function showTokenMessageAsBar(e,t){var o=getShortNotificationBox(e);$("#adminNotificationBox").hide().html($(o).html()),$("#adminNotificationBox").removeClass("notification---success"),$("#adminNotificationBox").removeClass("notification---error"),t?$("#adminNotificationBox").addClass("notification---success"):$("#adminNotificationBox").addClass("notification---error"),$("#adminNotificationBox").slideDown()}function focusInputFilter(e){var t=$(e).val();!isNullOrEmpty(t)&&t.split("-").length>1&&(orderByDirection=safeStringValue(t.split("-")[1],"DESC"),orderByField=safeStringValue(t.split("-")[0],"LastModifiedDate")),callToRemoteGetFormIDs()}function callToRemoteGetFormIDs(){remoteGetAllFormIDsJS()}function remoteGetAllFormIDsJS(){resetInlineLoadingBar(!0);var e=REMOTE_ACTIONS.getAllUsers;Visualforce.remoting.Manager.invokeAction(e,userSearchText,orderByField,orderByDirection,function(e,t){t.status?(resetInlineLoadingBar(!1),null!=e&&(userIds=e,initializePagination(1,pageSize),resetCurrentPageData(1,!0))):(resetInlineLoadingBar(!1),console.log(" Fail-"+e))},{buffer:!0,escape:!0,timeout:3e4})}function resetInlineLoadingBar(e){e?$(".ffactions-wrapper-outer .inline-loading").fadeIn():$(".ffactions-wrapper-outer .inline-loading").fadeOut()}function getCurrentPageUrl(){return void 0===this.document.location.origin?this.document.location.protocol+"//"+this.document.location.hostname:this.document.location.origin}function getUsersByName(e,t){var o=REMOTE_ACTIONS.getUsersByName;Visualforce.remoting.Manager.invokeAction(o,t,function(t,o){o.status?(console.log(o),console.log(t),e(t)):alert(o.message)},{escape:!0})}function checkFormRemoteSitesInfoForMDAPI(e,t,o,s,n){var i="";t instanceof Array?$.each(t,function(){i+="<fullNames>"+this+"</fullNames>"}):i+="<fullNames>"+t+"</fullNames>",console.log("[FORM] checkFormRemoteSitesInfoForMDAPI Starts...");new XMLHttpRequest;deployMetaDataSOAP('<?xml version="1.0" encoding="utf-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><urn:SessionHeader xmlns:urn="http://soap.sforce.com/2006/04/metadata"><urn:sessionId>'+e+'</urn:sessionId></urn:SessionHeader></env:Header><env:Body><readMetadata xmlns="http://soap.sforce.com/2006/04/metadata"><type>RemoteSiteSetting</type>'+i+"</readMetadata></env:Body></env:Envelope>",GetWindowURL(),s,n)}function setupFormMDAPIRemoteSite(e,t,o,s,n,i,a){var r="create";$.inArray(n,["create","upsert"])>=0&&(r=n),console.log("[FORM] setupFormMDAPIRemoteSite Starts..."+r);new XMLHttpRequest;deployMetaDataSOAP('<?xml version="1.0" encoding="utf-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><urn:SessionHeader xmlns:urn="http://soap.sforce.com/2006/04/metadata"><urn:sessionId>'+e+"</urn:sessionId></urn:SessionHeader></env:Header><env:Body><"+r+'Metadata xmlns="http://soap.sforce.com/2006/04/metadata"><metadata xsi:type="RemoteSiteSetting"><fullName>'+t+"</fullName><description>"+s+"</description><disableProtocolSecurity>false</disableProtocolSecurity><isActive>true</isActive><url>"+o+"</url></metadata></"+r+"Metadata></env:Body></env:Envelope>",GetWindowURL(),i,a)}function getRemoteSiteObject(e){var t={};return t.fullName=firstElementByTagName(e,"fullName",!0),t.description=firstElementByTagName(e,"description",!0),t.isActive=firstElementByTagName(e,"isActive",!0),t.url=firstElementByTagName(e,"url",!0),t}function getDetailNotificationBox(e,t,o,s){var n=$("<div/>",{class:"notification-box"}),i=$("<div/>",{class:"notification-box---col9"}),a=$("<div/>",{class:"notification-box---col3"}),r=$("<div/>",{class:"notification-box__title"}),l=$("<div/>",{class:"notification-box__body"}),c=$("<button/>",{type:"button",class:"vabutton2 btn2---warning",title:s}),u=$("<div/>",{class:"notification-box__title--graphic"}),m=$("<div/>",{class:"notification-box__title--text"}),g=$("<div/>");return g.html(t),m.html(e),c.text(s),o&&(console.log("[FORM] btn disabled:"+o),c.addClass("va-disabled")),r.html(u),r.append(m),l.html(g),i.html(r),i.append(l),a.html(c),n.html(i),n.append(a),n.clone().wrap("<div>").parent()}function getShortNotificationBox(e){var t=$("<div/>",{class:"notification-box"}),o=$("<button/>",{type:"button",class:"close-icon",title:"Close",onclick:"closeNotificationBox(this);"}),s=$("<div/>",{class:"notification-box---col9"}),n=$("<div/>",{class:"notification-box---col3"}),i=$("<div/>");return i.html(e),s.html(i),n.html(o),t.html(s),t.append(n),t.clone().wrap("<div>").parent()}function closeNotificationBox(e){$(e).parents(".notification-box").remove()}function isCurrentUserAPrimaryUser(){if(1==$(".assigned-primary-license").find(".primary-license").length){var e=$(".assigned-primary-license").find(".primary-license").attr("data-userid");if(void 0!==e&&""!==e)return!0}return!1}function isCurrentUserLicensed(){return 1==$(".assigned-primary-license").find(".user-"+SFCurrentUserId).length}function isPrimaryUserInactive(){return 1==$(".assigned-primary-license").find(".primary-license").length&&$(".assigned-primary-license").find(".primary-license").parent().parent().hasClass("inactive")}function addEventClickOnMenu(){$("li.li-left-panel").click(function(){setPanelControl(this)})}function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))}Object.freeze(enumPackageTier),$(function(){console.log("Loading Page..."),addEventClickOnMenu();var e=getParameterByName("DefaultMenu");""!=e?$('[panelid="'+e+'"]').click():$('[panelid="userManagement"]').click()}),function(e,t){e.AdminSettings={AuthSuccess:"Formstack's authentication token has been updated successfully.",AuthErrorNonPrimaryUser:"Formstack's authentication token is invalid and submissions will not be processed! Please contact the Primary User to update the authentication token or assign yourself as the Primary User to avoid submission data loss.",AuthErrorPrimaryUser:"Formstack's authentication token is invalid and submissions will not be processed! Please update the authentication token.",AuthErrorNoActivePrimaryUser:"Your Primary User has been deactivated. Please assign another license to be the Primary User. Otherwise, you will no longer be able to create new Salesforce records with your form submissions and you will lose all data from your form submissions. <strong>To proceed, we recommend you assign this license to yourself.</strong> <br/>If you don't want to be the Primary User, please ask another user to assign themselves the role.",ResubmitFaileSubmission:"Resubmit affected submissions after the token refresh."},e.Common={SomethingWentWrong:"Something went wrong. Please contact support if the issue persists."}}(window.FSCONSTANTS=window.FSCONSTANTS||{},jQuery);
//# sourceMappingURL=../../fs_assets.map