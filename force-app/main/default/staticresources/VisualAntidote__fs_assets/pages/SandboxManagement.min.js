var FsJSGrid=function(e){"use strict";var t,n,d={},r=function(){},a=function(e,t,n){var d=document.getElementById(e);if(null!=d){if(d.childNodes.length>0){if(void 0===n||1!=n)return;var r=d.children[0];r.parentNode.removeChild(r),d=document.getElementById(e)}var a=document.createElement("div");a.classList.add("grid-wrapper-inner"),a.appendChild(i()),a.appendChild(o(t)),1==showAddPanel&&a.appendChild(s());var l=document.createElement("div");l.classList.add("grid-wrapper"),l.appendChild(a);var u=document.createElement("div");u.classList.add("grid-wrapper-outer"),u.appendChild(l),d.appendChild(u)}else console.log("[ERROR] FSGrid element does not exist in page")},i=function(){var e=document.createElement("div");e.classList.add("grid-status-summery-wrapper-text");var t=document.createElement("span");t.classList.add("grid-status-summery-text");var n=document.createElement("span");n.classList.add("grid-status-summery-count"),e.appendChild(t),e.appendChild(n);var d=e.cloneNode(!0);e.getElementsByClassName("grid-status-summery-text")[0].setAttribute("id","summery-text"),e.getElementsByClassName("grid-status-summery-count")[0].setAttribute("id","summery-value"),d.getElementsByClassName("grid-status-summery-text")[0].setAttribute("id","summery-result-text"),d.getElementsByClassName("grid-status-summery-count")[0].setAttribute("id","summery-result-value");var r=document.createElement("div");r.classList.add("grid-status-summery"),r.appendChild(e),r.appendChild(d);var a=document.createElement("div");a.setAttribute("id","progress-bar");var i=document.createElement("div");i.setAttribute("id","grid-status-progress-bar"),i.appendChild(a);var o=document.createElement("div");o.classList.add("grid-status-box-inner"),o.appendChild(r),o.appendChild(i);var s=document.createElement("div");s.classList.add("grid-status-box"),s.appendChild(o);var l=document.createElement("button");l.setAttribute("type","button"),l.innerHTML="Contact Us",l.setAttribute("onClick","fsLightbox3387782.show();"),l.classList.add("grid-button");var u=document.createElement("div");u.classList.add("grid-header-button"),u.appendChild(l);var c=document.createElement("div");return c.classList.add("grid-header"),c.appendChild(s),c.appendChild(u),c},o=function(e){var t=document.createElement("center");t.setAttribute("id","no-record-message"),t.innerHTML=e,t.classList.add("show");var n=document.createElement("div");n.classList.add("grid-table"),n.setAttribute("id","grid-content"),n.appendChild(t);var d=document.createElement("div");return d.classList.add("grid-body"),d.appendChild(n),d},s=function(){var e=document.createElement("span");e.setAttribute("id","available-count-text");var t=document.createElement("span");t.classList.add("available-count"),t.setAttribute("id","available-count-value");var n=document.createElement("div");n.classList.add("sandbox-available"),n.appendChild(t),n.appendChild(e);var d=document.createElement("button");d.setAttribute("type","button"),d.classList.add("grid-button"),d.innerHTML="Add Org",d.setAttribute("id","btn-add");var r=document.createElement("span");r.classList.add("grid-search-item-inner"),r.appendChild(d);var a=document.createElement("input");a.setAttribute("id","txt-search"),a.classList.add("Search-textbox"),a.setAttribute(recordIdKey.key,""),a.setAttribute("placeholder","Select a sandbox org to add");var i=document.createElement("div");i.classList.add("autocomplete"),i.appendChild(a),i.appendChild(r);var o=document.createElement("div");o.classList.add("grid-search-item"),o.appendChild(i),o.appendChild(n);var s=document.createElement("div");s.classList.add("grid-search-row"),s.appendChild(o);var l=document.createElement("div");l.classList.add("grid-search"),l.appendChild(s);var u=document.createElement("div");return u.classList.add("grid-footer"),u.appendChild(l),u},l=function(e){n=e},u=function(e,t){var d=e.attributes["selected-"+recordNameKey.key].value,r=e.attributes["selected-"+recordIdKey.key].value;if(void 0!=t)t(d,r);else for(var a=0;a<n.length;a++)if(SandboxList[a][listRecordIdKey.key]==r){y(SandboxList[a],recordIdKey,elementProperty);break}};function c(){var e=document.getElementById("txt-search");""!=e.value&&void 0!==e.attributes["selected-"+recordIdKey.key]&&("function"==typeof FsJSGridAddRecordEventListener?u(e,FsJSGridAddRecordEventListener):u(e)),e.value=""}var m=function(){var e=document.getElementById("btn-add");null!=e&&(function(e,t){if(e in d){var n=d[e];if(t in n){for(var r=n[t],a=r.length;a--;){var i=r[a];e.removeEventListener(t,i[0],i[1])}d[e][t]=[]}}}(e,"click"),function(e,t,n,r){e in d||(d[e]={});t in d[e]||(d[e][t]=[]);d[e][t].push([n,r]),e.addEventListener(t,n,r)}(e,"click",c,!1))},p=function(e){var t=e.closest(".grid-content-row"),n=document.querySelector("["+t.attributes[0].name+'="'+t.attributes[0].value+'"]');n.parentNode.removeChild(n)},v=function(){for(var e=document.querySelectorAll(".grid-content-row"),t=0;t<e.length;t++)null!=e[t]&&e[t].parentNode.removeChild(e[t])},y=function(e,t,n){if("object"==typeof e){console.log("[info] addSingleRecord Start... ");var d=document.createElement("div");for(var r in null!=e&&null!=e[t.key]&&d.setAttribute(t.key,e[t.key]),d.classList.add("grid-content-row"),g(!1),null==n&&0==n.length&&(n=Object.getOwnPropertyNames(e).sort()),n)if(r=n[r],e.hasOwnProperty(r)){var a=r.toLowerCase();if(-1==a.indexOf(t.key.toLowerCase())){var i,o=document.createElement("div");o.classList.add("grid-content-row-item"),-1!=a.indexOf(recordNameKey.id.toLowerCase())?(i=document.createElement("span")).innerHTML=e[r]+" ("+e[t.key]+")":-1==a.indexOf("icon")?(i=document.createElement("span")).innerHTML=e[r]:a.indexOf("icon")>=0&&((i=document.createElement("button")).setAttribute("type","button"),i.classList.add(e[r]),i.addEventListener("click",function(){"function"==typeof FsJSGridAddRecordEventListener?f(this,FsJSGridRemoveRecordEventListener):f(this)})),o.appendChild(i),d.appendChild(o)}}}document.getElementById("grid-content").appendChild(d)},f=function(e,t){void 0!=t?t(e):p(e)},g=function(e){var t=document.getElementById("no-record-message");"boolean"==typeof e&&1==e?(t.classList.add("show"),t.classList.remove("hide")):(t.classList.add("hide"),t.classList.remove("show"))},h=function(e,t,n){null!=e&&null!==e.length&&0==e.length&&g(!0);for(var d=0;d<e.length;d++)y(e[d],t,n)},E=function(e,t){var n=100*t/e;if(0==isNaN(n)){var d=document.getElementById("progress-bar"),r=1,a=setInterval(function(){r>=n?clearInterval(a):(r++,d.style.width=r+"%")},10)}return n},b=function(e){var t=document.getElementById("summery-text");t.innerHTML="",t.innerHTML=e[0].text;var n=document.getElementById("summery-result-text");if(n.innerHTML="",n.innerHTML=e[1].text,showAddPanel){var d=document.getElementById("available-count-text");d.innerHTML="",d.innerHTML=e[2].text}C(e)},L=function(e){var t=parseFloat(e[0].value),n=parseFloat(e[1].value);showAddPanel=t-n>0},C=function(e){var t=parseFloat(e[0].value),n=parseFloat(e[1].value),d=t-n;E(t,n);var r=document.getElementById("summery-value");r.innerHTML="",r.innerHTML=t;var a=document.getElementById("summery-result-value");a.innerHTML="",a.innerHTML=d+" / "+t;var i=document.getElementById("available-count-value");null!=i&&(i.innerHTML="",i.innerHTML=d)};function x(e,d,r,a){var i;l(d),e.addEventListener("input",function(e){o(e)});var o=function(t){var d,o,s=t.currentTarget.value;if(s.length>2){if(p(),!s)return!1;i=-1,(d=document.createElement("div")).setAttribute("id",t.currentTarget.id+"-autocomplete-list"),d.setAttribute("class","autocomplete-items"),document.querySelector(".grid-wrapper-inner").appendChild(d),v();for(var l=0;l<n.length;l++)null!=(o=u(e,n[l],r,s,a))&&d.appendChild(o)}},s=function(e,t){if(void 0!==e){for(var n=0;n<e.length;n++)if(e[n][listRecordIdKey.key]==t[a.id])return!1}else console.log("[ERROR] DataFromGrid does not exist");return!0},u=function(e,n,d,r,a){if((n[d.key].toUpperCase().indexOf(r.toUpperCase())>-1||n[d.id].substr(0,r.length).toUpperCase()==r.toUpperCase())&&s(t,n)){var i=document.createElement("div");i.innerHTML=n[d.key]+" ("+n[d.id]+")";var o=document.createElement("input");for(var l in o.setAttribute("type","hidden"),o.setAttribute("value",n[d.key]),n)o.setAttribute(l,n[l]);return i.appendChild(o),i.addEventListener("click",function(t){e.value=this.getElementsByTagName("input")[0].value;var n=this.getElementsByTagName("input");if(null!=n[0].attributes[a.id]&&null!=n[0].attributes[recordNameKey.key]){var d=n[0].attributes[a.id].value,r=n[0].attributes[recordNameKey.id].value;e.setAttribute("selected-"+a.key,d),e.setAttribute("selected-"+recordNameKey.key,r),console.log("[log] selected value:"+e.value+" key: "+d)}p()}),i}};e.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"-autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(i++,c(t)):38==e.keyCode?(i--,c(t)):13==e.keyCode&&(e.preventDefault(),i>-1&&t&&t[i].click())});var c=function(e){if(!e)return!1;m(e),i>=e.length&&(i=0),i<0&&(i=e.length-1),e[i].classList.add("autocomplete-active")},m=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")},p=function(t){for(var n=document.getElementsByClassName("autocomplete-items"),d=0;d<n.length;d++)t!=n[d]&&t!=e&&n[d].parentNode.removeChild(n[d])};document.addEventListener("click",function(e){p(e.target)}),window.addEventListener("scroll",function(e){p(e.target)},!1),window.addEventListener("resize",function(e){p(e.target)},!1);var v=function(){var e=document.getElementById("txt-search"),t=function(e){let t,n=0,d=0;return e&&(n=(t=e.getBoundingClientRect()).left+window.scrollX,d=t.top+window.scrollY),{x:n,y:d}}(e),n=document.getElementById(e.id+"-autocomplete-list"),d=document.getElementById("AppBodyHeader");null!=d?(n.style.top=t.y+34-d.offsetHeight+"px",n.style.left=t.x-9+"px"):(n.style.top=t.y+34+"px",n.style.left=t.x+"px")};if("undefined"!=typeof module&&void 0!==module.exports)return{autoCompleteEventListener:o,setAutoCompleteList:u}}return r.prototype.FsJSGrid=function(){},r.prototype.init=function(e,t,n,d){console.log("[FsJSGrid] start"),L(d),a(e,t,n),m()},r.prototype.setData=function(e,n,d){!function(e,n,d){t=e,v(),h(e,n,d)}(e,n,d)},r.prototype.setAutocomplete=function(e,t,n){showAddPanel&&x(document.getElementById("txt-search"),e,t,n)},r.prototype.setCounter=function(e){b(e)},r.prototype.updateCounter=function(e){C(e)},r.prototype.addRecord=function(e,t,n){null!=e&&y(e,t,n)},r.prototype.removeRecord=function(e){null!=e&&p(e)},"undefined"!=typeof module&&void 0!==module.exports?{BuilderGrid:a,setCounters:b,updateCounterValue:C,setProgressBar:E,addSingleRecord:y,addMultiRecords:h,removeRecord:p,autocomplete:x,setShowAddPanel:L}:new r}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")());"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=FsJSGrid);
//# sourceMappingURL=../../fs_assets.map
var elementProperty=["SandboxName","AppInstalled","Icon","RecordId"],recordIdKey={id:"Id",key:"RecordId"},listRecordIdKey={id:"SandboxOrganization",key:"RecordId"},recordNameKey={id:"SandboxName",key:"SandboxName"},searchBy={id:"SandboxOrganization",key:"SandboxName"},showAddPanel=!1;function initializeSandboxPageComponents(e){console.log("[initializeSandboxPageComponents] Start...");var o=REMOTE_ACTIONS.initializeSandboxPage;Visualforce.remoting.Manager.invokeAction(o,function(o,n){if(n.status){console.log(o),console.log(n);var s=o.listSandboxOrgDto,a=o.listSandboxesAvailableDto.records,t=o.assignedSandbox,i=o.allocatedSandbox,r=(o.availableSandbox,!0),d=[{text:"Managed Sandboxes",value:i},{text:"Unassigned",value:t},{text:"available sandbox",value:"0"}];e?FsJSGrid.init("FSGrid-sandbox","You don’t have any Sandboxes added.",r,d):(r=!1,FsJSGrid.init("FSGrid-sandbox","You don’t have any Sandboxes added.",r,d)),FsJSGrid.setData(s,recordIdKey,elementProperty),FsJSGrid.setCounter(d),FsJSGrid.setAutocomplete(a,searchBy,listRecordIdKey)}else commonAlertMessage("Something went wrong","Please contact support if the issue persists.")},{escape:!0})}function getListOfOrgs(){console.log("[getListOfOrgs] Start...");var e=REMOTE_ACTIONS.GetListOfOrgs;Visualforce.remoting.Manager.invokeAction(e,function(e,o){o.status?(console.log(e),console.log(o),FsJSGrid.setData(e,recordIdKey,elementProperty)):commonAlertMessage("Something went wrong","Please contact support if the issue persists.")},{escape:!0})}$(function(){initializeSandboxPageComponents(!1)});var FsJSGridAddRecordEventListener=function(e,o){console.log("[getListOfOrgs] Start...");var n=REMOTE_ACTIONS.AddOrg;Visualforce.remoting.Manager.invokeAction(n,e,o,function(e,o){if(o.status&&""==e.ResultText){console.log(e),console.log(o),FsJSGrid.addRecord(e,recordIdKey,elementProperty);resetSandboxCountResponse({uiMessage:"Sandbox added successfully!"}),initializeSandboxPageComponents(!0)}else commonAlertMessage("Something went wrong","Please contact support if the issue persists.")},{escape:!0})},FsJSGridRemoveRecordEventListener=function(e){if(null!=e){confirmDialogWithCallback("Are you sure you want to remove this Sandbox?","This Sandbox will no longer be able to access Formstack App.",e,removeSandbox,"","")}};function resetSandboxCountResponse(e){var o=safeStringValue(e.uiMessageType,""),n=safeStringValue(e.uiMessage,""),s=safeStringValue(e.uiMessage2,""),a=safeStringValue(e.uiButtonText,"Close");o==enumMessageType.Alert?popupMessage_ShowOneButton(enumFSPopupMessageType.Alert,n,s,a):o==enumMessageType.Info?commonInfoMessage(n,s,a):popupMessage_ShowOneButton(enumFSPopupMessageType.Success,n,s,a),initializeSandboxPageComponents(!0)}function removeSandbox(e){console.log("[removeSandbox] Start...");var o=e.parentNode.parentNode.attributes[recordIdKey.key].value,n=REMOTE_ACTIONS.RemoveOrg;Visualforce.remoting.Manager.invokeAction(n,o,function(o,n){if(n.status){if(console.log(o),console.log(n),o.IsValid){FsJSGrid.removeRecord(e);resetSandboxCountResponse({uiMessage:"Sandbox successfully removed!"})}}else commonAlertMessage("Something went wrong","Please contact support if the issue persists.")},{escape:!0})}
//# sourceMappingURL=../../fs_assets.map
function FSLightbox(e){if(!e)return!1;this.config=e,this.ie=document.all,this.ns6=document.getElementById&&!document.all,this.closeHandle=document.getElementById("fsLightboxClose"+e.form);var t=this,i=document.getElementsByTagName("div")[0];null!==e.handle&&document.getElementById(e.handle)?(this.handle=document.getElementById(e.handle),this.handle.onclick=function(){return t.show(t.config.form),!1}):(this.handle=document.createElement("div"),this.handle.style.background="#000",this.handle.style.border="#FFF solid 2px",this.handle.style.zIndex="1",this.handle.className="fsLightboxHandle","right"==e.handlePosition?(this.handle.style.right="0px",this.handle.style.top="200px",this.handleAngle="-90",this.handle.style.borderRight="0px",this.handle.style.position="absolute",this.handle.onmouseover=function(){t.handle.style.paddingRight="10px"},this.handle.onmouseout=function(){t.handle.style.paddingRight="0px"}):"bottomLeft"==e.handlePosition?(this.handle.style.left="100px",this.handle.style.bottom="0px",this.handleAngle="0",this.handle.style.borderBottom="0px",this.handle.style.position="fixed",this.handle.onmouseover=function(){t.handle.style.paddingBottom="10px"},this.handle.onmouseout=function(){t.handle.style.paddingBottom="0px"}):"bottomRight"==e.handlePosition?(this.handle.style.right="100px",this.handle.style.bottom="0px",this.handleAngle="0",this.handle.style.borderBottom="0px",this.handle.style.position="fixed",this.handle.onmouseover=function(){t.handle.style.paddingBottom="10px"},this.handle.onmouseout=function(){t.handle.style.paddingBottom="0px"}):"topLeft"==e.handlePosition?(this.handle.style.left="100px",this.handle.style.top="0px",this.handleAngle="0",this.handle.style.borderTop="0px",this.handle.style.position="absolute",this.handle.onmouseover=function(){t.handle.style.paddingTop="10px"},this.handle.onmouseout=function(){t.handle.style.paddingTop="0px"}):"topRight"==e.handlePosition?(this.handle.style.right="100px",this.handle.style.top="0px",this.handleAngle="0",this.handle.style.borderTop="0px",this.handle.style.position="absolute",this.handle.onmouseover=function(){t.handle.style.paddingTop="10px"},this.handle.onmouseout=function(){t.handle.style.paddingTop="0px"}):(this.handle.style.left="0px",this.handle.style.top="200px",this.handleAngle="-90",this.handle.style.borderLeft="0px",this.handle.style.position="absolute",this.handle.onmouseover=function(){t.handle.style.paddingLeft="10px"},this.handle.onmouseout=function(){t.handle.style.paddingLeft="0px"}),e.handleImage&&(this.handleImage=e.handleImage+"&angle="+this.handleAngle,this.handleLink='<img src="'+this.handleImage+'" border="0" alt="'+this.config.handleText+'" />',this.handle.innerHTML='<a href="#" style="color:#FFF; text-decoration:none;">'+this.handleLink+"</a>"),this.handle.onclick=function(){return t.show(t.config.form),!1},i.parentNode.insertBefore(this.handle,i)),this.closeHandle.onclick=function(){return t.hide(t.config.form),!1},this.fadeOverlay=document.createElement("div"),this.fadeOverlay.style.display="none",this.fadeOverlay.style.zIndex="9999",this.fadeOverlay.style.position="absolute",this.fadeOverlay.style.background="#000",this.fadeOverlay.style.overflow="hidden",this.fadeOverlay.innerHTML="&nbsp",this.fadeOverlay.onclick=function(){t.fade("out"),t.hide()},i.parentNode.insertBefore(this.fadeOverlay,i);var n=document.getElementById("fsLightbox"+e.form);n.style.position="absolute",n.style.background="#EEE",n.style.border="solid 0.5px #c8d6d9",n.style.zIndex="10000",n.style.scroll="auto",n.style.display="none",n.style.borderRadius="4px",n.style.boxShadow="0px 1px 5.5px 1.5px rgba(167, 167, 167, 0.44)",n.style.backgroundColor="#ffffff",this.show=function(){this.fade("in");var e=document.getElementById("fsLightbox"+this.config.form),t=e.getElementsByTagName("iframe");t[0].src=t[0].src,e.style.display="block"!=e.style.display?"block":"none";var i=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,n=document.body.clientWidth/2-e.offsetWidth/2,l=this.iecompattest().clientHeight/2+i-e.offsetHeight/2;e.style.left=Math.round(n)+"px",e.style.top=Math.round(l>i?l:i)+"px"},this.reload=function(){var e=document.getElementById("fsLightbox"+this.config.form).getElementsByTagName("iframe");e[0].src=e[0].src},this.hide=function(){this.fade("out"),document.getElementById("fsLightbox"+this.config.form).style.display="none"},this.fade=function(e){var t=this.ie&&!window.opera?this.iecompattest().scrollLeft+this.iecompattest().clientWidth:window.pageXOffset+window.innerWidth;if(D=window.document,height=Math.max(Math.max(D.body.scrollHeight,D.documentElement.scrollHeight),Math.max(D.body.offsetHeight,D.documentElement.offsetHeight),Math.max(D.body.clientHeight,D.documentElement.clientHeight)),this.fadeOverlay.style.left="0px",this.fadeOverlay.style.top="0px",this.fadeOverlay.style.width=t+"px",this.fadeOverlay.style.height=height+"px",!("in"==e&&this.getOpacity()>.6||"out"==e&&this.getOpacity()<.1)){var i="in"==e?0:.7;this.fadeOverlay.style.display="block",this._fader(e,i)}},this._fader=function(e,t){if("in"==e?t+=.05:t-=.05,null!==this.fadeOverlay.style.filter?(this.fadeOverlay.style.filter="alpha(opacity="+100*t+")",this.fadeOverlay.style.opacity=t):this.fadeOverlay.filters&&this.fadeOverlay.filters[0]?"number"==typeof this.fadeOverlay.filters[0].opacity?this.fadeOverlay.filters[0].opacity=100*t:this.fadeOverlay.style.filter="alpha(opacity="+100*t+")":void 0!==this.fadeOverlay.style.MozOpacity&&""!==t?this.fadeOverlay.style.MozOpacity=t:this.fadeOverlay.style.opacity=t,!("in"==e&&t>=.7))if("out"==e&&t<=0)this.fadeOverlay.style.display="none";else{var i=this;setTimeout(function(){i._fader(e,t)},10)}},this.getOpacity=function(){var e=-1;if((e=this.fadeOverlay.style.opacity)<0)if(null!==this.fadeOverlay.style.filter){var t=this.fadeOverlay.style.filter.replace("alpha(opacity=","");e=parseInt(t.replace(")",""))}else e=0;return e},this.iecompattest=function(){return document.compatMode&&"BackCompat"!=document.compatMode?document.documentElement:document.body},this.getposOffset=function(e,t){for(var i="left"==t?e.offsetLeft:e.offsetTop,n=e.offsetParent;null!==n;)i="left"==t?i+n.offsetLeft:i+n.offsetTop,n=n.offsetParent;return i}}function initIframe(e){var t=window.document.createElement("div");t.classList.add("fsLightbox"),t.classList.add("displaynone"),t.id="fsLightbox"+e.id;var i=window.document.createElement("div");i.classList.add("header");var n=window.document.createElement("span");n.classList.add("header-text"),n.textContent=e.title;var l=window.document.createElement("a");l.classList.add("close"),l.title="Close",l.href="#",l.id="fsLightboxClose"+e.id,l.text="Close",i.append(l),i.append(n);var o=window.document.createElement("div");o.id="fsLightboxContent"+e.id,o.style="width:676px; height:641px; padding-top:0px; overflow:auto;";var s=window.document.createElement("iframe");return s.src=e.src,s.title=e.title,s.width="676",s.height="100%",o.append(s),t.append(i),t.append(o),t}
//# sourceMappingURL=../../fs_assets.map