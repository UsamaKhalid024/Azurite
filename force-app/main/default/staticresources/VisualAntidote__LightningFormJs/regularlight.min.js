!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,t;function a(){return e.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e){return void 0===e}function o(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){var a,i=[];for(a=0;a<e.length;++a)i.push(t(e[a],a));return i}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var a in t)d(t,a)&&(e[a]=t[a]);return d(t,"toString")&&(e.toString=t.toString),d(t,"valueOf")&&(e.valueOf=t.valueOf),e}function u(e,t,a,i){return Rt(e,t,a,i,!0).utc()}function c(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function m(e){if(null==e._isValid){var a=c(e),i=t.call(a.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&a.overflow<0&&!a.empty&&!a.invalidMonth&&!a.invalidWeekday&&!a.weekdayMismatch&&!a.nullInput&&!a.invalidFormat&&!a.userInvalidated&&(!a.meridiem||a.meridiem&&i);if(e._strict&&(n=n&&0===a.charsLeftOver&&0===a.unusedTokens.length&&void 0===a.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function p(e){var t=u(NaN);return null!=e?f(c(t),e):c(t).userInvalidated=!0,t}t=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),a=t.length>>>0,i=0;i<a;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var h=a.momentProperties=[];function v(e,t){var a,i,n;if(r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),r(t._i)||(e._i=t._i),r(t._f)||(e._f=t._f),r(t._l)||(e._l=t._l),r(t._strict)||(e._strict=t._strict),r(t._tzm)||(e._tzm=t._tzm),r(t._isUTC)||(e._isUTC=t._isUTC),r(t._offset)||(e._offset=t._offset),r(t._pf)||(e._pf=c(t)),r(t._locale)||(e._locale=t._locale),h.length>0)for(a=0;a<h.length;a++)r(n=t[i=h[a]])||(e[i]=n);return e}var g=!1;function F(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===g&&(g=!0,a.updateOffset(this),g=!1)}function w(e){return e instanceof F||null!=e&&null!=e._isAMomentObject}function S(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function $(e){var t=+e,a=0;return 0!==t&&isFinite(t)&&(a=S(t)),a}function y(e,t,a){var i,n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0;for(i=0;i<n;i++)(a&&e[i]!==t[i]||!a&&$(e[i])!==$(t[i]))&&o++;return o+r}function E(e){!1===a.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function _(e,t){var i=!0;return f(function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,e),i){for(var n,r=[],o=0;o<arguments.length;o++){if(n="","object"==typeof arguments[o]){for(var s in n+="\n["+o+"] ",arguments[0])n+=s+": "+arguments[0][s]+", ";n=n.slice(0,-2)}else n=arguments[o];r.push(n)}E(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),i=!1}return t.apply(this,arguments)},t)}var D,R={};function T(e,t){null!=a.deprecationHandler&&a.deprecationHandler(e,t),R[e]||(E(t),R[e]=!0)}function b(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function C(e,t){var a,i=f({},e);for(a in t)d(t,a)&&(n(e[a])&&n(t[a])?(i[a]={},f(i[a],e[a]),f(i[a],t[a])):null!=t[a]?i[a]=t[a]:delete i[a]);for(a in e)d(e,a)&&!d(t,a)&&n(e[a])&&(i[a]=f({},i[a]));return i}function I(e){null!=e&&this.set(e)}a.suppressDeprecationWarnings=!1,a.deprecationHandler=null,D=Object.keys?Object.keys:function(e){var t,a=[];for(t in e)d(e,t)&&a.push(t);return a};var x={};function M(e,t){var a=e.toLowerCase();x[a]=x[a+"s"]=x[t]=e}function L(e){return"string"==typeof e?x[e]||x[e.toLowerCase()]:void 0}function k(e){var t,a,i={};for(a in e)d(e,a)&&(t=L(a))&&(i[t]=e[a]);return i}var P={};function O(e,t){P[e]=t}function A(e,t,a){var i=""+Math.abs(e),n=t-i.length;return(e>=0?a?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+i}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,H=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},V={};function Y(e,t,a,i){var n=i;"string"==typeof i&&(n=function(){return this[i]()}),e&&(V[e]=n),t&&(V[t[0]]=function(){return A(n.apply(this,arguments),t[1],t[2])}),a&&(V[a]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function q(e,t){return e.isValid()?(t=X(t,e.localeData()),U[t]=U[t]||function(e){var t,a,i,n=e.match(N);for(t=0,a=n.length;t<a;t++)V[n[t]]?n[t]=V[n[t]]:n[t]=(i=n[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,r="";for(i=0;i<a;i++)r+=b(n[i])?n[i].call(t,e):n[i];return r}}(t),U[t](e)):e.localeData().invalidDate()}function X(e,t){var a=5;function i(e){return t.longDateFormat(e)||e}for(H.lastIndex=0;a>=0&&H.test(e);)e=e.replace(H,i),H.lastIndex=0,a-=1;return e}var G=/\d/,W=/\d\d/,j=/\d{3}/,z=/\d{4}/,B=/[+-]?\d{6}/,Q=/\d\d?/,J=/\d\d\d\d?/,Z=/\d\d\d\d\d\d?/,K=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,ae=/\d+/,ie=/[+-]?\d+/,ne=/Z|[+-]\d\d:?\d\d/gi,re=/Z|[+-]\d\d(?::?\d\d)?/gi,oe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,se={};function le(e,t,a){se[e]=b(t)?t:function(e,i){return e&&a?a:t}}function de(e,t){return d(se,e)?se[e](t._strict,t._locale):new RegExp(fe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,a,i,n){return t||a||i||n})))}function fe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ue={};function ce(e,t){var a,i=t;for("string"==typeof e&&(e=[e]),o(t)&&(i=function(e,a){a[t]=$(e)}),a=0;a<e.length;a++)ue[e[a]]=i}function me(e,t){ce(e,function(e,a,i,n){i._w=i._w||{},t(e,i._w,i,n)})}function pe(e,t,a){null!=t&&d(ue,e)&&ue[e](t,a._a,a,e)}var he=0,ve=1,ge=2,Fe=3,we=4,Se=5,$e=6,ye=7,Ee=8;function _e(e){return De(e)?366:365}function De(e){return e%4==0&&e%100!=0||e%400==0}Y("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),Y(0,["YY",2],0,function(){return this.year()%100}),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),M("year","y"),O("year",1),le("Y",ie),le("YY",Q,W),le("YYYY",ee,z),le("YYYYY",te,B),le("YYYYYY",te,B),ce(["YYYYY","YYYYYY"],he),ce("YYYY",function(e,t){t[he]=2===e.length?a.parseTwoDigitYear(e):$(e)}),ce("YY",function(e,t){t[he]=a.parseTwoDigitYear(e)}),ce("Y",function(e,t){t[he]=parseInt(e,10)}),a.parseTwoDigitYear=function(e){return $(e)+($(e)>68?1900:2e3)};var Re,Te=be("FullYear",!0);function be(e,t){return function(i){return null!=i?(Ie(this,e,i),a.updateOffset(this,t),this):Ce(this,e)}}function Ce(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Ie(e,t,a){e.isValid()&&!isNaN(a)&&("FullYear"===t&&De(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](a,e.month(),xe(a,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](a))}function xe(e,t){if(isNaN(e)||isNaN(t))return NaN;var a=(t%12+12)%12;return e+=(t-a)/12,1===a?De(e)?29:28:31-a%7%2}Re=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},Y("M",["MM",2],"Mo",function(){return this.month()+1}),Y("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),Y("MMMM",0,0,function(e){return this.localeData().months(this,e)}),M("month","M"),O("month",8),le("M",Q),le("MM",Q,W),le("MMM",function(e,t){return t.monthsShortRegex(e)}),le("MMMM",function(e,t){return t.monthsRegex(e)}),ce(["M","MM"],function(e,t){t[ve]=$(e)-1}),ce(["MMM","MMMM"],function(e,t,a,i){var n=a._locale.monthsParse(e,i,a._strict);null!=n?t[ve]=n:c(a).invalidMonth=e});var Me=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Le="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ke="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Pe(e,t){var a;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=$(t);else if(!o(t=e.localeData().monthsParse(t)))return e;return a=Math.min(e.date(),xe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,a),e}function Oe(e){return null!=e?(Pe(this,e),a.updateOffset(this,!0),this):Ce(this,"Month")}var Ae=oe,Ne=oe;function He(){function e(e,t){return t.length-e.length}var t,a,i=[],n=[],r=[];for(t=0;t<12;t++)a=u([2e3,t]),i.push(this.monthsShort(a,"")),n.push(this.months(a,"")),r.push(this.months(a,"")),r.push(this.monthsShort(a,""));for(i.sort(e),n.sort(e),r.sort(e),t=0;t<12;t++)i[t]=fe(i[t]),n[t]=fe(n[t]);for(t=0;t<24;t++)r[t]=fe(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ue(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Ve(e,t,a){var i=7+t-a;return-(7+Ue(e,0,i).getUTCDay()-t)%7+i-1}function Ye(e,t,a,i,n){var r,o,s=1+7*(t-1)+(7+a-i)%7+Ve(e,i,n);return s<=0?o=_e(r=e-1)+s:s>_e(e)?(r=e+1,o=s-_e(e)):(r=e,o=s),{year:r,dayOfYear:o}}function qe(e,t,a){var i,n,r=Ve(e.year(),t,a),o=Math.floor((e.dayOfYear()-r-1)/7)+1;return o<1?i=o+Xe(n=e.year()-1,t,a):o>Xe(e.year(),t,a)?(i=o-Xe(e.year(),t,a),n=e.year()+1):(n=e.year(),i=o),{week:i,year:n}}function Xe(e,t,a){var i=Ve(e,t,a),n=Ve(e+1,t,a);return(_e(e)-i+n)/7}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),M("week","w"),M("isoWeek","W"),O("week",5),O("isoWeek",5),le("w",Q),le("ww",Q,W),le("W",Q),le("WW",Q,W),me(["w","ww","W","WW"],function(e,t,a,i){t[i.substr(0,1)]=$(e)}),Y("d",0,"do","day"),Y("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),Y("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),Y("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),M("day","d"),M("weekday","e"),M("isoWeekday","E"),O("day",11),O("weekday",11),O("isoWeekday",11),le("d",Q),le("e",Q),le("E",Q),le("dd",function(e,t){return t.weekdaysMinRegex(e)}),le("ddd",function(e,t){return t.weekdaysShortRegex(e)}),le("dddd",function(e,t){return t.weekdaysRegex(e)}),me(["dd","ddd","dddd"],function(e,t,a,i){var n=a._locale.weekdaysParse(e,i,a._strict);null!=n?t.d=n:c(a).invalidWeekday=e}),me(["d","e","E"],function(e,t,a,i){t[i]=$(e)});var Ge="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),We="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),je="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ze=oe,Be=oe,Qe=oe;function Je(){function e(e,t){return t.length-e.length}var t,a,i,n,r,o=[],s=[],l=[],d=[];for(t=0;t<7;t++)a=u([2e3,1]).day(t),i=this.weekdaysMin(a,""),n=this.weekdaysShort(a,""),r=this.weekdays(a,""),o.push(i),s.push(n),l.push(r),d.push(i),d.push(n),d.push(r);for(o.sort(e),s.sort(e),l.sort(e),d.sort(e),t=0;t<7;t++)s[t]=fe(s[t]),l[t]=fe(l[t]),d[t]=fe(d[t]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Ze(){return this.hours()%12||12}function Ke(e,t){Y(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function et(e,t){return t._meridiemParse}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,Ze),Y("k",["kk",2],0,function(){return this.hours()||24}),Y("hmm",0,0,function(){return""+Ze.apply(this)+A(this.minutes(),2)}),Y("hmmss",0,0,function(){return""+Ze.apply(this)+A(this.minutes(),2)+A(this.seconds(),2)}),Y("Hmm",0,0,function(){return""+this.hours()+A(this.minutes(),2)}),Y("Hmmss",0,0,function(){return""+this.hours()+A(this.minutes(),2)+A(this.seconds(),2)}),Ke("a",!0),Ke("A",!1),M("hour","h"),O("hour",13),le("a",et),le("A",et),le("H",Q),le("h",Q),le("k",Q),le("HH",Q,W),le("hh",Q,W),le("kk",Q,W),le("hmm",J),le("hmmss",Z),le("Hmm",J),le("Hmmss",Z),ce(["H","HH"],Fe),ce(["k","kk"],function(e,t,a){var i=$(e);t[Fe]=24===i?0:i}),ce(["a","A"],function(e,t,a){a._isPm=a._locale.isPM(e),a._meridiem=e}),ce(["h","hh"],function(e,t,a){t[Fe]=$(e),c(a).bigHour=!0}),ce("hmm",function(e,t,a){var i=e.length-2;t[Fe]=$(e.substr(0,i)),t[we]=$(e.substr(i)),c(a).bigHour=!0}),ce("hmmss",function(e,t,a){var i=e.length-4,n=e.length-2;t[Fe]=$(e.substr(0,i)),t[we]=$(e.substr(i,2)),t[Se]=$(e.substr(n)),c(a).bigHour=!0}),ce("Hmm",function(e,t,a){var i=e.length-2;t[Fe]=$(e.substr(0,i)),t[we]=$(e.substr(i))}),ce("Hmmss",function(e,t,a){var i=e.length-4,n=e.length-2;t[Fe]=$(e.substr(0,i)),t[we]=$(e.substr(i,2)),t[Se]=$(e.substr(n))});var tt,at=be("Hours",!0),it={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Le,monthsShort:ke,week:{dow:0,doy:6},weekdays:Ge,weekdaysMin:je,weekdaysShort:We,meridiemParse:/[ap]\.?m?\.?/i},nt={},rt={};function ot(e){return e?e.toLowerCase().replace("_","-"):e}function st(e){var t=null;if(!nt[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=tt._abbr,require("./locale/"+e),lt(t)}catch(e){}return nt[e]}function lt(e,t){var a;return e&&((a=r(t)?ft(e):dt(e,t))?tt=a:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),tt._abbr}function dt(e,t){if(null!==t){var a,i=it;if(t.abbr=e,null!=nt[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=nt[e]._config;else if(null!=t.parentLocale)if(null!=nt[t.parentLocale])i=nt[t.parentLocale]._config;else{if(null==(a=st(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;i=a._config}return nt[e]=new I(C(i,t)),rt[e]&&rt[e].forEach(function(e){dt(e.name,e.config)}),lt(e),nt[e]}return delete nt[e],null}function ft(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return tt;if(!i(e)){if(t=st(e))return t;e=[e]}return function(e){for(var t,a,i,n,r=0;r<e.length;){for(t=(n=ot(e[r]).split("-")).length,a=(a=ot(e[r+1]))?a.split("-"):null;t>0;){if(i=st(n.slice(0,t).join("-")))return i;if(a&&a.length>=t&&y(n,a,!0)>=t-1)break;t--}r++}return tt}(e)}function ut(e){var t,a=e._a;return a&&-2===c(e).overflow&&(t=a[ve]<0||a[ve]>11?ve:a[ge]<1||a[ge]>xe(a[he],a[ve])?ge:a[Fe]<0||a[Fe]>24||24===a[Fe]&&(0!==a[we]||0!==a[Se]||0!==a[$e])?Fe:a[we]<0||a[we]>59?we:a[Se]<0||a[Se]>59?Se:a[$e]<0||a[$e]>999?$e:-1,c(e)._overflowDayOfYear&&(t<he||t>ge)&&(t=ge),c(e)._overflowWeeks&&-1===t&&(t=ye),c(e)._overflowWeekday&&-1===t&&(t=Ee),c(e).overflow=t),e}function ct(e,t,a){return null!=e?e:null!=t?t:a}function mt(e){var t,i,n,r,o,s=[];if(!e._d){for(n=function(e){var t=new Date(a.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[ge]&&null==e._a[ve]&&function(e){var t,a,i,n,r,o,s,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)r=1,o=4,a=ct(t.GG,e._a[he],qe(Tt(),1,4).year),i=ct(t.W,1),((n=ct(t.E,1))<1||n>7)&&(l=!0);else{r=e._locale._week.dow,o=e._locale._week.doy;var d=qe(Tt(),r,o);a=ct(t.gg,e._a[he],d.year),i=ct(t.w,d.week),null!=t.d?((n=t.d)<0||n>6)&&(l=!0):null!=t.e?(n=t.e+r,(t.e<0||t.e>6)&&(l=!0)):n=r}i<1||i>Xe(a,r,o)?c(e)._overflowWeeks=!0:null!=l?c(e)._overflowWeekday=!0:(s=Ye(a,i,n,r,o),e._a[he]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(o=ct(e._a[he],n[he]),(e._dayOfYear>_e(o)||0===e._dayOfYear)&&(c(e)._overflowDayOfYear=!0),i=Ue(o,0,e._dayOfYear),e._a[ve]=i.getUTCMonth(),e._a[ge]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=n[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Fe]&&0===e._a[we]&&0===e._a[Se]&&0===e._a[$e]&&(e._nextDay=!0,e._a[Fe]=0),e._d=(e._useUTC?Ue:function(e,t,a,i,n,r,o){var s=new Date(e,t,a,i,n,r,o);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}).apply(null,s),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Fe]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(c(e).weekdayMismatch=!0)}}var pt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vt=/Z|[+-]\d\d(?::?\d\d)?/,gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ft=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wt=/^\/?Date\((\-?\d+)/i;function St(e){var t,a,i,n,r,o,s=e._i,l=pt.exec(s)||ht.exec(s);if(l){for(c(e).iso=!0,t=0,a=gt.length;t<a;t++)if(gt[t][1].exec(l[1])){n=gt[t][0],i=!1!==gt[t][2];break}if(null==n)return void(e._isValid=!1);if(l[3]){for(t=0,a=Ft.length;t<a;t++)if(Ft[t][1].exec(l[3])){r=(l[2]||" ")+Ft[t][0];break}if(null==r)return void(e._isValid=!1)}if(!i&&null!=r)return void(e._isValid=!1);if(l[4]){if(!vt.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=n+(r||"")+(o||""),_t(e)}else e._isValid=!1}var $t=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;var yt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Et(e){var t=$t.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(t){var a=function(e,t,a,i,n,r){var o=[function(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}(e),ke.indexOf(t),parseInt(a,10),parseInt(i,10),parseInt(n,10)];return r&&o.push(parseInt(r,10)),o}(t[4],t[3],t[2],t[5],t[6],t[7]);if(!function(e,t,a){return!e||We.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(c(a).weekdayMismatch=!0,a._isValid=!1,!1)}(t[1],a,e))return;e._a=a,e._tzm=function(e,t,a){if(e)return yt[e];if(t)return 0;var i=parseInt(a,10),n=i%100;return(i-n)/100*60+n}(t[8],t[9],t[10]),e._d=Ue.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),c(e).rfc2822=!0}else e._isValid=!1}function _t(e){if(e._f!==a.ISO_8601)if(e._f!==a.RFC_2822){e._a=[],c(e).empty=!0;var t,i,n,r,o,s=""+e._i,l=s.length,d=0;for(n=X(e._f,e._locale).match(N)||[],t=0;t<n.length;t++)r=n[t],(i=(s.match(de(r,e))||[])[0])&&((o=s.substr(0,s.indexOf(i))).length>0&&c(e).unusedInput.push(o),s=s.slice(s.indexOf(i)+i.length),d+=i.length),V[r]?(i?c(e).empty=!1:c(e).unusedTokens.push(r),pe(r,i,e)):e._strict&&!i&&c(e).unusedTokens.push(r);c(e).charsLeftOver=l-d,s.length>0&&c(e).unusedInput.push(s),e._a[Fe]<=12&&!0===c(e).bigHour&&e._a[Fe]>0&&(c(e).bigHour=void 0),c(e).parsedDateParts=e._a.slice(0),c(e).meridiem=e._meridiem,e._a[Fe]=function(e,t,a){var i;return null==a?t:null!=e.meridiemHour?e.meridiemHour(t,a):null!=e.isPM?((i=e.isPM(a))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[Fe],e._meridiem),mt(e),ut(e)}else Et(e);else St(e)}function Dt(e){var t=e._i,d=e._f;return e._locale=e._locale||ft(e._l),null===t||void 0===d&&""===t?p({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),w(t)?new F(ut(t)):(s(t)?e._d=t:i(d)?function(e){var t,a,i,n,r;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(n=0;n<e._f.length;n++)r=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],_t(t),m(t)&&(r+=c(t).charsLeftOver,r+=10*c(t).unusedTokens.length,c(t).score=r,(null==i||r<i)&&(i=r,a=t));f(e,a||t)}(e):d?_t(e):function(e){var t=e._i;r(t)?e._d=new Date(a.now()):s(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=wt.exec(e._i);null===t?(St(e),!1===e._isValid&&(delete e._isValid,Et(e),!1===e._isValid&&(delete e._isValid,a.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):i(t)?(e._a=l(t.slice(0),function(e){return parseInt(e,10)}),mt(e)):n(t)?function(e){if(!e._d){var t=k(e._i);e._a=l([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),mt(e)}}(e):o(t)?e._d=new Date(t):a.createFromInputFallback(e)}(e),m(e)||(e._d=null),e))}function Rt(e,t,a,r,o){var s,l={};return!0!==a&&!1!==a||(r=a,a=void 0),(n(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||i(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=a,l._i=e,l._f=t,l._strict=r,(s=new F(ut(Dt(l))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Tt(e,t,a,i){return Rt(e,t,a,i,!1)}a.createFromInputFallback=_("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),a.ISO_8601=function(){},a.RFC_2822=function(){};var bt=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:p()}),Ct=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:p()});function It(e,t){var a,n;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Tt();for(a=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](a)||(a=t[n]);return a}var xt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Mt(e){var t=k(e),a=t.year||0,i=t.quarter||0,n=t.month||0,r=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,d=t.second||0,f=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Re.call(xt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var a=!1,i=0;i<xt.length;++i)if(e[xt[i]]){if(a)return!1;parseFloat(e[xt[i]])!==$(e[xt[i]])&&(a=!0)}return!0}(t),this._milliseconds=+f+1e3*d+6e4*l+1e3*s*60*60,this._days=+o+7*r,this._months=+n+3*i+12*a,this._data={},this._locale=ft(),this._bubble()}function Lt(e){return e instanceof Mt}function kt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Pt(e,t){Y(e,0,0,function(){var e=this.utcOffset(),a="+";return e<0&&(e=-e,a="-"),a+A(~~(e/60),2)+t+A(~~e%60,2)})}Pt("Z",":"),Pt("ZZ",""),le("Z",re),le("ZZ",re),ce(["Z","ZZ"],function(e,t,a){a._useUTC=!0,a._tzm=At(re,e)});var Ot=/([\+\-]|\d\d)/gi;function At(e,t){var a=(t||"").match(e);if(null===a)return null;var i=((a[a.length-1]||[])+"").match(Ot)||["-",0,0],n=60*i[1]+$(i[2]);return 0===n?0:"+"===i[0]?n:-n}function Nt(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(w(e)||s(e)?e.valueOf():Tt(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),a.updateOffset(i,!1),i):Tt(e).local()}function Ht(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ut(){return!!this.isValid()&&this._isUTC&&0===this._offset}a.updateOffset=function(){};var Vt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Yt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function qt(e,t){var a,i,n,r=e,s=null;return Lt(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:o(e)?(r={},t?r[t]=e:r.milliseconds=e):(s=Vt.exec(e))?(a="-"===s[1]?-1:1,r={y:0,d:$(s[ge])*a,h:$(s[Fe])*a,m:$(s[we])*a,s:$(s[Se])*a,ms:$(kt(1e3*s[$e]))*a}):(s=Yt.exec(e))?(a="-"===s[1]?-1:(s[1],1),r={y:Xt(s[2],a),M:Xt(s[3],a),w:Xt(s[4],a),d:Xt(s[5],a),h:Xt(s[6],a),m:Xt(s[7],a),s:Xt(s[8],a)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(n=function(e,t){var a;return e.isValid()&&t.isValid()?(t=Nt(t,e),e.isBefore(t)?a=Gt(e,t):((a=Gt(t,e)).milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}(Tt(r.from),Tt(r.to)),(r={}).ms=n.milliseconds,r.M=n.months),i=new Mt(r),Lt(e)&&d(e,"_locale")&&(i._locale=e._locale),i}function Xt(e,t){var a=e&&parseFloat(e.replace(",","."));return(isNaN(a)?0:a)*t}function Gt(e,t){var a={milliseconds:0,months:0};return a.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(a.months,"M").isAfter(t)&&--a.months,a.milliseconds=+t-+e.clone().add(a.months,"M"),a}function Wt(e,t){return function(a,i){var n;return null===i||isNaN(+i)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=a,a=i,i=n),jt(this,qt(a="string"==typeof a?+a:a,i),e),this}}function jt(e,t,i,n){var r=t._milliseconds,o=kt(t._days),s=kt(t._months);e.isValid()&&(n=null==n||n,s&&Pe(e,Ce(e,"Month")+s*i),o&&Ie(e,"Date",Ce(e,"Date")+o*i),r&&e._d.setTime(e._d.valueOf()+r*i),n&&a.updateOffset(e,o||s))}qt.fn=Mt.prototype,qt.invalid=function(){return qt(NaN)};var zt=Wt(1,"add"),Bt=Wt(-1,"subtract");function Qt(e,t){var a=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(a,"months");return-(a+(t-i<0?(t-i)/(i-e.clone().add(a-1,"months")):(t-i)/(e.clone().add(a+1,"months")-i)))||0}function Jt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ft(e))&&(this._locale=t),this)}a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Zt=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Kt(){return this._locale}function ea(e,t){Y(0,[e,e.length],0,t)}function ta(e,t,a,i,n){var r;return null==e?qe(this,i,n).year:(t>(r=Xe(e,i,n))&&(t=r),function(e,t,a,i,n){var r=Ye(e,t,a,i,n),o=Ue(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}.call(this,e,t,a,i,n))}Y(0,["gg",2],0,function(){return this.weekYear()%100}),Y(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ea("gggg","weekYear"),ea("ggggg","weekYear"),ea("GGGG","isoWeekYear"),ea("GGGGG","isoWeekYear"),M("weekYear","gg"),M("isoWeekYear","GG"),O("weekYear",1),O("isoWeekYear",1),le("G",ie),le("g",ie),le("GG",Q,W),le("gg",Q,W),le("GGGG",ee,z),le("gggg",ee,z),le("GGGGG",te,B),le("ggggg",te,B),me(["gggg","ggggg","GGGG","GGGGG"],function(e,t,a,i){t[i.substr(0,2)]=$(e)}),me(["gg","GG"],function(e,t,i,n){t[n]=a.parseTwoDigitYear(e)}),Y("Q",0,"Qo","quarter"),M("quarter","Q"),O("quarter",7),le("Q",G),ce("Q",function(e,t){t[ve]=3*($(e)-1)}),Y("D",["DD",2],"Do","date"),M("date","D"),O("date",9),le("D",Q),le("DD",Q,W),le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ce(["D","DD"],ge),ce("Do",function(e,t){t[ge]=$(e.match(Q)[0])});var aa=be("Date",!0);Y("DDD",["DDDD",3],"DDDo","dayOfYear"),M("dayOfYear","DDD"),O("dayOfYear",4),le("DDD",K),le("DDDD",j),ce(["DDD","DDDD"],function(e,t,a){a._dayOfYear=$(e)}),Y("m",["mm",2],0,"minute"),M("minute","m"),O("minute",14),le("m",Q),le("mm",Q,W),ce(["m","mm"],we);var ia=be("Minutes",!1);Y("s",["ss",2],0,"second"),M("second","s"),O("second",15),le("s",Q),le("ss",Q,W),ce(["s","ss"],Se);var na,ra=be("Seconds",!1);for(Y("S",0,0,function(){return~~(this.millisecond()/100)}),Y(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Y(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Y(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Y(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Y(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Y(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),M("millisecond","ms"),O("millisecond",16),le("S",K,G),le("SS",K,W),le("SSS",K,j),na="SSSS";na.length<=9;na+="S")le(na,ae);function oa(e,t){t[$e]=$(1e3*("0."+e))}for(na="S";na.length<=9;na+="S")ce(na,oa);var sa=be("Milliseconds",!1);Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName");var la=F.prototype;function da(e){return e}la.add=zt,la.calendar=function(e,t){var i=e||Tt(),n=Nt(i,this).startOf("day"),r=a.calendarFormat(this,n)||"sameElse",o=t&&(b(t[r])?t[r].call(this,i):t[r]);return this.format(o||this.localeData().calendar(r,this,Tt(i)))},la.clone=function(){return new F(this)},la.diff=function(e,t,a){var i,n,r;if(!this.isValid())return NaN;if(!(i=Nt(e,this)).isValid())return NaN;switch(n=6e4*(i.utcOffset()-this.utcOffset()),t=L(t)){case"year":r=Qt(this,i)/12;break;case"month":r=Qt(this,i);break;case"quarter":r=Qt(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-n)/864e5;break;case"week":r=(this-i-n)/6048e5;break;default:r=this-i}return a?r:S(r)},la.endOf=function(e){return void 0===(e=L(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},la.format=function(e){e||(e=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var t=q(this,e);return this.localeData().postformat(t)},la.from=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||Tt(e).isValid())?qt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},la.fromNow=function(e){return this.from(Tt(),e)},la.to=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||Tt(e).isValid())?qt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},la.toNow=function(e){return this.to(Tt(),e)},la.get=function(e){return b(this[e=L(e)])?this[e]():this},la.invalidAt=function(){return c(this).overflow},la.isAfter=function(e,t){var a=w(e)?e:Tt(e);return!(!this.isValid()||!a.isValid())&&("millisecond"===(t=L(r(t)?"millisecond":t))?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(t).valueOf())},la.isBefore=function(e,t){var a=w(e)?e:Tt(e);return!(!this.isValid()||!a.isValid())&&("millisecond"===(t=L(r(t)?"millisecond":t))?this.valueOf()<a.valueOf():this.clone().endOf(t).valueOf()<a.valueOf())},la.isBetween=function(e,t,a,i){return("("===(i=i||"()")[0]?this.isAfter(e,a):!this.isBefore(e,a))&&(")"===i[1]?this.isBefore(t,a):!this.isAfter(t,a))},la.isSame=function(e,t){var a,i=w(e)?e:Tt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=L(t||"millisecond"))?this.valueOf()===i.valueOf():(a=i.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf()))},la.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},la.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},la.isValid=function(){return m(this)},la.lang=Zt,la.locale=Jt,la.localeData=Kt,la.max=Ct,la.min=bt,la.parsingFlags=function(){return f({},c(this))},la.set=function(e,t){if("object"==typeof e)for(var a=function(e){var t=[];for(var a in e)t.push({unit:a,priority:P[a]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=k(e)),i=0;i<a.length;i++)this[a[i].unit](e[a[i].unit]);else if(b(this[e=L(e)]))return this[e](t);return this},la.startOf=function(e){switch(e=L(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},la.subtract=Bt,la.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},la.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},la.toDate=function(){return new Date(this.valueOf())},la.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,a=t?this.clone().utc():this;return a.year()<0||a.year()>9999?q(a,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):b(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",q(a,"Z")):q(a,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},la.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var a="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=t+'[")]';return this.format(a+i+"-MM-DD[T]HH:mm:ss.SSS"+n)},la.toJSON=function(){return this.isValid()?this.toISOString():null},la.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},la.unix=function(){return Math.floor(this.valueOf()/1e3)},la.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},la.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},la.year=Te,la.isLeapYear=function(){return De(this.year())},la.weekYear=function(e){return ta.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},la.isoWeekYear=function(e){return ta.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},la.quarter=la.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},la.month=Oe,la.daysInMonth=function(){return xe(this.year(),this.month())},la.week=la.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},la.isoWeek=la.isoWeeks=function(e){var t=qe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},la.weeksInYear=function(){var e=this.localeData()._week;return Xe(this.year(),e.dow,e.doy)},la.isoWeeksInYear=function(){return Xe(this.year(),1,4)},la.date=aa,la.day=la.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},la.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},la.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},la.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},la.hour=la.hours=at,la.minute=la.minutes=ia,la.second=la.seconds=ra,la.millisecond=la.milliseconds=sa,la.utcOffset=function(e,t,i){var n,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=At(re,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&t&&(n=Ht(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!t||this._changeInProgress?jt(this,qt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Ht(this)},la.utc=function(e){return this.utcOffset(0,e)},la.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ht(this),"m")),this},la.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=At(ne,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},la.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},la.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},la.isLocal=function(){return!!this.isValid()&&!this._isUTC},la.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},la.isUtc=Ut,la.isUTC=Ut,la.zoneAbbr=function(){return this._isUTC?"UTC":""},la.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},la.dates=_("dates accessor is deprecated. Use date instead.",aa),la.months=_("months accessor is deprecated. Use month instead",Oe),la.years=_("years accessor is deprecated. Use year instead",Te),la.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),la.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),(e=Dt(e))._a){var t=e._isUTC?u(e._a):Tt(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var fa=I.prototype;function ua(e,t,a,i){var n=ft(),r=u().set(i,t);return n[a](r,e)}function ca(e,t,a){if(o(e)&&(t=e,e=void 0),e=e||"",null!=t)return ua(e,t,a,"month");var i,n=[];for(i=0;i<12;i++)n[i]=ua(e,i,a,"month");return n}function ma(e,t,a,i){"boolean"==typeof e?(o(t)&&(a=t,t=void 0),t=t||""):(a=t=e,e=!1,o(t)&&(a=t,t=void 0),t=t||"");var n,r=ft(),s=e?r._week.dow:0;if(null!=a)return ua(t,(a+s)%7,i,"day");var l=[];for(n=0;n<7;n++)l[n]=ua(t,(n+s)%7,i,"day");return l}fa.calendar=function(e,t,a){var i=this._calendar[e]||this._calendar.sameElse;return b(i)?i.call(t,a):i},fa.longDateFormat=function(e){var t=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];return t||!a?t:(this._longDateFormat[e]=a.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},fa.invalidDate=function(){return this._invalidDate},fa.ordinal=function(e){return this._ordinal.replace("%d",e)},fa.preparse=da,fa.postformat=da,fa.relativeTime=function(e,t,a,i){var n=this._relativeTime[a];return b(n)?n(e,t,a,i):n.replace(/%d/i,e)},fa.pastFuture=function(e,t){var a=this._relativeTime[e>0?"future":"past"];return b(a)?a(t):a.replace(/%s/i,t)},fa.set=function(e){var t,a;for(a in e)b(t=e[a])?this[a]=t:this["_"+a]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},fa.months=function(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Me).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone},fa.monthsShort=function(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Me.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},fa.monthsParse=function(e,t,a){var i,n,r;if(this._monthsParseExact)return function(e,t,a){var i,n,r,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=u([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return a?"MMM"===t?-1!==(n=Re.call(this._shortMonthsParse,o))?n:null:-1!==(n=Re.call(this._longMonthsParse,o))?n:null:"MMM"===t?-1!==(n=Re.call(this._shortMonthsParse,o))?n:-1!==(n=Re.call(this._longMonthsParse,o))?n:null:-1!==(n=Re.call(this._longMonthsParse,o))?n:-1!==(n=Re.call(this._shortMonthsParse,o))?n:null}.call(this,e,t,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(n=u([2e3,i]),a&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),a||this._monthsParse[i]||(r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),a&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(a&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!a&&this._monthsParse[i].test(e))return i}},fa.monthsRegex=function(e){return this._monthsParseExact?(d(this,"_monthsRegex")||He.call(this),e?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=Ne),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},fa.monthsShortRegex=function(e){return this._monthsParseExact?(d(this,"_monthsRegex")||He.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=Ae),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},fa.week=function(e){return qe(e,this._week.dow,this._week.doy).week},fa.firstDayOfYear=function(){return this._week.doy},fa.firstDayOfWeek=function(){return this._week.dow},fa.weekdays=function(e,t){return e?i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:i(this._weekdays)?this._weekdays:this._weekdays.standalone},fa.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},fa.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},fa.weekdaysParse=function(e,t,a){var i,n,r;if(this._weekdaysParseExact)return function(e,t,a){var i,n,r,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=u([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return a?"dddd"===t?-1!==(n=Re.call(this._weekdaysParse,o))?n:null:"ddd"===t?-1!==(n=Re.call(this._shortWeekdaysParse,o))?n:null:-1!==(n=Re.call(this._minWeekdaysParse,o))?n:null:"dddd"===t?-1!==(n=Re.call(this._weekdaysParse,o))?n:-1!==(n=Re.call(this._shortWeekdaysParse,o))?n:-1!==(n=Re.call(this._minWeekdaysParse,o))?n:null:"ddd"===t?-1!==(n=Re.call(this._shortWeekdaysParse,o))?n:-1!==(n=Re.call(this._weekdaysParse,o))?n:-1!==(n=Re.call(this._minWeekdaysParse,o))?n:null:-1!==(n=Re.call(this._minWeekdaysParse,o))?n:-1!==(n=Re.call(this._weekdaysParse,o))?n:-1!==(n=Re.call(this._shortWeekdaysParse,o))?n:null}.call(this,e,t,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(n=u([2e3,1]).day(i),a&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),a&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(a&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(a&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!a&&this._weekdaysParse[i].test(e))return i}},fa.weekdaysRegex=function(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=ze),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},fa.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Be),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},fa.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},fa.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},fa.meridiem=function(e,t,a){return e>11?a?"pm":"PM":a?"am":"AM"},lt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===$(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),a.lang=_("moment.lang is deprecated. Use moment.locale instead.",lt),a.langData=_("moment.langData is deprecated. Use moment.localeData instead.",ft);var pa=Math.abs;function ha(e,t,a,i){var n=qt(t,a);return e._milliseconds+=i*n._milliseconds,e._days+=i*n._days,e._months+=i*n._months,e._bubble()}function va(e){return e<0?Math.floor(e):Math.ceil(e)}function ga(e){return 4800*e/146097}function Fa(e){return 146097*e/4800}function wa(e){return function(){return this.as(e)}}var Sa=wa("ms"),$a=wa("s"),ya=wa("m"),Ea=wa("h"),_a=wa("d"),Da=wa("w"),Ra=wa("M"),Ta=wa("y");function ba(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ca=ba("milliseconds"),Ia=ba("seconds"),xa=ba("minutes"),Ma=ba("hours"),La=ba("days"),ka=ba("months"),Pa=ba("years"),Oa=Math.round,Aa={ss:44,s:45,m:45,h:22,d:26,M:11},Na=Math.abs;function Ha(e){return(e>0)-(e<0)||+e}function Ua(){if(!this.isValid())return this.localeData().invalidDate();var e,t,a=Na(this._milliseconds)/1e3,i=Na(this._days),n=Na(this._months);t=S((e=S(a/60))/60),a%=60,e%=60;var r=S(n/12),o=n%=12,s=i,l=t,d=e,f=a?a.toFixed(3).replace(/\.?0+$/,""):"",u=this.asSeconds();if(!u)return"P0D";var c=u<0?"-":"",m=Ha(this._months)!==Ha(u)?"-":"",p=Ha(this._days)!==Ha(u)?"-":"",h=Ha(this._milliseconds)!==Ha(u)?"-":"";return c+"P"+(r?m+r+"Y":"")+(o?m+o+"M":"")+(s?p+s+"D":"")+(l||d||f?"T":"")+(l?h+l+"H":"")+(d?h+d+"M":"")+(f?h+f+"S":"")}var Va=Mt.prototype;return Va.isValid=function(){return this._isValid},Va.abs=function(){var e=this._data;return this._milliseconds=pa(this._milliseconds),this._days=pa(this._days),this._months=pa(this._months),e.milliseconds=pa(e.milliseconds),e.seconds=pa(e.seconds),e.minutes=pa(e.minutes),e.hours=pa(e.hours),e.months=pa(e.months),e.years=pa(e.years),this},Va.add=function(e,t){return ha(this,e,t,1)},Va.subtract=function(e,t){return ha(this,e,t,-1)},Va.as=function(e){if(!this.isValid())return NaN;var t,a,i=this._milliseconds;if("month"===(e=L(e))||"year"===e)return t=this._days+i/864e5,a=this._months+ga(t),"month"===e?a:a/12;switch(t=this._days+Math.round(Fa(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Va.asMilliseconds=Sa,Va.asSeconds=$a,Va.asMinutes=ya,Va.asHours=Ea,Va.asDays=_a,Va.asWeeks=Da,Va.asMonths=Ra,Va.asYears=Ta,Va.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*$(this._months/12):NaN},Va._bubble=function(){var e,t,a,i,n,r=this._milliseconds,o=this._days,s=this._months,l=this._data;return r>=0&&o>=0&&s>=0||r<=0&&o<=0&&s<=0||(r+=864e5*va(Fa(s)+o),o=0,s=0),l.milliseconds=r%1e3,e=S(r/1e3),l.seconds=e%60,t=S(e/60),l.minutes=t%60,a=S(t/60),l.hours=a%24,s+=n=S(ga(o+=S(a/24))),o-=va(Fa(n)),i=S(s/12),s%=12,l.days=o,l.months=s,l.years=i,this},Va.clone=function(){return qt(this)},Va.get=function(e){return e=L(e),this.isValid()?this[e+"s"]():NaN},Va.milliseconds=Ca,Va.seconds=Ia,Va.minutes=xa,Va.hours=Ma,Va.days=La,Va.weeks=function(){return S(this.days()/7)},Va.months=ka,Va.years=Pa,Va.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),a=function(e,t,a){var i=qt(e).abs(),n=Oa(i.as("s")),r=Oa(i.as("m")),o=Oa(i.as("h")),s=Oa(i.as("d")),l=Oa(i.as("M")),d=Oa(i.as("y")),f=n<=Aa.ss&&["s",n]||n<Aa.s&&["ss",n]||r<=1&&["m"]||r<Aa.m&&["mm",r]||o<=1&&["h"]||o<Aa.h&&["hh",o]||s<=1&&["d"]||s<Aa.d&&["dd",s]||l<=1&&["M"]||l<Aa.M&&["MM",l]||d<=1&&["y"]||["yy",d];return f[2]=t,f[3]=+e>0,f[4]=a,function(e,t,a,i,n){return n.relativeTime(t||1,!!a,e,i)}.apply(null,f)}(this,!e,t);return e&&(a=t.pastFuture(+this,a)),t.postformat(a)},Va.toISOString=Ua,Va.toString=Ua,Va.toJSON=Ua,Va.locale=Jt,Va.localeData=Kt,Va.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ua),Va.lang=Zt,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),le("x",ie),le("X",/[+-]?\d+(\.\d{1,3})?/),ce("X",function(e,t,a){a._d=new Date(1e3*parseFloat(e,10))}),ce("x",function(e,t,a){a._d=new Date($(e))}),a.version="2.22.2",e=Tt,a.fn=la,a.min=function(){return It("isBefore",[].slice.call(arguments,0))},a.max=function(){return It("isAfter",[].slice.call(arguments,0))},a.now=function(){return Date.now?Date.now():+new Date},a.utc=u,a.unix=function(e){return Tt(1e3*e)},a.months=function(e,t){return ca(e,t,"months")},a.isDate=s,a.locale=lt,a.invalid=p,a.duration=qt,a.isMoment=w,a.weekdays=function(e,t,a){return ma(e,t,a,"weekdays")},a.parseZone=function(){return Tt.apply(null,arguments).parseZone()},a.localeData=ft,a.isDuration=Lt,a.monthsShort=function(e,t){return ca(e,t,"monthsShort")},a.weekdaysMin=function(e,t,a){return ma(e,t,a,"weekdaysMin")},a.defineLocale=dt,a.updateLocale=function(e,t){if(null!=t){var a,i,n=it;null!=(i=st(e))&&(n=i._config),(a=new I(t=C(n,t))).parentLocale=nt[e],nt[e]=a,lt(e)}else null!=nt[e]&&(null!=nt[e].parentLocale?nt[e]=nt[e].parentLocale:null!=nt[e]&&delete nt[e]);return nt[e]},a.locales=function(){return D(nt)},a.weekdaysShort=function(e,t,a){return ma(e,t,a,"weekdaysShort")},a.normalizeUnits=L,a.relativeTimeRounding=function(e){return void 0===e?Oa:"function"==typeof e&&(Oa=e,!0)},a.relativeTimeThreshold=function(e,t){return void 0!==Aa[e]&&(void 0===t?Aa[e]:(Aa[e]=t,"s"===e&&(Aa.ss=t-1),!0))},a.calendarFormat=function(e,t){var a=e.diff(t,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"},a.prototype=la,a.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},a}),console.log("[FORM]form_engine.js -- Starts"),function(e,t,a){"use strict";"function"==typeof define&&define.amd?define(["fs","window"],a):"object"==typeof module&&module.exports?module.exports=function(e,t){return a(e,t)}:a(e,t)}("undefined"!=typeof fs?fs:{},"undefined"!=typeof window?window:this,function(fs,window){"use strict";var jQuery=fs,$=fs;Main(fs);var fsQ=fs.Query,XDR_TIMEOUT_MILLISECONDS=6e4;fs.EH.setFormValid(!1);var hasGeneralError=!1,ff_SectionRepeatMinCount=1,ff_SectionRepeatMaxCount=100,jqXHRData,validUserLocals={en_CA:"dd/mm/yy",en_US:"mm/dd/yy",default:"mm/dd/yy"},formDateSubmission="MM/DD/YYYY",formTimeSubmission="hh:mm:ss A",formDateFormatForNativeSubmission="YYYY-MM-DD";window.fs_formLocalejQueryDate="mm/dd/yy",window.fs_formLocalejQueryTime="hh:mm:ss TT",window.fs_formLocaleDate="MM/DD/YYYY",window.fs_formLocaleTime="hh:mm:ss A",window.formLoggerActive=!0,window.ffDialogPositionOption={},window.ffErr_SignatureFullNameTyped="Please enter your first and last name in the provided field.",window.ffErr_SignatureInitialsTyped="Please enter your initials in the provided field.",window.ffErr_SignatureFullNameDrawn="Please sign your first and last name in the provided field.",window.ffErr_SignatureInitialsDrawn="Please sign your initials in the provided field.",window.ffErr_SignatureDateTyped="Please select today's date in the provided field.",window.ffErr_SignatureDateDrawn="Please sign today's date in the provided field.",window.ffErr_SignatureAcceptTerms="You must accept the provided terms before continuing.",window.ffErr_SignatureValidEmail="Please provide a valid email address.",window.ffErr_FormatValidDecimal="Please enter a valid decimal value.",window.ffErr_FormatValidNumber="Please enter a valid numeric value.",window.ffErr_FormatDecimalSize="Value is too large.",window.ffErr_FormatValidEmail="Please enter a valid email address.",window.ffErr_FormatValidPhone="Please enter a valid phone number.",window.ffErr_FormatValidUrl="Please enter a valid URL.",window.ffErr_InvalidDate="Please enter a valid date.",window.ffErr_InvalidDateTime="Please enter a valid date time.";var maxFileSize=5e6;window.ffErr_FileUploadSize="Maximum file size is [[FileSize]] MB",window.ffErr_FileUploadType="Only the following file types are allowed: ",window.fs_fileUpload_disableDragDropInHTMLDocument=!0,window.ffErr_CaptchaIncorrect="The text you have entered is incorrect. Please try again.",window.ff_AddAnotherSectionLink="+ add item",window.ff_RemoveSectionLink="- remove",window.ffPrompt_EnterSaveEmail="Please provide your email address below. You will receive an email with a link to allow you to retrieve your saved form at a later date.",window.ffPrompt_SaveEmailConfirm="Thank you! You will receive an email shortly with a link to your saved form.",window.ffPrompt_InvalidSavedForm="The saved form you are attempting to retrieve is invalid or has already been submitted.",window.ffPrompt_SavedFormDiscarded="Your saved form has been discarded.",window.ffPrompt_SFLChangesSaved="Your changes have been saved! To retrieve your saved form at any time, simply click on the link provided to you by email.",window.ffPrompt_PaymentInProcessWarning="Your payment is still being processed. Leaving the page now will cause your payment to not get processed. Are you sure you want to do this?",window.ffPaymentError_InvalidCountry="Please provide a valid country name",window.evaluateRulesIfPrefillEnabled=!1;var enumEndpoint={INDEX:"1",LOOKUP:"2",CHECK_CAPTCHA:"3",GENERATE_CAPTCHA:"4",SAVE_CONTENT:"5",SAVE_DRAFT:"6",DISCARD_DRAFT:"7",PAYMENT:"8",UPLOAD_FILE:"9",REMOVE_FILE:"10",LOG_EVENT:"11"};function isClassic(){return!isNativeCloud()}function isNativeCloud(){var e=!1;return"NativeLightning"!=fs.Utils.getFormstackFormType()&&"NativeRegular"!=fs.Utils.getFormstackFormType()||(e=!0),e}function isCommunityForm(){var e=!1;return"NativeLightning"!=fs.Utils.getFormstackFormType()&&"ClassicLightning"!=fs.Utils.getFormstackFormType()||(e=!0),e}function isLivePreviewMode(){return!!_SafeBoolean(window.FS_FormConfiguration.isCommunityPreviewMode,!1)}function getURLEndPoint(e){console.log("[getURLEndPoint] Starts...pEndpoint["+e+"]");var t=window.FormBASEURL;if(isNativeCloud()){if(isCommunityForm()&&(isLivePreviewMode()&&(t=window.FS_FormConfiguration.PreviewBuilderURL),e==enumEndpoint.GENERATE_CAPTCHA||e==enumEndpoint.CHECK_CAPTCHA))return t=window.FormBASEURLEngine+"EngineFrame/",e==enumEndpoint.GENERATE_CAPTCHA?t+="GenerateCaptcha":e==enumEndpoint.CHECK_CAPTCHA&&(t+="CheckCaptcha"),console.log("[vURL]......["+t+"]"),t;switch(t+="apex/"+GetFormNamespace("__"),e){case enumEndpoint.INDEX:t+="FormEnginePage";break;case enumEndpoint.LOOKUP:t+="EFDoLookup";break;case enumEndpoint.GENERATE_CAPTCHA:t+="EFGenerateCaptcha";break;case enumEndpoint.CHECK_CAPTCHA:t+="FFNCaptcha";break;case enumEndpoint.SAVE_CONTENT:t+="FFNSubmitEndpoint";break;case enumEndpoint.SAVE_DRAFT:t+="FFNSaveDraft";break;case enumEndpoint.DISCARD_DRAFT:t+="FFNDiscardDraft";break;case enumEndpoint.PAYMENT:t+="EFCheckPayment";break;case enumEndpoint.UPLOAD_FILE:t+="CheckPayment";break;case enumEndpoint.REMOVE_FILE:t+="EFRemoveFile";break;case enumEndpoint.LOG_EVENT:t+=""}}else switch(t+="EngineFrame/",e){case enumEndpoint.INDEX:t+="Index";break;case enumEndpoint.LOOKUP:t+="DoLookup";break;case enumEndpoint.GENERATE_CAPTCHA:t+="GenerateCaptcha";break;case enumEndpoint.CHECK_CAPTCHA:t+="CheckCaptcha";break;case enumEndpoint.SAVE_CONTENT:t+="SaveContent";break;case enumEndpoint.SAVE_DRAFT:t+="SaveDraft";break;case enumEndpoint.DISCARD_DRAFT:t+="DiscardDraft";break;case enumEndpoint.PAYMENT:t+="CheckPayment";break;case enumEndpoint.UPLOAD_FILE:t+="UploadFile";break;case enumEndpoint.REMOVE_FILE:t+="RemoveFile";break;case enumEndpoint.LOG_EVENT:t+="LogEvent"}return console.log("[vURL]......["+t+"]"),t}function ExecBeforeRender(){var e=!0;try{var t=window.FS_FormConfiguration.formIdentifier;"function"==typeof FF_OnBeforeRender?e=FF_OnBeforeRender():fs.Utils.isAPIMethodExist("FF_OnBeforeRender")&&(e=window.fscore["ID"+t].FF_OnBeforeRender())}catch(e){console.log(e)}return e}function ExecAfterRender(){try{var e=window.FS_FormConfiguration.formIdentifier;"function"==typeof FF_OnAfterRender?FF_OnAfterRender():fs.Utils.isAPIMethodExist("FF_OnAfterRender")&&window.fscore["ID"+e].FF_OnAfterRender()}catch(e){console.log(e)}}function ExecBeforeSave(){var e=!0;try{var t=window.FS_FormConfiguration.formIdentifier;"function"==typeof FF_OnBeforeSave?e=FF_OnBeforeSave():fs.Utils.isAPIMethodExist("FF_OnBeforeSave")&&(e=window.fscore["ID"+t].FF_OnBeforeSave())}catch(e){console.log(e)}return e}function ExecOnInitSave(){try{var e=window.FS_FormConfiguration.formIdentifier;"function"==typeof FF_OnInitSave?FF_OnInitSave():fs.Utils.isAPIMethodExist("FF_OnInitSave")&&window.fscore["ID"+e].FF_OnInitSave()}catch(e){console.log(e)}}function ExecAfterSave(){try{var e=window.FS_FormConfiguration.formIdentifier;"function"==typeof FF_OnAfterSave?FF_OnAfterSave():fs.Utils.isAPIMethodExist("FF_OnAfterSave")&&window.fscore["ID"+e].FF_OnAfterSave()}catch(e){console.log(e)}}function _UniqueArrayFromCSV(e){var t=[];if("undefined"!=e){var a;a=e.split(","),$.each(a,function(e,a){-1==$.inArray(a,t)&&t.push(a)})}return t}function BindPaymentRulesEvents(){if(!isNativeCloud()){var e=$("#paymentRulesMap").val();if(void 0!==e)try{var t=JSON.parse(e);fsQ.forEach(t,function(e){fsQ.forEach(e.Rules,function(e){switch(e.MethodName){case"UpdatePaymentAmount":var t=e.FieldIds[0].replace(/\./g,"\\.");UpdatePaymentAmountCall($("#"+t).val(),e.MethodParameters[1],e.AmountType);break;case"EvaluatePaymentAmount":EvaluatePaymentAmount(e.MethodParameters[0],e.MethodParameters[1],e.MethodParameters[2])}fsQ.forEach(e.FieldIds,function(t){var a=t.replace(/\./g,"\\.");void 0!==$("#"+a)&&$("#"+a).bind("change",function(t,a){switch(console.log("On Payment rule element change"),e.MethodName){case"UpdatePaymentAmount":UpdatePaymentAmountCall(this.value,e.MethodParameters[1],e.AmountType);break;case"EvaluatePaymentAmount":EvaluatePaymentAmount(e.MethodParameters[0],e.MethodParameters[1],e.MethodParameters[2])}})})})})}catch(e){console.log("Payment Rule binding error:"+e)}}}function BindRuleEvents(){var e=$("#ruleFieldsMap").val(),t=[];if(void 0!==e&&""!=e&&""!=e)try{var a=JSON.parse(e);for(var i in a){var n=i,r=[],o=_UniqueArrayFromCSV(a[i]);if($.each(o,function(e,a){if(void 0!==a&&a.indexOf("||")>0){var i=a.split("||");_SafeBoolean(i[1],!1)?(t.push(parseInt(i[0],10)),console.log("[EvaluateOnSubmitRule]:"+i[0])):(r.push(parseInt(i[0],10)),console.log("[EvaluateInline]:"+i[0]))}}),console.log(i+": "+a[i]),n=GetInitialFieldIdIfRepeated(n,n.replace(/\./g,"\\.")),r.length>0){var s=$("#"+n).attr("data-rules");void 0!==s&&""!==s?(s+=","+r.toString(),$("#"+n).attr("data-rules",_UniqueArrayFromCSV(s).toString())):$("#"+n).attr("data-rules",r.toString())}}$("[data-rules]").bind("change",function(){var e=$(this).attr("data-rules");console.log("INFO:onchange triggered."+e);var t=e.split(",").map(function(e){return parseInt(e,10)});console.log("[EvaluateInlineARR]:"+t),ExecEvaluateRules(t,this)}),null!=t&&t.length>0&&$("#submitRules").val(t.toString())}catch(e){console.log("ERROR:[BindRuleEvents]-"+e)}}function GetInitialFieldIdIfRepeated(e,t){if("undefined"!=e&&""!=e&&0==$("#dvFastForms").find("#"+t).length&&4==e.split(".").length){var a=e.split(".");if(4===a.length){var i=a[0]+"."+a[1]+"."+a[2]+"_1_."+a[3];i=i.replace(/\./g,"\\."),1==$("#dvFastForms").find("#"+i).length&&$("#dvFastForms").find("#"+i).parents(".ff-item-row").parent().hasClass("ff-sec-repeat-wrapper")&&(e=a[0]+"."+a[1]+"."+a[2]+"_1_."+a[3])}}return e.replace(/\./g,"\\.")}function getRepeatedFieldElem(e,t){if("undefined"!=e&&""!=e&&4==e.split(".").length&&t>0){var a=e.split("."),i=a[0]+"."+a[1]+"."+a[2]+"_"+t+"_."+a[3];i=i.replace(/\./g,"\\."),1==$("#dvFastForms").find("#"+i).length&&(e=a[0]+"."+a[1]+"."+a[2]+"_"+t+"_."+a[3])}return e=e.replace(/\./g,"\\."),$("#dvFastForms").find("#"+e)}function getAttributeNameIfExists(e,t,a){var i=a;return isNullOrEmpty($(e).attr(t))||(i=$(e).attr(t)),i}function isNullOrEmpty(e){return void 0===e||null===e||""==e}function ValidateForm(){isOlderBrowser()?$("#dvFastForms .ff-captcha").length>0?($("#ffOverlay").addClass("ff-overlay-image"),$("#dvFastForms form#form1").attr("action",getURLEndPoint(enumEndpoint.GENERATE_CAPTCHA)),$("#dvFastForms form#form1").trigger("submit")):(fs.EH.ResetFormValidation(),ValidateFields(!0),$("#dvFastForms .ff-payment-wrapper").length>0&&$("#dvFastForms .ff-creditcard").filter(function(){return this.value.length>0}).length>0?($("#dvFastForms form#form1").attr("action",getURLEndPoint(enumEndpoint.PAYMENT)),$("#dvFastForms form#form1").trigger("submit")):fs.EH.isFormValid()&&($("#ffOverlay").removeClass("ff-overlay-image"),ResetSaveDraft(),PostFormData())):(fs.EH.ResetFormValidation(),ValidateFields(!0),fs.EH.isFormValid()&&SendCaptchaToServer())}function ValidateFields_CheckingAutoPaymentFields(){fsQ.S(".ff-payment-wrapper").each(function(){try{var e=!1,t=fsQ.S(".ff-creditcard",this),a=fsQ.S(".ff-cvv",this),i=fsQ.S(".ff-mm",this),n=fsQ.S(".ff-yyyy",this);fs.Utils.isNullOrEmpty($(t).val())&&fs.Utils.isNullOrEmpty($(a).val())&&fs.Utils.isNullOrEmpty($(i).val())&&fs.Utils.isNullOrEmpty($(n).val())||(e=!0),0==e&&"true"==$(t).attr("data-isrequired")&&"true"!=$(t).attr("data-automatic-required")&&(e=!0),e?("false"==$(t).attr("data-isrequired")&&$(t).attr("data-automatic-required","true"),$(t).data("isrequired",!0),$(a).data("isrequired",!0),$(i).data("isrequired",!0),$(n).data("isrequired",!0)):($(t).data("isrequired",!1),$(a).data("isrequired",!1),$(i).data("isrequired",!1),$(n).data("isrequired",!1))}catch(e){console.log("Error unexpected! Method[ValidateFields_CheckingAutoPaymentFields] Ex["+e.message+"]")}})}function GetMaxValue(e){for(var t="1",a=0;a<e;a++)t+="0";return t}function isDataTypeExist(e,t){var a=$(e).attr("data-vatt");if(!fs.Utils.isNullOrEmpty(a)&&void 0!==t)if(t instanceof Array&&t.length>0){var i=0;for(i=0;i<t.length;i++){var n=t[i].toUpperCase();if(0==a.indexOf(n.toUpperCase()))return!0}}else if(0==a.indexOf(t.toUpperCase()))return!0;return!1}function IsValidEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function isPaymentField(e){return!(!$(e).hasClass("ff-creditcard")&&!$(e).hasClass("ff-cvv"))}function IsValidFormat(e){var t=$(e).attr("data-vatt");if(void 0===t)return!0;switch(t.split("(")[0].toUpperCase()){case"EMAIL":return!!IsValidEmail($(e).val())||(ShowValidationMessage(e,"EMAILFORMAT"),!1);case"INTEGER":return!!/^(\d+)$/.test($(e).val())||(ShowValidationMessage(e,"NUMERICFORMAT"),!1);case"CURRENCY":case"DOUBLE":case"PERCENT":if(/^-?(\d+|\d{1,3}(,\d{3})*)(\.\d+)?$/.test($(e).val())){var a=t.split("(")[1].split(",")[0],i=(t.split("(")[1].split(",")[1].replace(")",""),GetMaxValue(a));return!(parseFloat($(e).val())>=i)||(ShowValidationMessage(e,"DECIMALSIZE"),!1)}return ShowValidationMessage(e,"DECIMALFORMAT"),!1;case"PHONE":return!!/\+?[\d- )\(]{8,}/.test($(e).val())||(ShowValidationMessage(e,"PHONEFORMAT"),!1);case"URL":return!!/((http:\/\/)|(https:\/\/))?[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,63}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi.test($(e).val())||(ShowValidationMessage(e,"URLFORMAT"),!1);case"DATE":return isValidDate($(e));case"DATETIME":return isValidDateTime($(e));default:return!0}}function CompleteFormSubmission(e,t){ExecAfterSave();var a=!1;isNullOrEmpty($("#dvFastForms #txtObjId").val())&&isNullOrEmpty($("#dvFastForms #comPrefillObj").val())&&(a=!0),ResetFormData(a),$("#dvFastForms #btnsubmit").prop("disabled",!1),e?RedirectToUrl(e):t&&ShowConfirmationPopup(t)}function getRootUrlFromUrlWithPath(e){var t="";if(void 0!==e&&e.indexOf("/")>0){var a=e.split("/");a.length>=3&&(t=a[0]+"//"+a[2])}return t}function parseURLForXDR(e){return"http:"==window.location.protocol&&0===e.lastIndexOf("https:",0)&&(e=e.replace("https:","http:")),e}function successSubmission(e,t,a,i){if(e){if("true"==getNullSafeLowerCase($("#dvFastForms #draftSaved").val())&&ShowConfirmationPopup(ffPrompt_SFLChangesSaved),$("#dvFastForms #draftSaved").val("True"),$("#dvFastForms #btndiscard").show(),isNativeCloud()){var n=$($(i).clone().wrap("<p>").parent().html());if(void 0!==n&&""!=n)try{var r=$.parseJSON(n.find("#postResponse").html());null!=r&&r.IsValid&&$("#dvFastForms #txtSessionID").val(r.ResultText)}catch(e){console.log("Error while getting session:"+e)}}}else if(CompleteFormSubmission(t,a),isClassic()&&$(i).find("#newSessionUID").length>0&&void 0!==$("#txtSessionID")){var o=$(i).find("#newSessionUID").text();isNullOrEmpty(o)||$("#txtSessionID").val(o)}}function SetFormPDFHTML(){try{var e,t=fs.Utils.getFSFormConfigProperty("IsSourceLightning",!1);t&&$("#dvFastForms .ff-form-main input,#dvFastForms .ff-form-main select,#dvFastForms .ff-form-main textarea,#dvFastForms .main-docsign-wrapper").each(function(){var e=$(this).attr("id");void 0!==e&&!1!==e&&$(this).attr("data-id",$(this).attr("id"));var t=$(this).attr("name");void 0!==t&&!1!==t&&$(this).attr("data-name",$(this).attr("name"))});var a="";if($(".ff-form").length>0)e=$("<div/>").html($(".ff-form").html());else if(t){var i=$("#dvFastForms").parent().html();e=$("<div/>").html(i)}else e=$("<div/>").html($("#dvFastForms").html());$("#dvFastForms").parent().find(">link").length>0&&$("#dvFastForms").parent().find(">link").each(function(){a+='<link rel="stylesheet" type="text/css" href="'+$(this).attr("href")+'"></link>'}),t&&$(e).find(".ff-form-main input,.ff-form-main select,.ff-form-main textarea,.main-docsign-wrapper").each(function(){var e=$(this).attr("data-id");void 0!==e&&!1!==e&&$(this).attr("id",$(this).attr("data-id"));var t=$(this).attr("data-name");void 0!==t&&!1!==t&&$(this).attr("name",$(this).attr("data-name"))}),$(e).find("#jsFastForms").remove(),$(e).find("#ffOverlay").remove(),$(e).find(".ff-esignature-wrapper .ffsignature").remove(),$(e).find(".ff-esignature-wrapper .ffdate").remove(),$(e).find(".ff-esignature-wrapper .ff-sign-div").remove(),$(e).find(".ff-esignature-wrapper .typedSignName").addClass("typedSignNamePrintable"),$(e).find(".ff-esignature-wrapper .typedSignDate").addClass("typedSignDatePrintable"),$(e).find(".ff-payment-wrapper").each(function(){var e=$(this).find(".ff-creditcard"),t=$(this).find(".ff-cvv"),a=$(e).val(),i=$(t).val(),n=a.substring(a.Length-3,3),r=new String("*",a.Length-n.Length),o=new String("*",i.Length),s=r.concat(n);$(e).val(s),$(t).val(o)});var n=[],r={},o=0;$("#dvFastForms").find(".main-docsign-wrapper.ffs-drawn").each(function(){var t=$(this).find(".ff-signwrapper.ff-drawn .doc-sign-name").signaturePad(),a=new Image;r[o]=t.getSignatureImage(),n.push(r),a.src="ffSignatureImage"+o,$(e).find("#"+$(this).attr("id")+" .ff-signwrapper.ff-drawn .doc-sign-name .docsignWrapper").replaceWith(a),o++;t=$(this).find(".ff-signwrapper.ff-drawn .doc-sign-date").signaturePad(),a=new Image;r[o]=t.getSignatureImage(),n.push(r),a.src="ffSignatureImage"+o,$(e).find("#"+$(this).attr("id")+" .ff-signwrapper.ff-drawn .doc-sign-date .docsignWrapper").replaceWith(a),o++}),$("#dvFastForms").find(".main-docsign-wrapper.ffs-both").each(function(){var t=$(this).find(".ff-signwrapper.ff-drawn .doc-sign-name").signaturePad(),a=new Image;r[o]=t.getSignatureImage(),n.push(r),a.src="ffSignatureImage"+o,$(e).find("#"+$(this).attr("id")+" .ff-signwrapper.ff-drawn .doc-sign-name .docsignWrapper").replaceWith(a),o++;t=$(this).find(".ff-signwrapper.ff-drawn .doc-sign-date").signaturePad(),a=new Image;r[o]=t.getSignatureImage(),n.push(r),a.src="ffSignatureImage"+o,$(e).find("#"+$(this).attr("id")+" .ff-signwrapper.ff-drawn .doc-sign-date .docsignWrapper").replaceWith(a),o++}),$("#dvFastForms").find(".main-docsign-wrapper.ffs-full").each(function(){var t=$(this).find(".ff-signwrapper.ff-drawn .doc-sign-name").signaturePad(),a=new Image;r[o]=t.getSignatureImage(),n.push(r),a.src="ffSignatureImage"+o,$(e).find("#"+$(this).attr("id")+" .ff-signwrapper.ff-drawn .doc-sign-name .docsignWrapper").replaceWith(a),o++;t=$(this).find(".ff-signwrapper.ff-drawn .doc-sign-date").signaturePad(),a=new Image;r[o]=t.getSignatureImage(),n.push(r),a.src="ffSignatureImage"+o,$(e).find("#"+$(this).attr("id")+" .ff-signwrapper.ff-drawn .doc-sign-date .docsignWrapper").replaceWith(a),o++});var s={};$('.ff-item-row select.ff-multipicklist[data-flexcontrol=""]').each(function(){var e=fs(this).attr("id");s[e]=fs(this).val()}),$(e).find('.ff-item-row select.ff-multipicklist[data-flexcontrol=""]').each(function(){var e=$("<div/>",{class:"select2-container "+$(this).attr("class")});$(this).hide();var t,a=$(this).attr("id");void 0!==s[a]&&(t=s[a]);var i=$("<ul/>",{class:"select2-container-multi select2-choices"});$(this).find("option").each(function(e,a){var n=$("<li/>",{class:"select2-choices-item"});-1!==$.inArray($(a).text().trim(),t)&&n.addClass("item-selected"),n.html($(a).text()),i.append(n)}),$(e).append(i),$(this).parent().prepend(e)}),$(e).find(".ff-page-row").filter("[page-ishidden!=true],[data-page-ishidden!=true]").show(),$(e).find(".ff-page-bread-header").remove(),$(e).find(".ff-page-header-row").remove(),$(e).find("#btnprev").hide(),$(e).find("#btnnext").hide(),$(e).find("#btnsubmit").hide(),$(e).find("#formHtml").remove(),$(e).find("[class*='ff-ui-dialog']").remove(),$(e).find("script").remove(),$(e).find(".ff-general-text-label").parent().css("max-width","100%");var l=$("<div/>").text($(e).html()).html();$.each(n,function(e,t){l=l.replace(new RegExp("ffSignatureImage"+e,"gi"),encodeURIComponent(t[e]))}),l=(l=LZString.compressToEncodedURIComponent(a+l)).replace(/>[\n\t ]+</g,"><"),$("#dvFastForms #formHtml").val(l)}catch(e){console.log("ERROR []"+e)}}function isDateOrDateTimeField(e){var t=$(e).attr("data-vatt");return null!=t&&void 0!=t&&"undefined"!=t&&""!=t&&("DATE"==t.toUpperCase()||"DATETIME"==t.toUpperCase())}function isDateField(e){var t=$(e).attr("data-vatt");return null!=t&&void 0!=t&&"undefined"!=t&&""!=t&&"DATE"==t.toUpperCase()}function getFileUploadExtension(e){var t="";try{t=e.replace(/^.*\./,"")}catch(e){}return t}function createFormDataItem(e,t){var a={};return a[e]=t,a}function GetSaveDraftEmail(){var e=$("#ffLookupDialog");if(inIframe()&&fs.EH.isParentAccessible()){var t=prompt(fs.Utils.getSecureValueAsText(ffPrompt_EnterSaveEmail));null!=t&&""!=t&&(alert(ffPrompt_SaveEmailConfirm),$("#dvFastForms #draftEmail").val(t),PostFormData())}else{var a=$("#dvFastForms .ff-form-main").css("max-width").replace("px","");$(e).dialog({position:ffDialogPositionOption,height:300,width:a,modal:!0,id:"dvFastForms",dialogClass:"ff-form-main",show:{effect:"fade",duration:350},hide:{effect:"fade",duration:350},buttons:{OK:{click:function(){var e=$(this).find("#ffSaveDraftEmail").val();""!=e?($(this).dialog("close"),ShowConfirmationPopup(ffPrompt_SaveEmailConfirm),$("#dvFastForms #draftEmail").val(e),PostFormData()):ShowValidationMessage($(this).find("#ffSaveDraftEmail"),"REQUIRED")},text:"OK",class:"ff-btn-submit"},Cancel:{click:function(){$(this).dialog("close")},text:"Cancel",class:"ff-btn-submit"}}}).siblings(".ui-dialog-titlebar").remove(),$(e).html($('<div class="ff-item-row">   <div class="ff-col-1 ff-label-col">        <label data-vatt="STRING" class="ff-label">'+fs.Utils.getSecureValueAsText(ffPrompt_EnterSaveEmail)+'</label>   </div></div><div class="ff-item-row">   <div class="ff-col-1 ff-label-col">       <label data-vatt="STRING" for="ffSaveDraftEmail" class="ff-label" id="lblSaveDraftEmail">         E-mail Address:       </label>       <span class="requiredSpan ff-required-mark">*</span>   </div>   <div class="ff-col-2 ff-field-col">       <input type="textbox" id="ffSaveDraftEmail" name="ffSaveDraftEmail" data-vatt="STRING" class="ff-input-type ff-type-text" maxlength="50" value="" />   </div></div>')),$(".ff-ui-dialog-titlebar").hide(),$(".ff-ui-dialog").attr("id","dvFastForms")}}function GetFormNamespace(e){var t="";return void 0!==window.FS_FormConfiguration.FormNSPrefix?""!=window.FS_FormConfiguration.FormNSPrefix&&(t=window.FS_FormConfiguration.FormNSPrefix+e):t="VisualAntidote"+e,t}function DiscardFormData(){formLogger("[DiscardFormData]"),$.support.cors=!0;var e=$("#dvFastForms #txtSessionID").val();isNativeCloud()&&(e=encodeURIComponent(e));var t=getURLEndPoint(enumEndpoint.DISCARD_DRAFT)+"?sid="+e;if(window.XDomainRequest){formLogger("[DiscardFormData][XDomainRequest]");var a=new XDomainRequest;a.timeout=XDR_TIMEOUT_MILLISECONDS,a.onerror=function(){console.log("Error unexpected on XDR! Method[DiscardFormData].")},a.ontimeout=function(){console.log("Time out error on XDR! Method[DiscardFormData].")},a.onprogress=function(){},a.onload=function(){formLogger("[DiscardFormData][XDomainRequest][onload]"),ShowConfirmationPopup(ffPrompt_SavedFormDiscarded),$("#dvFastForms #draftSaved").val("False"),$("#dvFastForms #isDraft").val("False"),$("#dvFastForms #btndiscard").hide(),ResetFormData(!0)},a.open("POST",parseURLForXDR(t)),a.send()}else if("ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa){console.log("[DiscardFormData][IE11-SF][XMLHttpRequest]");var i=null;Sarissa&&Sarissa.originalXMLHttpRequest?i=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(i=new XMLHttpRequest),i.open("POST",t,!0),i.onreadystatechange=function(){4==i.readyState&&200==i.status?(formLogger("[DiscardFormData][IE11-SF][XMLHttpRequest][result]"),ShowConfirmationPopup(ffPrompt_SavedFormDiscarded),$("#dvFastForms #draftSaved").val("False"),$("#dvFastForms #isDraft").val("False"),$("#dvFastForms #btndiscard").hide()):4==i.readyState&&200!=i.status&&console.log(" Service call status:"+i.status)},i.send()}else $.ajax({global:!1,type:"POST",crossDomain:!0,url:t,processData:!1,success:function(e){ShowConfirmationPopup(ffPrompt_SavedFormDiscarded),$("#dvFastForms #draftSaved").val("False"),$("#dvFastForms #isDraft").val("False"),$("#dvFastForms #btndiscard").hide()},error:function(e,t,a){ShowConfirmationPopup(ffPrompt_SavedFormDiscarded),$("#dvFastForms #draftSaved").val("False"),$("#dvFastForms #isDraft").val("False"),$("#dvFastForms #btndiscard").hide()}})}function ShowConfirmationPopup(e){try{var t=$("#dialog");inIframe()&&fs.EH.isParentAccessible()&&(t=parent.$("#dialog")),$(t).dialog({position:{my:"center",at:"center",of:"#dvBannerHTML"},autoResize:!0,modal:!0,id:"dvFastForms",dialogClass:"ff-form-main",show:{effect:"fade",duration:350},hide:{effect:"fade",duration:350},buttons:{OK:{click:function(){$(this).dialog("close")},text:"OK",class:"ff-btn-submit"}}}).siblings(".ff-ui-dialog-titlebar").remove(),$(t).html(e),$(".ff-ui-dialog-titlebar").hide(),$(".ff-ui-dialog").attr("id","dvFastForms")}catch(t){alert(e)}}function ShowErrorPopup(e){try{var t=$("#dialog");inIframe()&&fs.EH.isParentAccessible()&&(t=parent.$("#dialog")),$(t).html(e),$(t).dialog({position:ffDialogPositionOption,title:"Error",show:{effect:"fade",duration:500},hide:{effect:"fade",duration:500},buttons:{OK:function(){$(this).dialog("close")}}})}catch(t){formLogger("[ShowErrorPopup] "+e),alert(e)}}function RenderCalendar(e){switch($(e).attr("data-vatt")){case"date":case"datetime":case"DATE":case"DATETIME":if(!$(e).prop("disabled")){void 0!==$(e).data("datepicker")&&$(e).datetimepicker("destroy"),$(e).removeClass("hasDatepicker");GetName($(e));"datetime"==$(e).attr("data-vatt").toLowerCase()?$(e).datetimepicker({addSliderAccess:!0,sliderAccessArgs:{touchonly:!1},changeMonth:!0,changeYear:!0,dateFormat:window.fs_formLocalejQueryDate,timeFormat:window.fs_formLocalejQueryTime,yearRange:"-100:+10",onSelect:function(){$(this).trigger("keyup"),$(this).blur()},beforeShow:function(){setTimeout(function(){fs.EH.InitializeIframe()},100)}}):$(e).datetimepicker({showTimepicker:!1,addSliderAccess:!0,sliderAccessArgs:{touchonly:!1},changeMonth:!0,changeYear:!0,dateFormat:window.fs_formLocalejQueryDate,yearRange:"-100:+10",onSelect:function(){$(this).trigger("keyup"),$(this).blur()},beforeShow:function(){setTimeout(function(){fs.EH.InitializeIframe()},100)}})}}}function _SafeBoolean(e,t){var a=t;try{"true"==e||"True"==e||1==e?a=!0:"false"!=e&&"False"!=e&&0!=e||(a=!1)}catch(e){}return a}function _SafeString(e,t){var a=t;try{void 0!==e&&""!==e&&(a=e)}catch(e){}return a}function InitializeJSCode(){if(!isClassic()&&void 0!==$("#jsCode").val()&&""!=$("#jsCode").val()){var e=document.createElement("script");e.setAttribute("id","FF_JSAPI");var t=safeJSCode($("#jsCode").val());"function"==typeof customSafeJSCode&&(t=customSafeJSCode(t)),-1==t.indexOf("fsDisableNoConflict=true")&&(t="if (!window.jQuery){ console.log('External jQuery not found. Loading FS4SF jQuery.'); try{ $ = fs; }catch(error){ console.log(error) }; try{ jQuery = fs; }catch(error){ console.log(error) }; } "+t),e.text=t,void 0!==t&&""!=t&&document.body.appendChild(e)}}function safeJSCode(e){return e=void 0!==e&&""!=e?(e=(e=(e=(e=(e=(e=e.replace(/&#39;/g,"'")).replace(/&quot;/g,'"')).replace(/&amp;/g,"&")).replace(/&gt;/g,">")).replace(/&lt;/g,"<")).replace(/&apos;/g,"'")).replace(/&#38;/g,"&"):""}function InitializeForm(){try{if(InitializeJSCode(),!ExecBeforeRender())return;"True"==$("#isHostedForm").val()&&$(document).prop("title",$("#dvFastForms #formName").val()),$(".ff-form-main").prepend('<div id="ffOverlay"></div>'),$("#dvLoading").hide(),$(document).ajaxStart(function(){$("#ffOverlay").addClass("ff-overlay-image")}).ajaxStop(function(){$("#ffOverlay").removeClass("ff-overlay-image")}),$(window).off("message"),$(window).on("message",function(e){HandlePostMessage(e)}),$("#userTimeZone").val((new Date).getTimezoneOffset());try{var e="",t=$("#userLocal").val();void 0!==t&&""!=t||(t="default"),void 0!==validUserLocals[t]&&""!==validUserLocals[t]&&(e=validUserLocals[t]),$("#dateFormat").val(e)}catch(e){}if($("#dvFastForms").show(),fs.Utils.addPolyfill(),BindPaymentRulesEvents(),ResetFormData(!1),$("#userTimeZone").val((new Date).getTimezoneOffset()),InitializeLookupFields(),InitializeRepeatableSections(),InitializePrefillOptions(),fs.EH.initializeCheckboxes(),InitializeStaticPrefillOptions(),InitializeInformationFromSavedDraft(),InitializeFileUpload(),InitializePayment(),InitializeSignature(),InitializeFooter(),fs.EH.InitializeLogo(),InitializePages(),$(fsQ.S("#dvFastForms .ff-page-bread-header")).remove(),fs.N.InitializeBreadcrumbs(),fs.N.SetBreadcrumbWidth(),BindRuleEvents(),ExecuteInitialJS(),fs.EH.InitializeIframe(),setTimeout(function(){fs.EH.InitializeIframe()},100),"true"==getNullSafeLowerCase($("#dvFastForms #saveForLaterEnabled").val())&&"true"==getNullSafeLowerCase($("#dvFastForms #draftSaved").val())){if(isNativeCloud()){var a=$("#fsListFileUploadedJSON").val();void 0!==a&&(a=$.parseJSON(a))}"undefined"!=typeof ffFileUploadJson&&ValidateFileUploads(ffFileUploadJson),void 0!==a&&fs.FileService.loadFileUploadedFieldOnPageLoad(a),ExecEvaluateRules()}isNullOrEmpty($("#txtUserContentId").val())||($(".ff-form-main .btnDiv").remove(),$(".ff-form-main").find(".ff-page-row").filter("[page-ishidden=true],[data-page-ishidden=true]").show(),$(".ff-form-main").find(".ff-page-bread").remove(),$(".ff-form-main").css("pointer-events","none"),ExecEvaluateRules(),$(".ff-form-main input, textarea, select").each(function(){$(this).data("sferr")&&ShowValidationMessage(this,"GENERAL",$(this).data("sferr"))})),"true"==getNullSafeLowerCase($("#dvFastForms #saveForLaterEnabled").val())&&"true"!=getNullSafeLowerCase($("#dvFastForms #isDraft").val())&&"true"==getNullSafeLowerCase($("#dvFastForms #draftSaved").val())&&setTimeout(function(){ShowConfirmationPopup(ffPrompt_InvalidSavedForm)},100),$(".ff-form-main input, textarea, select").each(function(){null!=$(this).val()&&$(this).val().length>0&&$(this).val(fs.EH.EvaluateCustomFormula($(this).val()))})}catch(e){throw console.trace("Log InitializeForm :"+e),Error("ERROR [InitializeForm]"+e)}}function getNullSafeLowerCase(e){return void 0!==e&&null!=e?e.toLowerCase():""}function getSafeBoolean(e,t){var a=t;try{void 0!==e&&(e+"".toLowerCase()=="true"?a=!0:e+"".toLowerCase()=="false"&&(a=!1))}catch(e){}return a}function InitializeFooter(){var e=fsQ.S("#dvFastForms");if(0==fsQ.find("#btnsubmit",e).length){var t=$('<div class="ff-footer-group"></div>'),a=$('<div class="ff-item-row ff-footer-row"></div>'),i=$('<div class="ff-submit-btn">'),n=$('<div class="footnoteDiv"></div>'),r=$('<span class="requiredSpan  ff-footnote ff-required-mark">*</span>'),o=$('<label class="ff-footnote-label ff-label">- required</label>'),s=$('<div class="btnDiv">'),l=$('<input type="button" class="sectionHeader ff-btn-submit" id="btnsubmit">');if($(l).attr("value",fsQ.S("#dvFastForms #submitBtnText").val()),$(l).attr("data-btnmessage",fsQ.S("#dvFastForms #submitMessage").val()),$(l).attr("data-btnurl",fsQ.S("#dvFastForms #submitUrl").val()),$(s).append(l),"true"==getNullSafeLowerCase(fsQ.S("#dvFastForms #saveForLaterEnabled").val())){var d=$('<input type="button" class="sectionHeader ff-btn-submit" id="btndiscard">');$(d).attr("value",fsQ.S("#dvFastForms #discardBtnText").val()),$(s).prepend(d),"true"!=fsQ.S("#dvFastForms #isDraft").val().toLowerCase()&&$(d).hide();var f=$('<input type="button" class="sectionHeader ff-btn-submit" id="btnsave">');$(f).attr("value",fsQ.S("#dvFastForms #saveBtnText").val()),$(s).prepend(f)}$(n).append(r),$(n).append(o),$(i).append(n),$(i).append(s),$(a).append(i),$(t).append(a),fsQ.S("#dvFastForms .ff-form-main").append(t),fs(fsQ.S("#btnsubmit")).bind("click",function(){console.log("INFO [SubmitData]"),SubmitData(!1)}),"true"==fsQ.S("#dvFastForms #saveForLaterEnabled").val().toLowerCase()&&(fs(fsQ.S("#btnsave")).bind("click",function(){SubmitData(!0)}),fs(fsQ.S("#btndiscard")).bind("click",function(){DiscardDraft()}))}}function AddLegacyAttributesToPageRootElements(){var e=fsQ.S("#dvFastForms");$(fsQ.find(".ff-page-row",e)).each(function(e,t){console.log("ELEMENT FF :"+$(t)),void 0===$(t).attr("page-ishidden")&&void 0===$(t).attr("data-page-ishidden")&&(console.log("elem:"+$(t).attr("id")),$(t).attr("data-page-ishidden",!1))})}function InitializePages(){var e=fsQ.S("#dvFastForms");if(fs.N.isMultiPageEnabled(e)){AddLegacyAttributesToPageRootElements();var t=fs.N.allFormPagesWithLegacyCheck(null,!0,!1);$(t).filter(":not(:first)").hide(),$(fsQ.find(".ff-page-row",e)).filter("[page-ishidden=true],[data-page-ishidden=true]").hide();var a=$('<input type="button" class="sectionHeader ff-btn-submit ff-btn-prev" id="btnprev">'),i=$('<input type="button" class="sectionHeader ff-btn-submit ff-btn-next" id="btnnext">');$(a).val($(fsQ.find("#prevBtnText",e)).val()),$(i).val($(fsQ.find("#nextBtnText",e)).val());var n=fsQ.find(".btnDiv",e);$(n).append(a),$(n).append(i);var r=fsQ.find("#btnprev",e),o=fsQ.find("#btnnext",e);$(r).hide(),$(o).hide(),$(r).bind("click",function(){console.log("INFO [FFPrevPage]"),fs.N.FFPrevPage()}),$(o).bind("click",function(){console.log("INFO [FFNextPage]"),fs.N.FFNextPage()}),$(t).length>1&&($(fsQ.find("#btnsubmit",e)).hide(),$(o).show())}else fsQ.S("#dvFastForms .ff-page-bread-header").remove(),fsQ.S("#dvFastForms .ff-page-header-row").remove()}function InitializePayment(){isNativeCloud()||0==document.getElementsByClassName("ff-payment-wrapper").length||("https:"==document.location.protocol||$("#dvFastForms .ff-payment-wrapper").hasClass("ff-test-mode")?($("#dvFastForms .ff-yyyy").each(function(){for(var e=(new Date).getFullYear(),t=0;t<15;t++)$(this).append($("<option>",{value:e+t}).text(e+t))}),$("#dvFastForms .ff-mm").each(function(){for(var e=1;e<=12;e++)e<10?$(this).append($("<option>",{value:"0"+e}).text("0"+e)):$(this).append($("<option>",{value:e}).text(e))}),$("#dvFastForms .ff-creditcard").blur(function(){ShowCardType(this)}),$("#dvFastForms .ff-taxes").each(function(){var e=$(this).attr("id").replace("FFTaxes",""),t=ToAmount($("#FFAmount"+e).text()),a=ToAmount($(this).data("taxes"));$(this).text(ToAmount(t*(a/100)))}),UpdatePaymentTotals()):$("#dvFastForms .ff-payment-wrapper").remove())}function ShowCardType(e){var t="";$(e).parent().find(".imgCardType").remove();var a=new RegExp("^4");null!=$(e).val().match(a)&&(t="visa"),a=new RegExp("^5[1-5]"),null!=$(e).val().match(a)&&(t="mastercard"),a=new RegExp("^3[47]"),null!=$(e).val().match(a)&&(t="amex"),a=new RegExp("^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)"),null!=$(e).val().match(a)&&(t="discover"),a=new RegExp("^36"),null!=$(e).val().match(a)&&(t="diners"),a=new RegExp("^30[0-5]"),null!=$(e).val().match(a)&&(t="diners"),a=new RegExp("^35(2[89]|[3-8][0-9])"),null!=$(e).val().match(a)&&(t="jcb"),a=new RegExp("^(4026|417500|4508|4844|491(3|7))"),null!=$(e).val().match(a)&&(t="visaelectron"),""!=t&&$(e).after($("<img>",{src:window.FormBASEURL+"Styles/images/"+t+".png"}).addClass("imgCardType"))}function InitializeLookupFields(e){void 0===e?e=document.getElementsByClassName("lookup-link"):void 0===e.length&&(e=[e]);for(var t=0;t<e.length;t++)"readonly"!==$(e[t].parentElement).find("input[type=hidden]")[0].getAttribute("readonly")?($(e[t]).removeAttr("onclick"),ResetLookupFieldEvent(e[t])):e[t].classList.add("ll-readonly")}function ResetLookupFieldEvent(e){$(e).bind("click",function(){openLookupPopup(this)})}function InitializeRepeatableSections(){window.DataMatrixArrayMap=$.FFMatrixHelper.getUniqueDataMatrixArrayMap();var e=$(fsQ.S("#dvFastForms .ff-sec-repeat-wrapper")).parent();0!==e.length&&fsQ.forEach(e,function(e){var t=$(fsQ.find(".ff-sec-repeat-wrapper",e));$(t).each(function(e,t){var a=!0;"true"==$("#dvFastForms #isDraft").val().toLowerCase()&&isClassic()&&(a=!1),SetRepeatableSectionIDs(t,e+1,a),ResetRepeatedSectionItem(t,!0)});var a=safeInt($(e).data("min"),ff_SectionRepeatMinCount),i=1;$(e).find(".ff-sec-repeat-wrapper").length>1&&(i=$(e).find(".ff-sec-repeat-wrapper").length);for(var n=i;n<a;n++)AddToRepeatableSection($(e).find(".ff-sec-repeat-wrapper").last().find("a.ff-add"));$(e).find(".ff-sec-repeat-wrapper").length===a&&$(e).find(".ff-sec-repeat-wrapper").last().find("a.ff-remove,.link-divider").hide()})}function SetRepeatableSectionIDs(e,t,a){if(console.log("resetting repeated section ids"),!0===a){if(isNullOrEmpty($(this).attr("data-rid"))){var i=$(fsQ.find('.ff-item-row .ff-col-2>input,.ff-item-row  .ff-col-2>textarea,.ff-item-row  .ff-col-2>select,.ff-item-row  .ff-col-2>.lookup-link,.ff-item-row div[data-vatt="CAPTCHA"]',e));fsQ.forEach(i,function(e){var a=$(e).attr("id"),i=$(e).parent().parent().find("label[for='"+a+"']"),n=a,r=a.split(".");4==r.length?(r[2]=r[2][0]+"_"+t+"_",n=r.join(".")):1==r.length&&(n=(r=a.split("__"))[0]+"__"+t),$(e).attr("id",n),$(e).attr("name",n),$(i).attr("for",n),$(i).attr("id",$(i).attr("id")+"_"+t)}),console.log("[SetRepeatableSectionIDs] resetting repeated section ids")}$(e).find(".ff-esignature-wrapper").length>=1&&$(e).find(".ff-esignature-wrapper").each(function(e,a){assignSignatureElementIds(a,t),InitializeSignatureElement(a)})}var n=$(e).parent(),r=ff_AddAnotherSectionLink,o=ff_RemoveSectionLink;isNullOrEmpty($(n).attr("data-addlink"))||(r=$(n).attr("data-addlink")),isNullOrEmpty($(n).attr("data-removelink"))||(o=$(n).attr("data-removelink")),$(e).find(".rsec-footer-row").remove(),$(e).append(getRepeatableSectionFooterHTML(r,o)),resetAddRemoveLinksForRepeatedSections(e,!1)}function resetAddRemoveLinksForRepeatedSections(e,t){var a=$(e);t||(a=$(e).parent());var i=safeInt($(a).data("max"),ff_SectionRepeatMaxCount),n=safeInt($(a).data("min"),1),r=$(a).find(".ff-sec-repeat-wrapper").length;$(a).find(".ff-sec-repeat-wrapper").find(".ff-add,.link-divider").hide(),$(a).find(".ff-sec-repeat-wrapper").length>1&&$(a).find(".ff-sec-repeat-wrapper").each(function(e,t){e>=n?$(t).find(".ff-remove").show():($(t).find(".ff-remove").hide(),$(t).find(".link-divider").hide())}),r<i&&($(a).find(".ff-sec-repeat-wrapper:last-child").find(".ff-add,.link-divider").removeAttr("style"),$(a).find(".ff-sec-repeat-wrapper:last-child").find(".ff-remove").is(":visible")||$(a).find(".ff-sec-repeat-wrapper:last-child").find(".link-divider").hide()),r<=n&&($(a).find(".ff-sec-repeat-wrapper").find(".ff-remove").hide(),$(a).find(".ff-sec-repeat-wrapper").find(".link-divider").hide())}function clearSignatureCanvas(e){if(void 0!==e)try{$(e).signaturePad().clearCanvas()}catch(e){}}function BindRepeatedSectionEvents(e){$(e).find(".lookup-link").each(function(){$(this).removeAttr("onclick"),$(this).unbind("click"),InitializeLookupFields(this)}),$(e).find("input[data-rules],select[data-rules]").each(function(){void 0===$(this).attr("change")&&($(this).unbind("change"),$(this).bind("change",function(){var e=$(this).attr("data-rules").split(",").map(function(e){return parseInt(e,10)});console.log("[EvaluateInlineARR]:"+e),ExecEvaluateRules(e,this)}))}),$(e).find(".ff-alink").each(function(e,t){$(this).removeAttr("onclick"),$(this).unbind("click"),$(t).hasClass("ff-remove")?$(this).bind("click",function(){RemoveFromRepeatableSection(this)}):$(this).bind("click",function(){AddToRepeatableSection(this)})})}function getRepeatableSectionFooterHTML(e,t){return'<div class="ff-item-row rsec-footer-row"><a class="ff-alink ff-remove" href="javascript:" title="'+t+'">'+t+'</a><span class="link-divider">/</span><a class="ff-alink ff-add" href="javascript:" title="'+e+'">'+e+"</a></div>"}function setSignatureElementIdWithIndx(e,t,a){if(!isNullOrEmpty($(e).attr("id"))){var i=$(e).attr("id").split("__")[0];i=i.replace(a,""),$(e).attr("id",a+i+"__"+t)}}function setSignatureElementNameWithIndx(e,t,a){if(!isNullOrEmpty($(e).attr("name"))){var i=$(e).attr("name").split("__")[0];i=i.replace(a,""),$(e).attr("name",a+i+"__"+t)}}function assignSignatureElementIds(e,t){setSignatureElementIdWithIndx($(e).find(".main-docsign-wrapper"),t,""),setSignatureElementIdWithIndx($(e).find(">input"),t,""),setSignatureElementIdWithIndx($(e).find(".main-docsign-wrapper .ff-chkagree input"),t,""),setSignatureElementIdWithIndx($(e).find(".main-docsign-wrapper .ff-email-verification .ff-col-2 .ff-type-text"),t,""),$(e).find(".ff-signwrapper").each(function(e,a){var i="signT";$(a).hasClass("ff-drawn")&&(i="signD"),setSignatureElementIdWithIndx($(a).find(".docsignWrapper .ffsignature"),t,i),setSignatureElementIdWithIndx($(a).find(".docsignWrapper .ffdate"),t,i),setSignatureElementIdWithIndx($(a).find(".docsignWrapper .outputSignedName"),t,i),setSignatureElementIdWithIndx($(a).find(".docsignWrapper .outputSignedDate"),t,i),setSignatureElementNameWithIndx($(a).find(".docsignWrapper .ffsignature"),t,i),setSignatureElementNameWithIndx($(a).find(".docsignWrapper .ffdate"),t,i),setSignatureElementNameWithIndx($(a).find(".docsignWrapper .outputSignedName"),t,i),setSignatureElementNameWithIndx($(a).find(".docsignWrapper .outputSignedDate"),t,i)})}function replaceLegacyAttributes(e){try{["vatt","page-ishidden"].forEach(function(t){$(e).find("input["+t+"],textarea["+t+"],select["+t+"],span["+t+"],div["+t+"]").each(function(e,a){var i=a.getAttribute(t);null!==i&&""!==i&&a.setAttribute("data-"+t,i)})});var t=$(e).find("a.lookup-link");t.each(function(){var e=$(this.parentElement).find("input[type=textbox]")[0];e.classList.add("lookup-link"),e.title="Lookup"});for(var a=0;a<t.length;a++)t[a].parentElement.removeChild(t[a])}catch(e){console.error("Error unexpected! Method[replaceLegacyAttributes] Ex[below]"),console.error(e)}}function makeDvFastFormsInnerHtml(e){var t=document.implementation.createHTMLDocument("Title");return t.body.innerHTML=e,replaceLegacyAttributes(t),t}function safeInt(e,t){return isNaN(parseInt(e))?t:parseInt(e)}function GetHTML(e){var t=null;if($("#submittedData").length&&(t=$("#submittedData").val()),$.support.cors=!0,window.XDomainRequest){var a=new XDomainRequest;a.timeout=XDR_TIMEOUT_MILLISECONDS,a.onerror=function(){console.log("Error unexpected on XDR! Method[GetHTML].")},a.ontimeout=function(){console.log("Time out error on XDR! Method[GetHTML].")},a.onprogress=function(){},a.onload=function(){if(isClassic())$("#dvFastForms").html(makeDvFastFormsInnerHtml(a.responseText).body.innerHTML);else{var e=$("<div/>").html(resultResponse);$(e).find('script:not([data-js="fastforms"])').length>0&&$(e).find('script:not([data-js="fastforms"])').remove(),replaceLegacyAttributes(e),$("#dvFastForms").html($(e).html())}InitializeForm(),InitializeCaptcha()},a.open("post",parseURLForXDR(e)),a.send(t)}else if("ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa){console.log("[GetHTML][IE11-SF][XMLHttpRequest]");var i=null;Sarissa&&Sarissa.originalXMLHttpRequest?i=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(i=new XMLHttpRequest),i.open("POST",e,!0),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status)if(i.responseText&&i.responseText.length>0){if(isClassic())$("#dvFastForms").html(makeDvFastFormsInnerHtml(i.responseText).body.innerHTML);else{formLogger("[GetHTML][IE11-SF][XMLHttpRequest][Result]");var e=$("<div/>").html(i.responseText);$(e).find('script:not([data-js="fastforms"])').length>0&&$(e).find('script:not([data-js="fastforms"])').remove(),replaceLegacyAttributes(e),$("#dvFastForms").html($(e).html())}InitializeForm(),InitializeCaptcha()}else console.log(" Service call exception"+i.responseText);else 4==i.readyState&&200!=i.status&&formLogger("[GetHTML][IE11-SF][XMLHttpRequest][Error]["+i.status+"]["+i.responseText+"]")},i.send(t)}else $.ajax({async:!0,global:!1,data:t,type:"POST",url:e,tryCount:0,retryLimit:3,context:document.body,success:function(e){var t=makeDvFastFormsInnerHtml(e);isClassic()||$(t).find('script:not([data-js="fastforms"])').length>0&&$(t).find('script:not([data-js="fastforms"])').remove(),$("#dvFastForms").html(t.body.innerHTML),fs.Utils.getFSFormConfigProperty("IsSourceLightning",!1)&&addInlineStyleFromHTML(t.body.innerHTML),InitializeForm(),InitializeCaptcha()},error:function(e,t,a){if("timeout"==t)return this.tryCount++,this.tryCount<=this.retryLimit?void $.ajax(this):void 0}})}function HandlePostMessage(e){var t=!1;if(isClassic()){var a=e.originalEvent.origin===window.FormBASEURL.replace("/FormEngine/",""),i="https://hooks.stripe.com"===e.originalEvent.origin;a&&"3DS-authentication-complete"===e.originalEvent.data||i&&"stripe-3ds-fallback"===e.originalEvent.data.type?(fs.SPH.on3DSCompleteStripe(),t=!1):a&&(t=!0)}else{var n=window.FormBASEURL+"endofurl";e.originalEvent.origin===n.replace("/endofurl","")||0===n.indexOf(e.originalEvent.origin+"/")?t=!0:isCommunityForm()&&(-1==e.originalEvent.origin.indexOf(".livepreview.salesforce")&&-1==e.originalEvent.origin.indexOf(".preview.salesforce")||(t=!0))}if(t){var r=e.originalEvent.data||e.originalEvent.message,o=$.parseJSON(r);switch(o.resultType){case"CheckCaptcha":fs.EH.setFormValid(!0),fs.EH.ResetFormValidation(),ValidateCaptcha(o.resultData),ValidateFields(!0),fs.EH.isFormValid()?$("#dvFastForms .ff-payment-wrapper").length>0&&$("#dvFastForms .ff-creditcard").filter(function(){return this.value.length>0}).length>0?($("#dvFastForms form#form1").attr("action",getURLEndPoint(enumEndpoint.PAYMENT)),$("#dvFastForms form#form1").trigger("submit")):($("#ffOverlay").removeClass("ff-overlay-image"),PostFormData()):$("#ffOverlay").removeClass("ff-overlay-image");break;case"CheckPayment":fs.EH.setFormValid(!0),ValidatePayment(o.resultData),fs.EH.isFormValid()?($("#ffOverlay").removeClass("ff-overlay-image"),PostFormData()):$("#ffOverlay").removeClass("ff-overlay-image");break;case"GenerateCaptcha":RenderCaptcha(o.resultData);break;case"FileUpload":ValidateFileUploads(o.resultData);break;case"Lookup":PopulateLookup(o)}}}function addInlineStyleFromHTML(e){try{var t=document.createElement("style");t.type="text/css";var a=(new DOMParser).parseFromString(e,"text/html"),i="";fs(a).find("style").length>0&&(i=fs(a).find("style").html(),t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),document.getElementById("dvBannerHTML").appendChild(t))}catch(e){console.log("FORM [addInlineStyleFromHTML]"),console.log(e)}}function DeleteSFFile(e){console.log("[DeleteSFFile] Starts...");var t=$(e).parent(),a=$(t).find(".file-item-data").attr("data-file-sid");$.support.cors=!0;var i=window.FormBASEURL+"services/apexrest/"+GetFormNamespace("/")+"FFNFileUpload/v1/processGetRequest?did="+a+"&accessToken="+encodeURIComponent($("#accessToken").val());if("http:"==window.location.protocol&&0===i.lastIndexOf("https:",0)&&(i=i.replace("https:","http:")),void 0!==a&&""!=a)if("ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa){formLogger("[UploadFile][IE11-SF][XMLHttpRequest]");var n=null;Sarissa&&Sarissa.originalXMLHttpRequest?n=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(n=new XMLHttpRequest),n.open("GET",i,!0),n.onreadystatechange=function(){formLogger("[UploadFile][IE11-SF][XMLHttpRequest][Result]"),4==n.readyState&&200==n.status?(fileLoadingSpinner(t,!1),RemoveFileItemCallback(e)):4==n.readyState&&200!=n.status&&(formLogger("[UploadFile][IE11-SF][Error]["+n.responseText+"]["+n.status+"]"),fileLoadingSpinner(t,!1),RemoveFileItemCallback(e))},n.setRequestHeader("Content-type","text/plain"),n.send()}else $.ajax({global:!1,type:"GET",crossDomain:!0,url:i,contentType:"text/plain",processData:!1,success:function(a){fileLoadingSpinner(t,!1),RemoveFileItemCallback(e)},error:function(a,i,n){console.log(" file deleted error: "+n),fileLoadingSpinner(t,!1),RemoveFileItemCallback(e)}});else console.log(" file id not found")}function UploadFile(e){for(var t,a=GenerateFileData($(e)),i="",n=0;n<a.length;n++){var r=a[n][0].split("||");i=r[0];var o="FILE"!=r[2];t={fnDoc:{FKey:a[n][0],FContent:a[n][1],elemId:r[0],type:r[1],isESign:o,name:r[3],isChatter:getSafeBoolean(r[4],!1),attachTo:r[5]}}}$.support.cors=!0;var s="";if(s=window.FormBASEURL+"services/apexrest/"+GetFormNamespace("/")+"FFNFileUpload/v1/processPOSTRequest?accessToken="+encodeURIComponent($("#accessToken").val()),"http:"==window.location.protocol&&0===s.lastIndexOf("https:",0)&&(s=s.replace("https:","http:")),"ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa){formLogger("[UploadFile][IE11-SF][XMLHttpRequest]");var l=null;Sarissa&&Sarissa.originalXMLHttpRequest?l=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(l=new XMLHttpRequest),l.open("POST",s,!0),l.onreadystatechange=function(){if(formLogger("[UploadFile][IE11-SF][XMLHttpRequest][Result]"),4==l.readyState&&200==l.status){if(""!=l.responseText)try{var t=$.parseJSON(l.responseText);null!=t&&t.IsValid?(console.log(" File Result:"+t.ResultText),$("#dvFastForms #"+i).find("label").attr("data-file-sid",t.ResultText)):console.log(" File Result Invalid:"+t.OtherText)}catch(e){console.log("Error while getting session:"+e)}fileLoadingSpinner(e,!1)}else 4==l.readyState&&200!=l.status&&(formLogger("[UploadFile][IE11-SF][Error]["+l.responseText+"]["+l.status+"]"),$("#dvFastForms #"+i).remove(),fileLoadingSpinner(e,!1))},l.setRequestHeader("Content-type","application/json"),l.send(JSON.stringify(t))}else $.ajax({global:!1,type:"POST",crossDomain:!0,url:s,data:JSON.stringify(t),contentType:"application/json",processData:!1,success:function(t){if(void 0!==t&&""!=t)try{var a=$.parseJSON(t);null!=a&&a.IsValid?(console.log(" File Result:"+a.ResultText),$("#dvFastForms #"+i).find("label").attr("data-file-sid",a.ResultText)):console.log(" File Result Invalid:"+a.OtherText)}catch(e){console.log("Error while getting session:"+e)}fileLoadingSpinner(e,!1)},error:function(t,a,n){console.log(" file upload error: "+n),$("#dvFastForms #"+i).remove(),fileLoadingSpinner(e,!1)}})}function GenerateFileData(e){var t=[],a=GetName(e),i=$(e).parent().attr("data-uploadtochatter"),n=$(e).parent().attr("data-attachto"),r=isNullOrEmpty(n)?"1":n,o=void 0!==i&&"true"==i;return $(e).parent().find(".file-item").each(function(e,i){var n=$(i).find("label");void 0===n||void 0!==$(n).attr("data-fileid")&&""!==$(n).attr("data-file-sid")||void 0===$(n).attr("data-file")||""==$(n).attr("data-file")||AddToArray(t,a+"_"+e+"||"+$(n).attr("data-fileext")+"||FILE||"+$(n).attr("data-filename")+"||"+o+"||"+r,$(n).attr("data-file"))}),t}function RemoveFile(e,t,a){$.support.cors=!0;var i="fileName="+fixedEncodeURIComponent(e)+"&sessionId="+t+"&fieldid="+a,n=!1,r=getURLEndPoint(enumEndpoint.REMOVE_FILE);if("http:"==window.location.protocol&&0===r.lastIndexOf("https:",0)&&(r=r.replace("https:","http:")),window.XDomainRequest){var o=new XDomainRequest;o.timeout=XDR_TIMEOUT_MILLISECONDS,o.onerror=function(){console.log("Error unexpected on XDR! Method[RemoveFile].")},o.ontimeout=function(){console.log("Time out error on XDR! Method[RemoveFile].")},o.onprogress=function(){},o.onload=function(){},o.open("POST",parseURLForXDR(r),!0),o.send(i)}else{if(!("ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa))return $.ajax({global:!1,type:"POST",url:r,crossDomain:!0,data:i,dataType:"text",processData:!1,tryCount:0,retryLimit:3,success:function(e){n=e},error:function(e,t,a){if("timeout"==t)return this.tryCount++,this.tryCount<=this.retryLimit?void $.ajax(this):void 0}}),n;console.log("[RemoveFile][IE11-SF][XMLHttpRequest]");var s=null;Sarissa&&Sarissa.originalXMLHttpRequest?s=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(s=new XMLHttpRequest),s.open("POST",r,!0),s.onreadystatechange=function(){4==s.readyState&&200==s.status?s.responseText&&s.responseText.length>0?n=s.responseText:console.log(" Service call exception"+s.responseText):4==s.readyState&&200!=s.status&&console.log(" Service call status:"+s.status)},s.send(i)}}function CheckFileUploadLimits(e){var t=$(e).data("maxfiles");$(e).find("[id$='_Label']").length>=t?$(e).find("[id$='_Select']").hide():$(e).find("[id$='_Select']").show()}function msieversion(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||e.indexOf("Trident")>0?1:0}function firstElementByTagName(e,t,a){var i,n=e.getElementsByTagName(t);try{n.length>0&&(i=a?getXMLElemInnerContent(n[0],""):n[0])}catch(e){i=a?"":void 0}return i}function getXMLElemInnerContent(e,t){return isSAFARI||isEDGE?e.textContent:isMicrosoftIE?e.text:(isCHROME,e.innerHTML)}function InitializeInformationFromSavedDraft(){if(!isClassic()){var e=$("#dvFastForms #txtSubmittedData").val();if(void 0!==e&&""!=e){var t=GetXmlElementInstance("<ffroot>"+e+"</ffroot>");loadFieldsFromXML(t),loadFileUploadFieldsFromXML(t)}}}function loadFieldsFromXML(e){var t=firstElementByTagName(e,"submittedXml",!1);if(!(void 0===t||t.childNodes.length<=0)){var a=t.childNodes[0].childNodes;$.each(a,function(e,t){var a=t.tagName;if(isIdASalesforceField(a)){var i=a.replace(/\./g,"\\."),n=getXMLElemInnerContent(t,"");isFieldIdInTheForm(i)?setFFHtmlFieldValue(a,n):fillLookupOrChildFields(a,n)}})}}function fillLookupOrChildFields(e,t){var a=e.split(".");if(4===a.length){if(a[2].length>=4&&a[2].split("_").length>=2){var i=(a[0]+"."+a[1]+"."+a[2].split("_")[0]+"_"+a[2].split("_")[1]+"_."+a[3]).replace(/\./g,"\\.");if(isFieldIdInTheForm(i))setFFHtmlFieldValue(i,t);else{var n=safeInt(a[2].split("_")[1],-1);if(n>1){var r=(a[0]+"."+a[1]+"."+a[2].split("_")[0]+"_"+(n-1)+"_."+a[3]).replace(/\./g,"\\.");if($("#dvFastForms").find("#"+r).length>0){AddToRepeatableSection($("#dvFastForms").find("#"+r).parents(".ff-sec-repeat-wrapper").find(".ff-add"),!0);var o=n,s=(a[0]+"."+a[1]+"."+a[2].split("_")[0]+"_"+o+"_."+a[3]).replace(/\./g,"\\.");$("#dvFastForms").find("#"+s).length>0&&setFFHtmlFieldValue(e,t)}}}}}else formLogger("Error unexpected! Method[fillLookupOrChildFields] Message[Seems we don't have a ID with only 3 dots]")}function isIdASalesforceField(e){return void 0!==e&&""!=e&&e.split(".").length>1}function isFieldIdInTheForm(e){return $("#dvFastForms").find("#"+e).length>0}function loadFileUploadFieldsFromXML(e){var t=firstElementByTagName(e,"documentInfoXml",!1);void 0!==t&&t.childNodes.length>0&&$.each(t.childNodes,function(e,t){var a=firstElementByTagName(t,"refId",!0),i=firstElementByTagName(t,"id",!0),n=firstElementByTagName(t,"ext",!0),r=firstElementByTagName(t,"refName",!0),o=a.split("_");2==o.length&&initializeFileUploadItems($("#dvFastForms #"+o[0]),n,r,i)})}function unescapeHTMLString(e){return void 0!==e&&null!=e?(e+="".replace(/&amp;/g,"&")).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#039;/g,"'").replace(/&#38;/g,"&").replace(/&#39;/g,"'"):""}function initializeFileUploadItems(e,t,a,i){console.log("[initializeFileUploadItems] Starts...");var n=$(e).parent(),r=$("<div/>",{class:"file-item"}),o=$("<span/>",{title:"Remove",class:"remove-fitem"});fileUploadItemHandle(o,e);var s=a;void 0!==t&&""!=t&&(s+="."+t);var l=$("<label/>",{html:s,class:"file-item-data","data-filename":a,"data-file-sid":i,"data-fileext":t,"data-fileuploaded":!0});r.append(o),r.append(l),$(n).prepend(r)}function InitializeStaticPrefillOptions(){if(!isClassic()){var e=$("#dvFastForms #staticPrefillParams").val();if(void 0!==e&&""!=e){var t=$.parseJSON(e);for(var a in t){setFFHtmlFieldValue(a,t[a])}}}}function ExecuteInitialJS(){ExecAfterRender(),evaluateRulesIfPrefillEnabled&&FFEvaluateRules()}function PopulatePrefillResultSet(){$("#comPrefillDataset").val(document.getElementById("prefillDataset").value)}function InitializePrefillOptions_Native(){var e={},t=[],a=!1,i="",n={},r=$("#prefillObj").val();try{if(void 0!==$("#relatedFieldsMapJSON").val()&&""!=$("#relatedFieldsMapJSON").val()&&(n=JSON.parse($("#relatedFieldsMapJSON").val()),void 0!==r&&""!=r))for(var o=$.parseJSON(r),s=0;s<o.length;s++){var l=o[s];if(void 0!==l&&null!==l&&"object"==typeof l&&l.IsValid&&void 0!==l.ResultText){var d=$.parseJSON(l.OtherText);if(void 0!==d&&null!==d&&"object"==typeof d&&void 0!==d.records&&null!==d.records&&d.records.length>0)if(a=!0,""==l.ResultText){i=d.records[0].attributes.type;var f=d.records[0];for(var u in f)e[u]=f[u]}else for(var c=0;c<d.records.length;c++){var m=d.records[c];for(var p in m){var h=l.ResultText.split("."),v=h[0]+"."+h[1]+"_"+(c+1)+"_.";if("object"!=typeof m[p]&&"attributes"!=p)e[v+=p]=m[p];else if("attributes"==p){var g=m.attributes.url.substring(1);e[v+="Id"]=g,t.push(v)}}}}}}catch(e){console.log("[InitializePrefillOptions] Exception:"+e),console.log(e)}if(a){for(var u in e)if("object"==typeof e[u]&&"attributes"!=u){var F=e[u],w="";for(var S in n)u==n[S]&&(w=S+".");for(var y in F){var E=F[y];F[w+y]=E}}for(var u in e)if("object"==typeof e[u]&&"attributes"!=u){F=e[u];for(var y in F)if("attributes"!=y){E=F[y];if(y.split(".").length>1)setFFHtmlFieldValue(_=i+"."+y,E)}}else if("attributes"==u);else{E=e[u];var _,D=(_=i+"."+u).split("."),R=_.replace(/\./g,"\\.");if($("#dvFastForms").find("#"+R).length>0){if(setFFHtmlFieldValue(R,E),4==D.length&&$.inArray(D[1]+"."+D[2]+".Id",t)>=0){var T=D[1]+"."+D[2]+".Id",b=parseFloat(D[2].split("_")[1]);A=(A=D[0]+"."+D[1]+"."+D[2].split("_")[0]+"_"+b+"_."+D[3]).replace(/\./g,"\\.");var C=$("#dvFastForms").find("#"+A).parents(".ff-sec-repeat-wrapper");$(C).attr("data-rid",D[0]+"."+T),$(C).attr("data-rval",e[T]),t=$.grep(t,function(e,t){return e!==u})}}else if(4==D.length&&"id"!=D[3].toLowerCase()){var I=safeInt(D[2].split("_")[1],-1);if(I>1){var x=(D[0]+"."+D[1]+"."+D[2].split("_")[0]+"_1_."+D[3]).replace(/\./g,"\\.");if($("#dvFastForms").find("#"+x).length>0){for(var M=$("#dvFastForms").find("#"+x).parents(".ff-sec-repeat-wrapper").parent().find("div.ff-sec-repeat-wrapper").length,L=I;L>M;L--)AddToRepeatableSection($("#dvFastForms").find("#"+x).parents(".ff-sec-repeat-wrapper").find(".ff-add"),!0);var k=I,P=D[0]+"."+D[1]+"."+D[2].split("_")[0]+"_"+k+"_."+D[3],O=P.replace(/\./g,"\\.");if($("#dvFastForms").find("#"+O).length>0&&(setFFHtmlFieldValue(O,E),4==(D=P.split(".")).length&&$.inArray(D[1]+"."+D[2]+".Id",t)>=0)){var A;b=parseFloat(D[2].split("_")[1]),T=D[1]+"."+D[2].split("_")[0]+"_"+b+"_.Id";A=(A=D[0]+"."+D[1]+"."+D[2].split("_")[0]+"_"+b+"_."+D[3]).replace(/\./g,"\\.");C=$("#dvFastForms").find("#"+A).parents(".ff-sec-repeat-wrapper");$(C).attr("data-rid",D[0]+"."+T),$(C).attr("data-rval",e[T]),t=$.grep(t,function(e,t){return e!==u})}}}}}}}function InitializePrefillOptions(){if(!isNativeCloud()||isCommunityForm()){PopulatePrefillResultSet(),fs(".ff-sec-repeat-wrapper").each(function(){console.log("ID-"+fs(this).attr("data-rid"))});var e=[],t=!1,a="",i=$("#comPrefillDataset").val();try{if(void 0!==i&&""!=i){evaluateRulesIfPrefillEnabled=!0;var n=$.parseJSON(i),r=$.parseJSON(n.OtherText),o=$.parseJSON(n.ResultText);for(var s in r)t=!0,"primary"==s.toLowerCase()&&(a=r[s]);var l=[];for(var s in o){console.log(o[s].objectName+" Object => "+o[s].jsonListResults);var d=o[s].jsonListResults;if(null!=d&&""!=d&&"[]"!=d){var f=$.parseJSON(d);if(o[s].objectName===a){var u=f[0].Id;l.push(getPrefillRecordMapItem(a,"primary","ids",[u])),e.push(getPrefillRecordMapItem(o[s].objectName,"lookup","records",f,a))}else if(o[s].objectName.indexOf(".")>0){var c=[];$.each(f,function(e,t){c.push(t.Id)}),l.push(getPrefillRecordMapItem(o[s].objectName,"child","ids",c,a)),e.push(getPrefillRecordMapItem(o[s].objectName,"lookup","records",f,a))}else l.push(getPrefillRecordMapItem(o[s].objectName,"lookup","ids",[f[0].Id])),e.push(getPrefillRecordMapItem(o[s].objectName,"lookup","records",f,a))}}document.getElementById("comPrefillObj").value=JSON.stringify(l)}}catch(e){console.log("[InitializePrefillOptions] Exception:"+e),console.log(e)}if(t){if(e.length>0){var m=$.grep(e,function(e){return e.isrepeated});m.length>0&&$.each(m,function(e,t){var i=t.identifier,n=t.records,r=n.length;$.each(n,function(e,t){var n=e+1,o=n+1,s=t.Id;console.log(" Repeated record id:"+s);var l=a+"."+i+"_"+n+"_.";l=l.replace(/\./g,"\\.");var d=a+"."+i+"_"+o+"_.";d=d.replace(/\./g,"\\."),n<r&&$("#dvFastForms").find('[id^="'+l+'"]').length>0&&0==$("#dvFastForms").find('[id^="'+d+'"]').length&&AddToRepeatableSection($($("#dvFastForms").find('[id^="'+l+'"]')[0]).parents(".ff-sec-repeat-wrapper").find(".ff-add"),!0)})}),$.each(e,function(e,t){var i=t.identifier,n=t.records,r=t.isrepeated;$.each(n,function(e,t){var n=e+1;if("object"==typeof t){if(console.log("[InitializePrefillOptions]  populate object : "+i),r){var o=a+"."+i+"_"+n+"_.",s=o.replace(/\./g,"\\."),l=$($("#dvFastForms").find('[id^="'+s+'"]')[0]).parents(".ff-sec-repeat-wrapper");$(l).attr("data-rid",o+"Id"),$(l).attr("data-rval",t.Id)}var d=t;for(var f in d)if("attributes"!=f){var u=d[f];if("object"!=typeof u){var c=i+"."+f;r&&(c=i+"_"+n+"_."+f),a!==i&&(c=a+"."+c),setFFHtmlFieldValue(c,u)}}}})})}}}else InitializePrefillOptions_Native()}function getPrefillRecordMapItem(e,t,a,i,n){var r={identifier:e,rtype:t};if(r[a]=i,r.isrepeated=!1,void 0!==n&&e.indexOf(".")>0){var o=n+"."+e+"_1_";o=o.replace(/\./g,"\\."),$("#dvFastForms").find('[id^="'+o+'"]').length>0&&(r.isrepeated=!0)}return r}function setFormattedDateOrDateTime(e){try{var t=$(e).attr("data-vatt").toString().toUpperCase(),a=$(e).val();if(""==a)return;if("DATE"!=t&&"DATETIME"!=t)return;var i="";console.log("[setFormattedDateOrDateTime] vDateType["+t+"] vDateValue["+a+"]"),"DATE"==t?i=moment(a,"YYYY-MM-DD").format(window.fs_formLocaleDate):"DATETIME"==t&&(i=moment(a,"YYYY-MM-DDThh:mm:ss Z").format(window.fs_formLocaleDate+" "+window.fs_formLocaleTime)),$(e).val(i)}catch(e){console.log("[setFormattedDateOrDateTime] Date time formatting error."+e.message)}}Object.freeze(enumEndpoint),window.FFSetValidationMessage=function(e,t){window[e]=t},window.FFCompare=fs.RE.FFCompare,window.FFEqualTo=fs.RE.FFEqualTo,window.FFLessThan=fs.RE.FFLessThan,window.FFLessThanOrEqualTo=fs.RE.FFLessThanOrEqualTo,window.FFGreaterThan=fs.RE.FFGreaterThan,window.FFGreaterThanOrEqualTo=fs.RE.FFGreaterThanOrEqualTo,window.FFStartsWith=fs.RE.FFStartsWith,window.FFEndsWith=fs.RE.FFEndsWith,window.FFContains=fs.RE.FFContains,window.FFHideField=fs.RE.FFHideField,window.FFShowField=fs.RE.FFShowField,window.FFMakeReadOnly=fs.RE.FFMakeReadOnly,window.FFMakeEditable=fs.RE.FFMakeEditable,window.FFMakeRequired=fs.RE.FFMakeRequired,window.FFMakeNotRequired=fs.RE.FFMakeNotRequired,window.FFHideSection=fs.RE.FFHideSection,window.FFShowSection=fs.RE.FFShowSection,window.FFShowPage=fs.RE.FFShowPage,window.FFHidePage=fs.RE.FFHidePage,window.FFPopulate=fs.RE.FFPopulate,window.FFPopulateLookup=fs.RE.FFPopulateLookup,window.FFSetPicklistValues=fs.RE.FFSetPicklistValues,window.ResetValidation=fs.EH.ResetFormValidation,window.InitializeIframe=fs.EH.InitializeIframe,window.ShowHideBreadcrumbNav=fs.N.ShowHideBreadcrumbNav,window.FFMoveBreadcrumbRight=fs.N.FFMoveBreadcrumbRight,window.FFMoveBreadcrumbLeft=fs.N.FFMoveBreadcrumbLeft,window.FFPrevPage=fs.N.FFPrevPage,window.FFNextPage=fs.N.FFNextPage,window.clearSignatures=fs.ES.clearSignatures,window.clearDrawnElements=fs.ES.clearDrawnElements,window.RebindPaymentRulesEvents=function(e){var t=$("#paymentRulesMap").val();if(void 0!==t)try{var a=JSON.parse(t);$.each(a,function(t,a){$.each(a.Rules,function(t,a){$.each(a.FieldIds,function(t,i){if(console.log("RebindPaymentRulesEvents "+e+" fieldId "+i),e===i){var n=i.replace(/\./g,"\\.");void 0!==$("#"+n)&&$("#"+n).bind("change",function(e,t){switch(console.log("On Payment rule element change"),a.MethodName){case"UpdatePaymentAmount":UpdatePaymentAmountCall(this.value,a.MethodParameters[1],a.AmountType);break;case"EvaluatePaymentAmount":EvaluatePaymentAmount(a.MethodParameters[0],a.MethodParameters[1],a.MethodParameters[2])}})}})})})}catch(e){console.log("Payment Rule binding error:"+e)}},window.ExecEvaluateRules=function(e,t){try{var a=window.FS_FormConfiguration.formIdentifier;"function"==typeof evaluateRules?void 0!==e?void 0!==t?evaluateRules(e,t):evaluateRules(e):evaluateRules():fs.Utils.isAPIMethodExist("evaluateRules")&&(void 0!==e&&void 0!==t?window.fscore["ID"+a].evaluateRules(e,t):window.fscore["ID"+a].evaluateRules())}catch(e){console.error("[FORM] [ExecEvaluateRules] Log Below:"),console.error(e)}},window.FFEvaluateRules=function(){var e=window.FS_FormConfiguration.formIdentifier;void 0!==parent.evaluateRules?$("#dvFastForms .ff-item-row input[data-rules],#dvFastForms .ff-item-row select[data-rules],#dvFastForms .ff-item-row textarea[data-rules]").each(function(e,t){var a=$(t).attr("data-rules").split(",").map(function(e){return parseInt(e,10)});parent.evaluateRules(a,t)}):fs.Utils.isAPIMethodExist("evaluateRules")&&$("#dvFastForms .ff-item-row input[data-rules],#dvFastForms .ff-item-row select[data-rules],#dvFastForms .ff-item-row textarea[data-rules]").each(function(t,a){var i=$(a).attr("data-rules").split(",").map(function(e){return parseInt(e,10)});window.fscore["ID"+e].evaluateRules(i,a)})},window.EvaluateCustomFormula=fs.EH.EvaluateCustomFormula,window.initFlexControl=fs.EH.initFlexControl,window.FFShowGeneralError=function(e){fs.EH.ResetFormValidation(),fs.EH.setFormValid(!0),ValidateFields(!0),hasGeneralError=!0,ShowValidationMessage($("#dvFastForms #btnsubmit"),"GENERAL",e),fs.EH.InitializeIframe()},window.FFToday=function(){var e=new Date,t=e.getFullYear(),a=(1+e.getMonth()).toString();a=a.length>1?a:"0"+a;var i=e.getDate().toString();return a+"/"+(i=i.length>1?i:"0"+i)+"/"+t},window.TDAY=function(){return FFToday()},window.FFIf=function FFIf(expr,valIfTrue,valIfFalse){var evaluated="undefined"==typeof eval?expr:eval(expr);return evaluated?valIfTrue:valIfFalse},window.InitializeSignature=function(){var e=$(fsQ.S("#dvFastForms .ff-esignature-wrapper"));if(0!==e.length){fsQ.forEach(e,function(e){InitializeSignatureElement(e)});var t=0;$('#dvFastForms input[name="ffdate"]').each(function(){$(this).attr("name","ffdate"+t),t++}),t=0,$('#dvFastForms input[name="ffsignature"]').each(function(){$(this).attr("name","ffsignature"+t),t++})}},window.InitializeSignatureElement=function(e){if(0!=document.getElementsByClassName("ffd-esignature-input").length){var t=getAttributeNameIfExists($(e).find(".ffd-esignature-input"),"data-signtype","full"),a=getAttributeNameIfExists($(e).find(".ffd-esignature-input"),"data-signoptions","typed"),i=getAttributeNameIfExists($(e).find(".ffd-esignature-input"),"data-signlabel","Full Name"),n=getAttributeNameIfExists($(e).find(".ffd-esignature-input"),"data-signdate","Date"),r=getAttributeNameIfExists($(e).find(".ffd-esignature-input"),"data-signdatehide","false"),o=getAttributeNameIfExists($(e).find(".ffd-esignature-input"),"data-signagreehide","true"),s=getAttributeNameIfExists($(e).find(".ffd-esignature-input"),"data-signagree","I agree to terms and services"),l=getAttributeNameIfExists($(e).find(".ffd-esignature-input"),"data-emaillabel","Email"),d=getAttributeNameIfExists($(e).find(".ffd-esignature-input"),"data-emailenabled","false");$(e).find(".outputSignedName").attr("data-isrequired",!0),$(e).find(".docsignWrapper .ffsignature.ff-input-type.ff-type-text").attr("data-isrequired",!0),1==d||"true"==d?($(e).find(".ff-email-verification > input").attr("data-isrequired",!0),$(e).find(".ff-email-verification").slideDown(),$(e).find(".ff-email-verification .ffsign-label>label").html(l),$(e).find(".ff-email-verification .ffsign-label").append('<span class="ff-required-mark">*</span>')):($(e).find(".ff-email-verification").slideUp(),$(e).find(".ff-email-verification").hide(),$(e).find(".ff-email-verification > input").attr("data-isrequired",!1));var f={name:".ffsignature",penColour:"#000",drawOnly:!1,lineWidth:2,typed:".typedSignName",output:".outputSignedName",drawIt:".ffdrawIt a",sig:"docsignWrapper",clear:".ffclearButton a",canvas:".signPadName",onBeforeValidate:"validateDocSign",errorMessage:"full"==t?ffErr_SignatureFullNameTyped:ffErr_SignatureInitialsTyped,errorMessageDraw:"full"==t?ffErr_SignatureFullNameDrawn:ffErr_SignatureInitialsDrawn,errorClass:"ff-col-1 ff-error ff-signature-error ff-invalid-msg",validateFields:!1},u={name:".ffdate",penColour:"#000",drawOnly:!1,lineWidth:2,typed:".typedSignDate",output:".outputSignedDate",drawIt:".ffdrawIt a",sig:"docsignWrapper",clear:".ffclearButton a",canvas:".signPadDate",onBeforeValidate:"validateDocSign",errorMessage:ffErr_SignatureDateTyped,errorMessageDraw:ffErr_SignatureDateDrawn,errorClass:"ff-col-1 ff-error ff-signature-error ff-invalid-msg",validateFields:!1};"initials"==t?($(e).find(".ff-signwrapper.ff-typed .doc-sign-name .ffsignature").attr("maxlength",6),$(e).find(".ff-signwrapper.ff-typed .doc-sign-name .docsignWrapper .signPadName").attr("width","120"),$(e).find(".ff-signwrapper.ff-drawn .doc-sign-name .docsignWrapper .signPadName").attr("width","120")):($(e).find(".ff-signwrapper.ff-typed .doc-sign-name .ffsignature").removeAttr("maxlength"),$(e).find(".ff-signwrapper.ff-typed .doc-sign-name .docsignWrapper .signPadName").attr("width","232"),$(e).find(".ff-signwrapper.ff-drawn .doc-sign-name .docsignWrapper .signPadName").attr("width","232"));var c=$(e).find(".ff-signwrapper.ff-typed .doc-sign-name input.ff-type-text").val(),m=$(e).find(".ff-signwrapper.ff-drawn .doc-sign-name .outputSignedName").val(),p=$(e).find(".ff-signwrapper.ff-drawn .doc-sign-date .outputSignedDate").val();$(e).find(".ff-signwrapper.ff-typed .doc-sign-name").signaturePad(f),$(e).find(".ff-signwrapper.ff-typed .doc-sign-date").signaturePad(u);f.drawOnly=!0,$(e).find(".ff-signwrapper.ff-drawn .doc-sign-name").signaturePad(f),u.drawOnly=!0,$(e).find(".ff-signwrapper.ff-drawn .doc-sign-date").signaturePad(u),isNullOrEmpty(m)||isNullOrEmpty(p)||($(e).find(".ff-signwrapper.ff-drawn .doc-sign-name .outputSignedName").val(m),$(e).find(".ff-signwrapper.ff-drawn .doc-sign-date .outputSignedDate").val(p),signInstanceDraw.regenerate(m),signInstanceDateDraw.regenerate(p)),$(e).find(".ff-chkagree > label").html(s),$(e).find(".ff-signwrapper").each(function(e,t){$(t).find(".doc-sign-name .ffsign-label>label").html(i),$(t).find(".doc-sign-date .ffsign-label>label").html(n),1==r||"true"==r?($(t).find(".doc-sign-date input").attr("data-isrequired",!1),$(t).find(".doc-sign-date").hide()):($(t).find(".doc-sign-date input").attr("data-isrequired",!0),$(t).find(".doc-sign-date").show())}),$(e).find(".main-docsign-wrapper").removeClass("ffs-typed"),$(e).find(".main-docsign-wrapper").removeClass("ffs-both"),$(e).find(".main-docsign-wrapper").removeClass("ffs-drawn"),$(e).find(".main-docsign-wrapper").addClass("ffs-"+a),$(e).find(".main-docsign-wrapper").removeClass("ffs-full"),$(e).find(".main-docsign-wrapper").removeClass("ffs-initials"),$(e).find(".main-docsign-wrapper").addClass("ffs-"+t),"drawn"==a?switchSignTab($(e).find(".main-docsign-wrapper").find("li.ffdrawIt>a")):switchSignTab($(e).find(".main-docsign-wrapper").find("li.fftypeIt>a")),""===c&&""!==m&&switchSignTab($(e).find(".main-docsign-wrapper").find("li.ffdrawIt>a")),1==o||"true"==o?($(e).find(".ff-chkagree > input").attr("data-isrequired",!1),$(e).find(".ff-chkagree").hide()):($(e).find(".ff-chkagree").show(),$(e).find(".ff-chkagree > input").attr("data-isrequired",!0)),$(e).find(".main-docsign-wrapper").find("li>a").each(function(e,t){$(t).removeAttr("onclick"),$(t).bind("click",function(){switchSignTab(this)})});var h=$(e).find(".main-docsign-wrapper").find(".ffclearButton>a");$(h).removeAttr("onclick"),$(h).bind("click",function(){fs.ES.clearSignatures($(this).parents(".main-docsign-wrapper"))}),ReRenderCalendar($(e).find(".main-docsign-wrapper .ffdate"))}},window.switchSignTab=function(e){$(e).parents(".main-docsign-wrapper").find(".ff-sign-ul li a").removeClass("current"),$(e).addClass("current"),$(e).parents(".main-docsign-wrapper").find(".ff-signwrapper").addClass("display-none"),"drawn"==$(e).attr("data-signed")?(LogEvent("TOGGLED_SIGNATURE_TAB","DRAWN"),$(e).parents(".main-docsign-wrapper").find(".ff-signwrapper.ff-drawn").removeClass("display-none"),$(e).parents(".main-docsign-wrapper").find(".ff-sign-div .ffclearButton").css("visibility","visible")):(LogEvent("TOGGLED_SIGNATURE_TAB","TYPED"),$(e).parents(".main-docsign-wrapper").find(".ff-signwrapper.ff-typed").removeClass("display-none"),$(e).parents(".main-docsign-wrapper").find(".ff-sign-div .ffclearButton").css("visibility","hidden"))},window.ValidateFields=function(e){if(ValidateFields_CheckingAutoPaymentFields(),fs.N.isPageTypeValidation()&&!e)var t=fsQ.S("#dvFastForms .ff-page-row").filter(":visible:first"),a=fsQ.find('input[type!="hidden"],textarea,select',t),i=$(t).find(".ff-fileupload-drop-area:visible");else a=fsQ.find('input[type!="hidden"],textarea,select',fsQ.S("#dvFastForms")),i=fsQ.S("#dvFastForms .ff-fileupload-drop-area");$(a).each(function(){var e=$(this).attr("data-vatt");if(void 0!==e&&e.split("(")[0].toUpperCase(),1==$(this).data("isrequired")&&"none"==$(this).parents(".ff-item-row").css("display"))return formLogger("[ValidateFields]["+$(this).attr("id")+"][Ignoring Validation because the field is hidden.]"),!0;if(void 0!=$(this).parents("div.ff-esignature-wrapper")[0])return formLogger("[ValidateFields]["+$(this).attr("id")+"][Ignoring Validation because it's wrapper]"),!0;switch($(this).prop("type")){case"text":case"textarea":if(1==$(this).data("isrequired")&&"REFERENCE"==e){var t=$(this).attr("id").replace("input","").replace(/\./g,"\\.");""==$("#"+t).val()&&(fs.EH.setFormValid(!1),ShowValidationMessage(this,"REQUIRED"))}else 1==$(this).data("isrequired")&&""==$(this).val()?(fs.EH.setFormValid(!1),ShowValidationMessage(this,"REQUIRED")):"-1"!=$(this).prop("maxlength")&&$(this).val().length>$(this).prop("maxlength")&&"DATE"!=e&&"DATETIME"!=e||fs.Patch.KI_1(this)?(fs.EH.setFormValid(!1),ShowValidationMessage(this,"LENGTH"),IsValidFormat(this)):""==$(this).val()||IsValidFormat(this)||fs.EH.setFormValid(!1);break;case"select-one":1==$(this).data("isrequired")&&(""!=$(this).find(":selected").val()&&null!=$(this).find(":selected").val()&&$(this).find(":selected").val()||(fs.EH.setFormValid(!1),"FFExpiryMM"==$(this).data("pp-name")||"FFExpiryYYYY"==$(this).data("pp-name")?ShowValidationMessage($(this),"PAYMENTEXPIRYREQUIRED"):ShowValidationMessage(this,"REQUIRED")));break;case"select-multiple":if(1==$(this).data("isrequired")){var a="";$(this).find(":selected").each(function(){""!=$(this).val()&&(a+=";"+$(this).val())}),0==a.length&&(fs.EH.setFormValid(!1),ShowValidationMessage(this,"REQUIRED"))}break;case"checkbox":1!=$(this).data("isrequired")||$(this).is(":checked")||(fs.EH.setFormValid(!1),ShowValidationMessage(this,"REQUIRED"))}}),$(i).each(function(){if(isNativeCloud()&&fs.FileService.isFileServiceOn(this)&&!fs.FileService.isNativeOptionSelected($(this))||isCommunityForm()&&!isNativeCloud())var e=$(this).find("[id$='_Label']").length;else if(isNativeCloud())e=$(this).find("div.file-item").length;if($(this).data("isrequired")&&"none"==$(this).parent().parent().css("display"))return!0;$(this).data("isrequired")&&0==e&&(fs.EH.setFormValid(!1),ShowValidationMessage(this,"REQUIRED"))});var n=ValidateSignatures();fs.EH.isFormValid()&&!n&&fs.EH.setFormValid(!1),fs.EH.isFormValid()||fs.N.ScrollToFirstError(),$("#txtSendSizeChange").click(),fs.EH.InitializeIframe()},window.ValidateSignatures=function(){var e=!0;if("page"==fsQ.S("#dvFastForms #pageValType").val())var t=fsQ.S("#dvFastForms .ff-page-row").filter(":visible:first"),a=$(t).find(".ff-esignature-wrapper");else a=fsQ.S("#dvFastForms .ff-esignature-wrapper");var i=0;return $(a).each(function(){try{if("true"==$(this).parent().parent().attr("page-ishidden")||"true"==$(this).parent().parent().attr("data-page-ishidden"))return!0;if("none"==$(this).parent().css("display"))return!0;if("none"==$(this).css("display"))return!0;var t=!0,a=!0,n=!0,r=!0,o=$(this).find(".ff-signwrapper:not(.display-none) .doc-sign-name"),s=$(this).find(".ff-signwrapper:not(.display-none) .doc-sign-name").find("input"),l=$(this).find(".ff-email-verification"),d=$(this).find(".ff-email-verification").find("input"),f=$(this).find(".ff-signwrapper:not(.display-none) .doc-sign-date"),u=$(this).find(".ff-signwrapper:not(.display-none) .doc-sign-date").find("input"),c=$(this).find(".ff-chkagree"),m=$(this).find(".ff-chkagree input");if(i++,"none"!=$(o).css("display")&&"true"==$(s).attr("data-isrequired")&&(t=$(o).signaturePad().validateForm()),"none"!=$(c).css("display")&&"true"==$(m).attr("data-isrequired")&&!(r=$(m).is(":checked"))){var p="reqdv"+$(m).attr("id");$(m).addClass("ff-input-type-invalid"),$(m).parent().append("<div class='ff-invalid-msg ff-col-1 ff-signature-error' id='"+p+"'>"+ffErr_SignatureAcceptTerms+"</div>")}if("none"!=$(l).css("display")&&"true"==$(d).attr("data-isrequired")){var h=$(l.find(".ff-type-text"));if(!(n=IsValidEmail($(h).val())||""!=$(h).val())){p="reqdv"+$(h).attr("id");$(h).addClass("ff-input-type-invalid"),$(h).parent().after("<div class='ff-invalid-msg ff-col-1 ff-signature-error' id='"+p+"'>"+ffErr_SignatureValidEmail+"</div>")}}"none"!=$(f).css("display")&&"true"==$(u).attr("data-isrequired")&&(a=$(f).signaturePad().validateForm()),formLogger("ValidateSignatures - Checking ["+i+"] isNameValid["+t+"]isDateValid["+a+"]areTermsAgreedTo["+r+"]isEmailValid["+n+"] "),t&&a&&r&&n||(e=!1)}catch(t){console.log("Error unexpected! Method[ValidateSignatures] Ex["+t.message+"]"),e=!1}}),e},window.ShowValidationMessage=function(e,t,a,i){GetName($(e));var n=$(e).attr("id"),r="",o=!1;switch(t){case"DECIMALFORMAT":r=ffErr_FormatValidDecimal;break;case"NUMERICFORMAT":r=ffErr_FormatValidNumber;break;case"DECIMALSIZE":r=ffErr_FormatDecimalSize;break;case"EMAILFORMAT":r=ffErr_FormatValidEmail;break;case"PHONEFORMAT":r=ffErr_FormatValidPhone;break;case"URLFORMAT":r=ffErr_FormatValidUrl;break;case"FILESIZECUSTOM":r=ffErr_FileUploadSize.replace("[[FileSize]]",a);break;case"FILESIZE":r=ffErr_FileUploadSize.replace("[[FileSize]]","2.5");break;case"FILEREQUIREDEXTENSION":r=window.ffErr_FileUploadExtensionRequired;break;case"FILETYPE":r=ffErr_FileUploadType+a;break;case"REQUIRED":""!=(r=$(e).data("requiredmessage"))&&r||(r="required");break;case"PAYMENTEXPIRYREQUIRED":""!=(r=$(e).data("requiredmessage"))&&r||(r="required"),o=!0;break;case"LENGTH":r=$(e).data("maxlengthmessage");break;case"CAPTCHA":r=ffErr_CaptchaIncorrect;break;case"DATE":r=window.ffErr_InvalidDate;break;case"DATETIME":r=window.ffErr_InvalidDateTime;break;case"GENERAL":case"PAYMENT":r=a}if(i)ShowErrorPopup(r);else if(o){n="reqdvFFExpiry";var s=$(e).parent().find('[data-pp-name="FFExpiryYYYY"]');0==$("#"+n).length&&$(s).after("<div class='ff-invalid-msg' id='"+n+"'>"+r+"</div>"),$(e).toggleClass("ff-input-type-invalid")}else{for(var l="reqdv"+n,d=0;$("#"+l).length>0;)l="reqdv"+n+d,d++;"PAYMENT"==t?$(e).before("<div class='ff-invalid-msg general-payment-err' id='"+l+"'>"+r+"</div>"):0==$(e).siblings().hasClass("matrix-control-container")?($(e).parent().append("<div class='ff-invalid-msg' id='"+l+"'>"+r+"</div>"),$(e).toggleClass("ff-input-type-invalid")):1==$(e).siblings().hasClass("matrix-control-container")&&($(e).siblings(".matrix-control-container").append("<div class='ff-invalid-msg' id='"+l+"'>"+r+"</div>"),$(e).toggleClass("ff-input-type-invalid"))}},window.ResetFormData=function e(t){console.log("[ResetFormData] Starts... clearAll["+t+"]");var a=fsQ.S("#dvFastForms"),i=$(fsQ.find("input,textarea,select",a));fsQ.forEach(i,function(a){var i=!1;switch("none"!=$(a).parent().parent().css("display")&&(i=!0),$(a).prop("type")){case"file":(t&&i||GetName($(a))==$(a).val())&&($(a).val(""),clearFileElements(a));break;case"text":case"textarea":RenderCalendar(a),(t&&i||GetName($(a))==$(a).val())&&$(a).val(""),fs.EH.initFlexControl(a,!1);break;case"reset":$(tcurrentItemhis).click(function(t){t.preventDefault(),e(!0)});break;case"radio":case"checkbox":t&&i&&($(a).prop("checked",!1),$(a).siblings(".radio-checkmark").hasClass("ff-ext-selected")&&$(a).siblings(".radio-checkmark").removeClass("ff-ext-selected"));break;case"select-one":t&&i&&$(a).prop("selectedIndex",0),fs.EH.initFlexControl(a,!1);break;case"select-multiple":t&&i&&$(a).prop("selectedIndex",-1),fs.EH.initFlexControl(a,!1)}}),isNativeCloud()?isCommunityForm()?$(fsQ.find("div[data-vatt=FILEUPLOAD]>div",a)).remove():$(fsQ.find("div[name=FileUploadLabel]",a)).remove():$(fsQ.find("div[data-vatt=FILEUPLOAD]>div",a)).remove(),$(fsQ.S("#dvFastForms .ff-type-file")).each(function(){$(this).replaceWith($(this).clone(!0))}),t&&(isNativeCloud()&&!isCommunityForm()&&$(fsQ.find("div[data-vatt='CAPTCHA']",a)).length>=1&&grecaptcha.reset(),fs.ES.clearSignatures(),$(fsQ.find("#formHtml",a)).val(""),ExecEvaluateRules())},window.openLookupPopup=function(e){LogEvent("OPENED_LOOKUP","");try{getEmbedCodeParams();var t=$("#dvFastForms .ff-form-main").css("max-width").replace("px",""),a=575,i=$("#ffLookupDialog"),n="";if(inIframe()&&fs.EH.isParentAccessible()){var r=window.parent;i=parent.document.getElementById("ffLookupDialog"),console.log(i),void 0!==i&&null!==i?(console.log("We found Dialog outside of iFrame"),n="embedcode-iframe-on",ffDialogPositionOption={my:"top right",at:"top right",of:r},t=r.innerWidth,a=r.innerHeight):(i=$("#ffLookupDialog"),t=window.innerWidth,a=window.innerHeight),a>575&&(a=575),t>500&&(t=500)}try{$(i).dialog({height:a,width:t,position:ffDialogPositionOption}),$(i).dialog("close"),$(i).dialog({height:a,width:t,position:ffDialogPositionOption,modal:!0,id:"dvFastForms",dialogClass:"ff-form-main",buttons:{Done:{click:function(){$(this).dialog("close")},text:"Done",class:"ff-btn-submit"}}})}catch(e){console.trace("Lookup Dialog error log trace:")}var o="",s="",l="";isCommunityForm()&&(""!=$("#dvFastForms #CommunityInstanceURL").val()&&(s=isNativeCloud()?"&iu="+fixedEncodeURIComponent($("#dvFastForms #CommunityInstanceURL").val()):"&iu="+$("#dvFastForms #CommunityInstanceURL").val()),""!=$("#dvFastForms #CommunityViewMode").val()?o="&cviewmode="+$("#dvFastForms #CommunityViewMode").val():""!=$("#dvFastForms #CommunitySessioID").val()&&(o=isNativeCloud()?"&cut="+fixedEncodeURIComponent($("#dvFastForms #CommunitySessioID").val()):"&cut="+$("#dvFastForms #CommunitySessioID").val()),isNativeCloud()&&isLivePreviewMode()&&null!=window.FS_FormConfiguration.PreviewBuilderURL&&(l="&cpreviewurl="+fixedEncodeURIComponent(window.FS_FormConfiguration.PreviewBuilderURL.slice(0,-1))));var d=$(e).parent().find("input[type=hidden]"),f=$(d).attr("data-lookup-value"),u=fs.Patch.LC_ShouldUseNewCode(d,"data-lookup-object")?$(d).attr("data-lookup-object"):$(d).attr("data-vaobj"),c=getURLEndPoint(enumEndpoint.LOOKUP);if(isNativeCloud())c+="?lo="+u+"&lf="+$(e).attr("id").replace("input","")+"&listid="+f+"&form="+$("#dvFastForms #formId").val();else if(c+="?lf="+$(e).attr("id").replace("input","")+"&htmlId="+$("#dvFastForms #txtHtmlId").val()+"&lo="+u+"&lv="+f,fs.Utils.getFSFormConfigProperty("IsSourceLightning",!1))c+="&sfEngineResourceRoot="+(getRootUrlFromUrlWithPath(fs.Utils.getFSFormConfigProperty("PreviewBuilderURL"))+CDNResourceRoot);$(i).html($("<iframe/>",{src:c+o+s+l+"&hasCustomCSS="+$("#dvFastForms #hasCustomCSS").val(),style:"width:100%; height:100%; border:none;",id:"ffLookupFrame",name:n})),$(".ff-ui-dialog-titlebar").hide(),$(".ff-ui-dialog").attr("id","dvFastForms")}catch(e){console.log("[FORM] Error unexpected! Method[openLookupPopup] Ex["+e+"]"),console.log(e)}return!1},window.closeLookupPopup=function(){return $("#dvFastForms #ffLookupDialog").dialog("close"),!1},window.PostFormData=function(){console.log("[PostFormData] Starts..."),ExecOnInitSave();var e,t=$("#dvFastForms #btnsubmit"),a=$(t).attr("data-btnurl"),i=$(t).attr("data-btnmessage"),n="true"==$("#dvFastForms #isDraft").val().toLowerCase();if(n)var r=getURLEndPoint(enumEndpoint.SAVE_DRAFT);else r=getURLEndPoint(enumEndpoint.SAVE_CONTENT);if($.support.cors=!0,!isNullOrEmpty($("#dvFastForms #txtUserContentId").val())||n||isNativeCloud()||SetFormPDFHTML(),window.XDomainRequest){console.log("[PostFormData] window.XDomainRequest - Starts..."),e=GenerateFormData(!0);var o=new XDomainRequest;o.timeout=XDR_TIMEOUT_MILLISECONDS,o.onerror=function(){console.log("Error unexpected on XDR! Method[PostFormData].")},o.ontimeout=function(){console.log("Time out error on XDR! Method[PostFormData].")},o.onprogress=function(){},o.onload=function(){var e=$("<div/>").html(o.responseText);successSubmission(n,a,i,e)},o.open("POST",parseURLForXDR(r)),o.send(e),$("#dvFastForms #btnsubmit").prop("disabled",!1)}else if("ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa){console.log("[PostFormData][IE11-SF][XMLHttpRequest]"),e=GenerateFormData(!1);var s=null;Sarissa&&Sarissa.originalXMLHttpRequest?s=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(s=new XMLHttpRequest),s.open("POST",r,!0),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var e=$("<div/>").html(s.responseText);successSubmission(n,a,i,e)}else 4==s.readyState&&200!=s.status&&console.log(" Service call exception"+s.responseText)},s.send(e)}else e=GenerateFormData(!1),$.ajax({global:!1,type:"POST",crossDomain:!0,url:r,data:e,contentType:!1,mimeType:"multipart/form-data",dataType:"text",processData:!1,success:function(e){var t=$("<div/>").html(e);successSubmission(n,a,i,t)},error:function(e,t,r){console.log(" data-posted error: "+r),n?("true"==getNullSafeLowerCase($("#dvFastForms #draftSaved").val())&&ShowConfirmationPopup(ffPrompt_SFLChangesSaved),$("#dvFastForms #draftSaved").val("True"),$("#dvFastForms #btndiscard").show()):CompleteFormSubmission(a,i)}})},window.GenerateFormData=function(e){console.log("[FS] [GenerateFormData] Starts... ");var t,a=new Date,i=[];try{if(AddToArray(i,"inputdate",a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()),$("#dvFastForms input,#dvFastForms textarea,#dvFastForms select").each(function(){var e=$(this).val(),t=!0;!isNullOrEmpty($(this).attr("readonly"))&&isNativeCloud()&&(t=!1);var a=!1;if($(this).parents(".main-docsign-wrapper").length>0&&isNativeCloud()&&(a=!0),t)switch($(this).prop("type")){case"text":case"textbox":a&&isNativeCloud()?$(this).parents(".ff-signwrapper").hasClass("ff-typed")&&AddToArray(i,$(this).attr("id"),fixedEncodeURIComponent(e)):(isDateOrDateTimeField(this)?e=getDateOrDateTimeToSubmit(this):isDataTypeExist(this,["CURRENCY","DOUBLE"])&&!isPaymentField(this)&&(e=fs.Utils.getSafeFloatValue(e)),AddToArray(i,GetName($(this)),fixedEncodeURIComponent(e)));break;case"radio":$(this).prop("checked")&&!$(this).hasClass("matrix-likert")&&AddToArray(i,GetName($(this)),fixedEncodeURIComponent(e));break;case"checkbox":AddToArray(i,GetName($(this)),$(this).prop("checked"));break;case"textarea":AddToArray(i,GetName($(this)),fixedEncodeURIComponent(e));break;case"select-one":var n="";void 0!==$(this).val()&&null!==$(this).val()&&(n=$(this).val()),AddToArray(i,GetName($(this)),fixedEncodeURIComponent(n));break;case"select-multiple":var r="";$(this).find(":selected").each(function(){r+=";"+fixedEncodeURIComponent($(this).val())}),r.length>1&&(r=r.substr(1,r.length-1)),AddToArray(i,GetName($(this)),r);break;case"hidden":isNativeCloud()&&a||AddToArray(i,GetName($(this)),e);break;case"submit":case"button":case"reset":break;case"file":if(isNativeCloud()){var o=GetName($(this)),s=1;isNullOrEmpty($(this).parent().attr("data-attachto"))||(s=$(this).parent().attr("data-attachto"));var l=$(this).parent().attr("data-uploadtochatter"),d=void 0!==l&&"true"==l;$(this).parent().find(".file-item").each(function(e,t){var a=$(t).find("label");void 0!==a&&void 0!==$(a).attr("data-file-sid")&&""!=$(a).attr("data-file-sid")&&AddToArray(i,o+"_"+e+"||"+$(a).attr("data-fileext")+"||FILE||"+$(a).attr("data-filename")+"||"+d+"||"+s,$(a).attr("data-file-sid"))})}break;default:AddToArray(i,"Unknown_InputType_"+GetName($(this)),$(this).prop("type"))}}),$("#dvFastForms .ff-sec-repeat-wrapper").each(function(e,t){var a=$(t).attr("data-rid");void 0!==a&&""!=a&&AddToArray(i,a,fixedEncodeURIComponent($(t).attr("data-rval")))}),isNativeCloud()&&$("#dvFastForms .ff-esignature-wrapper .ff-drawn input").each(function(){var e=$(this).val();if(void 0!==e&&""!=e){var t=$(this).parents(".ff-sign-block").signaturePad().getSignatureImage();AddToArray(i,GetName($(this)),fixedEncodeURIComponent(t))}else console.log("Signature is not provided")}),e){t="";for(var n=0;n<i.length;n++)""!=t&&(t+="&"),t+=i[n][0]+"="+i[n][1]}else{t=new FormData;for(n=0;n<i.length;n++)t.append(i[n][0],i[n][1])}}catch(e){console.log("Error unexpected! Method[GenerateFormData] Ex[Below]"),console.log(e)}return t},window.DiscardDraft=function(){var e=$("#dialog");inIframe()&&fs.EH.isParentAccessible()?1==confirm("Are you sure you want to discard this saved form? This action cannot be undone.")&&($("#dvFastForms #isDraft").val("False"),$("#dvFastForms #draftSaved").val("False"),DiscardFormData()):($(e).dialog({position:ffDialogPositionOption,autoResize:!0,modal:!0,id:"dvFastForms",dialogClass:"ff-form-main",show:{effect:"fade",duration:350},hide:{effect:"fade",duration:350},buttons:{Yes:{click:function(){$(this).dialog("close"),$("#dvFastForms #isDraft").val("False"),$("#dvFastForms #draftSaved").val("False"),DiscardFormData()},text:"Yes",class:"ff-btn-submit"},No:{click:function(){$(this).dialog("close")},text:"No",class:"ff-btn-submit"}}}).siblings(".ui-dialog-titlebar").remove(),$(e).html("Are you sure you want to discard this saved form?<br /> This action cannot be undone."),$(".ff-ui-dialog-titlebar").hide(),$(".ff-ui-dialog").attr("id","dvFastForms"))},window.SubmitData=function(e){if(1==e)$("#dvFastForms #isDraft").val("True"),"true"!=getNullSafeLowerCase($("#dvFastForms #draftSaved").val())?GetSaveDraftEmail():PostFormData();else{if(void 0!==$("#submitRules")){var t=$("#submitRules").val();if(void 0!==t&&""!==t){var a=t.split(",").map(function(e){return parseInt(e,10)});ExecEvaluateRules(a)}}if(hasGeneralError)hasGeneralError=!1;else $("#dvFastForms #btnsubmit").prop("disabled",!0),fs.EH.setFormValid(!0),1==ExecBeforeSave()&&ValidateForm()}},window.AddToRepeatableSection=function(e,t){var a=$(e).parents(".ff-sec-repeat-wrapper"),i=safeInt($(a).parent().data("max"),ff_SectionRepeatMaxCount),n=safeInt($(a).parent().data("min"),1),r=$(a).parent().find(".ff-sec-repeat-wrapper").length;if(""==i||r<i){var o=$(a).parent().find(".ff-sec-repeat-wrapper").eq(r-1),s=$(o).clone().appendTo($(a).parent());$(s).find(".ff-esignature-wrapper").length>0&&(clearSignatureCanvas($(s).find(".ff-signwrapper.ff-drawn .doc-sign-name")),clearSignatureCanvas($(s).find(".ff-signwrapper.ff-drawn .doc-sign-date")),clearSignatureCanvas($(s).find(".ff-signwrapper.ff-typed .doc-sign-name")),clearSignatureCanvas($(s).find(".ff-signwrapper.ff-typed .doc-sign-date")),$(s).find(".docsignWrapper .typedSignName").html(""),$(s).find(".docsignWrapper .typedSignDate").html(""),$(s).find(".docsignWrapper .ffsignature").val(""),$(s).find(".docsignWrapper .ffdate").val("")),void 0===t&&($(s).removeAttr("data-rid"),$(s).removeAttr("data-rval")),$.FFMatrixHelper.resetMatrixDataOnElements(s,window.DataMatrixArrayMap),SetRepeatableSectionIDs($(a).parent().find(".ff-sec-repeat-wrapper").last(),r+1,!0),ResetRepeatedSectionItem($(a).parent().find(".ff-sec-repeat-wrapper").last(),!1),r++}r>n&&$(a).parent().find(".ff-sec-repeat-wrapper").each(function(e,t){n<e+1?$(t).find(".ff-remove").show():$(t).find(".ff-remove").hide()}),fs.EH.InitializeIframe()},window.RemoveFromRepeatableSection=function(e){var t=$(e).parents(".ff-sec-repeat-wrapper"),a=safeInt($(t).parent().data("min"),ff_SectionRepeatMinCount),i=$(t).parent().find(".ff-sec-repeat-wrapper").length,n=$(t).parent();(""==a||i>a)&&i>1&&($(t).remove(),$(n).find(".ff-sec-repeat-wrapper").each(function(e,t){SetRepeatableSectionIDs(t,e+1,!0)})),BindRepeatedSectionEvents(n),fs.EH.InitializeIframe()},window.ReRenderCalendar=function(e){void 0==$(e).attr("data-vatt")||"datetime"!=$(e).attr("data-vatt").toLowerCase()&&"date"!=$(e).attr("data-vatt").toLowerCase()||RenderCalendar(e)},window.ResetRepeatedSectionItem=function(e,t){if($(e).find(".ff-item-row .ff-col-2>input,.ff-item-row .ff-col-2>textarea,.ff-item-row .ff-col-2>select").each(function(){switch("none"!=$(this).parent().parent().css("display")&&!0,$(this).prop("type")){case"file":isNativeCloud()?clearFileElements(this):"true"!=$("#dvFastForms #isDraft").val().toLowerCase()&&isNullOrEmpty($("#dvFastForms #txtUserContentId").val())&&clearFileElements(this);break;case"text":case"textbox":case"textarea":$(this).parent().find(".custom-flex-control-container").remove(),$(this).parent().find(".select2-container").remove(),ReRenderCalendar(this),fs.EH.initFlexControl(this,!1);break;case"radio":case"checkbox":break;case"select-one":case"select-multiple":$(this).parent().find(".custom-flex-control-container").remove(),$(this).parent().find(".select2-container").remove(),fs.EH.initFlexControl(this,!1)}}),$(e).find("div[name=FileUploadLabel]").remove(),!t&&$(e).find("div[data-vatt='CAPTCHA']").length>=1){var a=$("#recaptchaSiteKey").val();$(e).find(".ff-captcha").each(function(e,t){$(t).find('div[data-vatt="CAPTCHA"]').find(">div").first().remove();var i=$(t).find('div[data-vatt="CAPTCHA"]').attr("id");grecaptcha.render(i,{sitekey:a,callback:verifyCallback})})}BindRepeatedSectionEvents(e)},window.PopulateLookup=function(e){void 0!=e.selectedId&&void 0!=e.sourceField&&(LogEvent("SELECTED_LOOKUP_VALUE",""),$("#dvFastForms #"+e.sourceField.replace(/\./g,"\\.")).val(e.selectedId),$("#dvFastForms #input"+e.sourceField.replace(/\./g,"\\.")).val(e.selectedName),$("#dvFastForms #"+e.sourceField.replace(/\./g,"\\.")).trigger("change"))},window.ValidateFileUploads=function(e){var t;fs.EH.ResetFormValidation();$.each(e.results,function(e,a){var i=$("#dvFastForms #"+a.elementID);t=$(i).closest(".ff-fileupload-drop-area");var n=$(t).find("[id$='_Label']").length;if("Success"==a.message){var r=a.fileName.substring(a.fileName.lastIndexOf(".")),o="";if(null!=$(t).data("allowedfiletypes")&&(o=(o=$(t).data("allowedfiletypes")).toLowerCase()),void 0!=r&&""!=r&&(r=r.toLowerCase()),""!=o&&-1==$.inArray(r,o.split(",")))ShowValidationMessage(t,"FILETYPE",o),RemoveFile(a.fileName,$("#dvFastForms #txtSessionID").val(),$(i).attr("id"));else{var s=window.FormBASEURL,l="#"+a.elementID+n+"_Remove";isNativeCloud()&&(s=baseStaticUrl),t.prepend('<div name="FileUploadLabel" id="'+a.elementID+n+'_Label"><a title="Remove" href="" id="'+a.elementID+n+'_Remove"><img src="'+s+'Styles/images/remove.png" title="Remove" border="0" /></a>&nbsp;<label style="font-weight:bold">'+a.fileName+"</label></div>"),$(l).click(function(e){return e.preventDefault(),"disabled"!=$(i).attr("disabled")&&(RemoveFile(a.fileName,$("#dvFastForms #txtSessionID").val(),$(i).attr("id")),$("#"+a.elementID+n+"_Label").remove(),fs.FileService.checkFileUploadLimits(t)),!1}),$(l).mouseover(function(){$(this).css({cursor:"disabled"==$(i).attr("disabled")?"not-allowed":"pointer"})}),!0,fs.FileService.checkFileUploadLimits(t)}}else"MaxSizeExceeded"==a.message?ShowValidationMessage(t,"FILESIZE"):"MaxRequestLengthExceeded"==a.message&&ShowValidationMessage(t,"FILESIZE","",!0)})},window.GetXmlElementInstance=function(e){var t,a=e.replace(/&amp;/g,"&");(a=a.replace(/&/g,"&amp;"),msieversion()<1)?t=(new DOMParser).parseFromString(a,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(a));return t};var enumFlexControl={PicklistComboBox:"picklist-combobox",PicklistRadioButton:"picklist-radiobutton",PicklistRadiobuttonVertical:"picklist-radiobutton-vertical",PicklistRadiobuttonHorizontal:"picklist-radiobutton-horizontal",MultipicklistMultiTags:"multipicklist-multi-tags",MultipicklistMultiTagsCheck:"multipicklist-multi-tags-check",MultipicklistCheckboxVertical:"multipicklist-checkbox-vertical",MultipicklistCheckboxHorizontal:"multipicklist-checkbox-horizontal",MultipicklistDefault:"multipicklist-default",IntegerStarrating:"integer-starrating",IntegerNpsrating:"integer-npsrating",IntegerMatrixLikert:"integer-matrixlikert"};Object.freeze(enumFlexControl);var enumFieldTypeControl={SelectOne:"select-one",SelectMultiple:"select-multiple",Checkbox:"checkbox",Text:"text",Textarea:"textarea",Radio:"radio",Hidden:"hidden",Submit:"submit",Button:"button",Reset:"reset"};function getJSElementId(e){return e.indexOf("\\.")<0&&(e=e.replace(/\./g,"\\.")),e}function setFFHtmlFieldValue(e,t){try{e=getJSElementId(e),t=unescapeHTMLString(t);var a=$("#dvFastForms").find("#"+e);if(null==a||null==a[0])return;var i=a[0].type,n=$(a).data("flexcontrol");switch(console.log("pElementID["+e+"]pFieldValue["+t+"] vFieldTypeControl["+i+"] vFlexControl["+n+"]"),i){case enumFieldTypeControl.SelectOne:setSelectOneField(a,n,t);break;case enumFieldTypeControl.SelectMultiple:setSelectMultipleField(a,n,t);break;case enumFieldTypeControl.Checkbox:setCheckBoxField(a,n,t);break;case enumFieldTypeControl.Textarea:case enumFieldTypeControl.Text:setTextField(a,n,t);break;case enumFieldTypeControl.Hidden:setHiddenField(a,n,t);break;default:console.log("[setFFHtmlFieldValue] Field Type not Identified. vFieldTypeControl["+i+"] vFlexControl["+n+"]")}}catch(e){console.log("Error unexpected! Method[setFFHtmlFieldValue] Ex[Below]"),console.log(e)}}function setSelectOneField(e,t,a){switch(t){case enumFlexControl.PicklistRadiobuttonHorizontal:case enumFlexControl.PicklistRadiobuttonVertical:$(e).SelectToRadio("destroy"),$(e).val(a),fs.EH.initFlexControl(e,!1);break;case enumFlexControl.PicklistComboBox:$(e).select2("val",a);break;default:$(e).val(a)}}function setSelectMultipleField(e,t,a){var i=a.split(";");switch(t){case enumFlexControl.MultipicklistCheckboxHorizontal:case enumFlexControl.MultipicklistCheckboxVertical:$(e).SelectToRadio("destroy"),$(e).val(i),fs.EH.initFlexControl(e,!1);break;case enumFlexControl.MultipicklistMultiTags:case enumFlexControl.MultipicklistMultiTagsCheck:$(e).select2("val",i);break;case enumFlexControl.MultipicklistDefault:default:$(e).val(i)}}function setCheckBoxField(e,t,a){var i=$(e).is(":checked");$(e).prop("checked",getSafeBoolean(a,i))}function setTextField(e,t,a){switch(t){case enumFlexControl.IntegerNpsrating:case enumFlexControl.IntegerStarrating:$(e).ffrating("destroy"),$(e).val(a),fs.EH.initFlexControl(e,!1);break;case enumFlexControl.IntegerMatrixLikert:$(e).val(a),fs.EH.initFlexControl(e,!1);break;case void 0:var i=$(e).attr("data-vatt");isDateOrDateTimeField($(e))?""!=a&&($(e).val(a),setFormattedDateOrDateTime(e)):"REFERENCE"==i?($(e).next().val(a),$(e).val(a)):$(e).val(a);break;default:$(e).val(a)}}function setHiddenField(e,t,a){var i=$(e).attr("data-vatt");"DATETIME"==i||"DATE"==i?""!=a&&($(e).val(a),setFormattedDateOrDateTime(e)):"REFERENCE"==i?($(e).next().val(a),$(e).val(a)):$(e).val(a)}function InitializeFileUpload(){if(isNativeCloud())InitializeFileUpload_Native();else{var e=$(fsQ.S("#dvFastForms .ff-fileupload-drop-area"));0!==e.length&&(0==isOlderBrowser()&&window.fs_fileUpload_disableDragDropInHTMLDocument&&$(document).bind("drop dragover",function(e){e.preventDefault()}),fsQ.forEach(e,function(e){var t=$(e),a=$(e).find(":file");fs.FileService.isFileServiceOn(t)?fs.FileService.loadFileUploadField(t,a):isOlderBrowser()?$(a).change(function(e){formLogger("[InitializeFileUpload][IE8][change]"),$("#ffOverlay").addClass("ff-overlay-image"),$("#dvFastForms form#form1").attr("action",window.FormBASEURL+"EngineFrame/UploadFile"),$("#dvFastForms form#form1").trigger("submit")}):($(a).fileupload({}),$(a).fileupload({url:window.FormBASEURL+"/EngineFrame/UploadFile",type:"POST",dropZone:t,fileInput:a,autoUpload:!0,formData:function(){var e=[];return fs.FileService.addNameAndValueInArray(e,"txtOrgId",$("#txtOrgId").val()),fs.FileService.addNameAndValueInArray(e,"txtSessionID",$("#txtSessionID").val()),e},dataType:"json",xhr:function(){var e=null;return"ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa?(console.log("[InitializeFileUpload][IE11-SF][xhr]"),Sarissa&&Sarissa.originalXMLHttpRequest?e=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(e=new XMLHttpRequest)):e=$.ajaxSettings.xhr(),e},add:function(e,a){if(formLogger("[InitializeFileUpload][Add]"),e.target.disabled)formLogger("[InitializeFileUpload][Abort]");else{fs.EH.ResetFormValidation();var i=a.originalFiles[0].size,n=$(t).data("allowedfiletypes"),r=a.originalFiles[0].name,o="";null!=r&&r.indexOf(".")>-1&&(o=r.substring(r.lastIndexOf("."))),null!=i&&i>maxFileSize?ShowValidationMessage(t,"FILESIZE"):""!=n&&null!=n&&-1==$.inArray(o,n.split(","))?ShowValidationMessage(t,"FILETYPE",n):(jqXHRData=a).submit()}},done:function(e,t){formLogger("[InitializeFileUpload][Done]");var a=$.parseJSON(t.result);ValidateFileUploads(a)},fail:function(e,t){formLogger("[InitializeFileUpload][fail]")}}))}))}}function addNameAndValueInArray(e,t,a){return e.push({name:t,value:a}),e}function InitializeFileUpload_Native(){var e=$(fsQ.S("#dvFastForms .ff-fileupload-drop-area"));0!==e.length&&fsQ.forEach(e,function(e){var t=$(e),a=$(e).find(":file");!fs.FileService.isNativeOptionSelected(t)&&fs.FileService.isFileServiceOn(t)?fs.FileService.loadFileUploadField(t,a):$(a).change(function(e){var a=this,i=$(a).parent().parent();$(i).find(".ff-fileupload-drop-area").removeClass("ff-input-type-invalid"),$(i).find(".ff-invalid-msg").remove();var n=$(a).parent().data("allowedfiletypes"),r=$(a).parent().data("maxfiles");$(this).parent().find(".fake-path").remove();window.FormData&&new FormData;if(void 0!=this.files[0]){var o=this.files[0],s=o.name,l=new FileReader,d=!0;l.onprogress=function(e){d&&(fileLoadingSpinner(a,!0),d=!1)},l.onloadend=function(e){for(var i="",o=new Uint8Array(e.target.result),l=o.byteLength,d=0;d<l;d++)i+=String.fromCharCode(o[d]);var f=btoa(i).toString(),u=getFileUploadExtension(s);n=n.toLowerCase(),void 0!=u&&""!=u&&(u=u.toLowerCase());var c=f.length,m="."+u;if(c>maxFileSize){try{" Your file size is "+Math.floor(c/1024/10)/100}catch(e){}ShowValidationMessage(t,"FILESIZE"),fileLoadingSpinner(a,!1)}else""!=n&&null!=n&&-1==$.inArray(m,n.split(","))?(ShowValidationMessage(t,"FILETYPE",n),fileLoadingSpinner(a,!1)):$(t).find(".file-item").length>=r?(fileLoadingSpinner(a,!1),ShowValidationMessage(t,"GENERAL","Maximum number of files allowed to upload is "+r+".")):(addFileUploadItems(a,u,getSafeFileName(s),f),fileLoadingSpinner(a,!0),UploadFile(a))},l.onerror=function(e){fileLoadingSpinner(a,!1),ShowValidationMessage(t,"GENERAL","There was an error reading the file.  Please try again.")},l.onabort=function(e){fileLoadingSpinner(a,!1),ShowValidationMessage(t,"GENERAL","There was an error reading the file.  Please try again.")},l.readAsArrayBuffer(o)}})})}function setEnableDisableFileUpload(e){var t=$(e).data("maxfiles");$(e).find(".ff-fileupload-select").removeClass("disabled"),$(e).find('input[type="file"]').prop("disabled",!1),$(e).find(".file-item").length>t&&($(e).find(".ff-fileupload-select").removeClass("disabled"),$(e).find('input[type="file"]').prop("disabled",!1))}function fileUploadItemHandle(e,t){e.click(function(){"disabled"!=$(t).attr("disabled")&&RemoveFileItem(this)}),$(e).mouseover(function(){$(this).css({cursor:"disabled"==$(t).attr("disabled")?"not-allowed":"pointer"})})}function addFileUploadItems(e,t,a,i){var n=$(e).parent(),r=$(n).find(".file-item").length,o=$("<div/>",{class:"file-item",id:$(e).attr("id")+"_"+r}),s=$("<span/>",{title:"Remove",class:"remove-fitem"});fileUploadItemHandle(s,e);var l=a;void 0!==t&&""!=t&&(l+="."+t);var d=$("<label/>",{html:l,class:"file-item-data","data-filename":a,"data-fileext":t,"data-file":i});o.append(s),o.append(d),$(o).insertBefore($(n).find("label.ff-fileupload-select"))}function RemoveFileItemCallback(e){var t=$(e).parent().parent().find('input[type="file"]');$(e).parent().remove();try{ValidateMaxNumberOfFiles(t)}catch(e){}}function fileLoadingSpinner(e,t){t?$(e).parent().find(".file-item").hasClass("file-loading")||$(e).parent().find(".file-item").addClass("file-loading"):$(e).parent().find(".file-item").removeClass("file-loading")}function clearFileElements(e){$(e).parent().find(".file-item").remove()}function getSafeFileName(e){var t="";return void 0!==e&&""!=e&&e.indexOf(".")>0&&(t=e.substring(0,e.lastIndexOf("."))),t}function LoadCaptcha(e){if(!isNativeCloud()||isCommunityForm()){console.log("[LoadCaptcha] Starts...");var t=getURLEndPoint(enumEndpoint.GENERATE_CAPTCHA);if(window.XDomainRequest){formLogger("[LoadCaptcha][IE][XDomainRequest]");var a=new XDomainRequest;a.timeout=XDR_TIMEOUT_MILLISECONDS,a.onerror=function(){console.log("Error unexpected on XDR! Method[LoadCaptcha].")},a.ontimeout=function(){console.log("Time out error on XDR! Method[LoadCaptcha].")},a.onprogress=function(){},a.onload=function(){formLogger("[LoadCaptcha][IE][XDomainRequest]"),RenderCaptcha($.parseJSON(a.responseText))},a.open("POST",parseURLForXDR(t),!0),a.send("captchaCnt="+e)}else if("ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa){formLogger("[LoadCaptcha][IE11-SF][XMLHttpRequest]");var i=null;Sarissa&&Sarissa.originalXMLHttpRequest?i=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(i=new XMLHttpRequest),i.open("POST",t,!0),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status)if(i.responseText&&i.responseText.length>0){formLogger("[LoadCaptcha][IE11-SF][XMLHttpRequest][Result]");var e=$.parseJSON(i.responseText);RenderCaptcha(e=$.parseJSON(e))}else formLogger("Service call exception"+i.responseText);else 4==i.readyState&&200!=i.status&&formLogger("Service call status:"+i.status)},i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("captchaCnt="+e)}else $.ajax({global:!1,type:"POST",url:t,crossDomain:!0,data:"captchaCnt="+e,dataType:"json",cache:!1,success:function(e){RenderCaptcha($.parseJSON(e))},error:function(e){}})}}function RenderCaptcha(e){console.log("[RenderCaptcha] Starts...");var t=0;$('#dvFastForms div[data-vatt="CAPTCHA"]').each(function(){var a=$(this).attr("id"),i=e[t].captchaID,n=e[t].image;$("#lbl"+a).attr("for",i+"_Captcha"),$("#"+a+"_Wrapper").remove(),$(this).append('<div id="'+a+'_Wrapper" name="'+a+'_Wrapper"><img id="'+a+'_Image" alt="Captcha image" src="data:image/png;base64,'+n+'" /><br /><input type="text" class="ff-input-type ff-type-text" name="'+i+'_Captcha" data-captchaid="'+i+'" data-isrequired="true" id="'+i+'_Captcha" /></div>'),t++}),fs.EH.InitializeIframe()}function InitializeCaptcha(){if(console.log("[InitializeCaptcha] Starts..."),!isNativeCloud()||isCommunityForm()){var e=$('#dvFastForms div[data-vatt="CAPTCHA"]').length;console.log("[InitializeCaptcha] Starts...["+e+"]"),e>0&&(isOlderBrowser()?($("#dvFastForms #captchaCnt").remove(),$("#dvFastForms form#form1").prepend('<INPUT name="captchaCnt" id="captchaCnt" type=hidden value="'+e+'" />'),$("#dvFastForms form#form1").attr("action",window.FormBASEURL+"EngineFrame/GenerateCaptcha"),$("#dvFastForms form#form1").trigger("submit")):LoadCaptcha(e))}}function SendCaptchaToServer(){if(console.log("[FORM][SendCaptchaToServer] Starts.."),!isNativeCloud()||isCommunityForm())if($("#dvFastForms .ff-captcha").length>0){$.support.cors=!0;var e=!1,t=getURLEndPoint(enumEndpoint.CHECK_CAPTCHA),a=GenerateFormData(!1);if(window.XDomainRequest){console.log("[SendCaptchaToServer][IE][XDomainRequest]");var i=new XDomainRequest;i.timeout=XDR_TIMEOUT_MILLISECONDS,i.onerror=function(){console.log("Error unexpected on XDR! Method[SendCaptchaToServer].")},i.ontimeout=function(){console.log("Time out error on XDR! Method[SendCaptchaToServer].")},i.onprogress=function(){},i.onload=function(){ValidateCaptcha(e=i.responseText),fs.EH.isFormValid()&&SendPaymentToServer()},i.open("POST",parseURLForXDR(t),!0),i.send(a)}else if("ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa){console.log("[SendCaptchaToServer][IE11-SF][XMLHttpRequest]");var n=null;Sarissa&&Sarissa.originalXMLHttpRequest?n=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(n=new XMLHttpRequest),n.open("POST",t,!0),n.onreadystatechange=function(){4==n.readyState&&200==n.status?n.responseText&&n.responseText.length>0?(e=n.responseText,console.log("[SendCaptchaToServer][IE11-SF][XMLHttpRequest][result]"),console.log(e),ValidateCaptcha($.parseJSON(e)),fs.EH.isFormValid()&&SendPaymentToServer()):console.log(" Service call exception"+n.responseText):4==n.readyState&&200!=n.status&&console.log(" Service call status:"+n.status)},n.send(a)}else $.ajax({global:!1,type:"POST",crossDomain:!0,async:!0,url:t,data:a,dataType:"json",processData:!1,tryCount:0,retryLimit:3,success:function(t){ValidateCaptcha(e=t),fs.EH.isFormValid()&&SendPaymentToServer()},error:function(e,t,a){if($("#dvFastForms #btnsubmit").prop("disabled",!1),"timeout"==t)return this.tryCount++,this.tryCount<=this.retryLimit?void $.ajax(this):void 0;e.status}})}else SendPaymentToServer();else SendCaptchaToServer_Native()}function SendCaptchaToServer_Native(){if($("#dvFastForms .ff-captcha").length>0){var e=!0;$("#dvFastForms .ff-captcha .ff-invalid-msg").remove();var t="",a=!1,i=0;if($("#dvFastForms .ff-captcha").each(function(n,r){var o=$(r).find('div[data-vatt="CAPTCHA"]'),s=$(r).find(".g-recaptcha-response"),l=$(s).val();if("undefined"!=l&&""!=l)t+=(""!=t?";":"")+$(s).val();else{if("true"===o[0].dataset.isrequired){e=!1,a=!1;var d="Required";try{d=$(o).attr("data-requiredmessage")}catch(e){}return void $(r).append('<div class="ff-invalid-msg">'+d+"</div>")}"false"===o[0].dataset.isrequired&&(e&&(a=!0),i++)}}),$.support.cors=!0,e&&""!=t){var n=getURLEndPoint(enumEndpoint.CHECK_CAPTCHA),r=new FormData;if(r.append("captcharesponse",t),window.XDomainRequest){console.log("[SendCaptchaToServer][IE][XDomainRequest]");var o=new XDomainRequest;o.open("POST",n,!0),o.onload=function(){ValidateCaptcha(o.responseText),fs.EH.isFormValid()&&SendPaymentToServer()},o.send(r)}else if("ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa){console.log("[SendCaptchaToServer][IE11-SF][XMLHttpRequest]");var s=null;Sarissa&&Sarissa.originalXMLHttpRequest?s=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(s=new XMLHttpRequest),s.open("POST",n,!0),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status)if(s.responseText&&s.responseText.length>0){console.log("[SendCaptchaToServer][IE11-SF][XMLHttpRequest][result]"),fs.EH.setFormValid(!1);var e=$("<div/>").html(s.responseText);$.parseJSON($(e).find("#postResponse").html()).success&&fs.EH.setFormValid(!0),fs.EH.isFormValid()?SendPaymentToServer():showCaptchaErrors()}else console.log(" Service call exception"+s.responseText);else 4==s.readyState&&200!=s.status&&(console.log(" Service call status:"+s.status),$("#dvFastForms #btnsubmit").prop("disabled",!1),console.log("CAPTCHA ERROR:"+s.status+s.readyState),showCaptchaErrors())},s.send(r)}else $.ajax({global:!1,type:"POST",crossDomain:!0,async:!0,url:n,data:r,processData:!1,contentType:!1,mimeType:"multipart/form-data",success:function(e){fs.EH.setFormValid(!1);var t=$("<div/>").html(e);$.parseJSON($(t).find("#postResponse").html()).success&&fs.EH.setFormValid(!0),fs.EH.isFormValid()?SendPaymentToServer():showCaptchaErrors()},error:function(e,t,a){$("#dvFastForms #btnsubmit").prop("disabled",!1),console.log("CAPTCHA ERROR:"+t+a),showCaptchaErrors(),e.status}})}else a&&i>0?SendPaymentToServer():$("#dvFastForms #btnsubmit").prop("disabled",!1)}else SendPaymentToServer()}function showCaptchaErrors(){1==$("#dvFastForms .ff-captcha").length?ShowValidationMessage($("#dvFastForms .ff-captcha"),"GENERAL","Captcha field is expired or not valid. Please try again."):$("#dvFastForms .ff-captcha").length>1&&$("#dvFastForms .ff-captcha").each(function(e,t){ShowValidationMessage(t,"GENERAL","One or more of the captcha fields are expired or not valid. Please try again.")})}function UnloadWarning(){return enableUnloadWarning?ffPrompt_PaymentInProcessWarning:void 0}function stripeResponseHandler(e){console.log("[FORM] [stripeResponseHandler] Starts..");var t="#FFPAYMENT"+currentPaymentID+", #lblFFPAYMENT"+currentPaymentID;if($(t).find(".ff-creditcard").removeAttr("data-stripe"),$(t).find(".ff-cvv").removeAttr("data-stripe"),$(t).find(".ff-mm").removeAttr("data-stripe"),$(t).find(".ff-yyyy").removeAttr("data-stripe"),e.error)FFShowGeneralError(e.error.message),$("#dvFastForms #btnsubmit").prop("disabled",!1);else{var a=e.id;$(t).append($('<input type="hidden" id="FFPaymentToken'+currentPaymentID+'" name="FFPaymentToken'+currentPaymentID+'">').val(a)),SendPaymentToServer()}}function SendPaymentToServer(){if(console.log("[FORM] [SendPaymentToServer] Starts.."),$("#dvFastForms .ff-payment-wrapper").length>0&&$("#dvFastForms .ff-creditcard").filter(function(){return this.value.length>0}).length>0){var e=!1;if("stripe"==$("#dvFastForms #paymentType").val().toLowerCase()?$("#dvFastForms .ff-payment-wrapper").each(function(){if(null!=$(this).data("apikey")&&""!=$(this).data("apikey")&&$(this).find(".ff-creditcard").filter(function(){return this.value.length>0}).length>0){currentPaymentID=$(this).attr("id").replace("lblFFPAYMENT","").replace("FFPAYMENT","");$("#FFPaymentToken"+currentPaymentID);e=!0}}):e=!0,e){for(enableUnloadWarning=!0;!e;)$.support.cors=!0;var t=!1,a=window.FormBASEURL+"EngineFrame/CheckPayment",i=GenerateFormData(!1);if(i.append("ReturnUrl",window.location.href),window.XDomainRequest){console.log("[SendPaymentToServer][IE][XDomainRequest]");var n=new XDomainRequest;n.timeout=XDR_TIMEOUT_MILLISECONDS,n.onerror=function(){console.log("Error unexpected on XDR! Method[SendPaymentToServer].")},n.ontimeout=function(){console.log("Time out error on XDR! Method[SendPaymentToServer].")},n.onprogress=function(){},n.onload=function(){$("#FFPaymentToken"+currentPaymentID).remove(),enableUnloadWarning=!1,t=n.responseText,ValidatePayment(t),fs.EH.isFormValid()&&(ResetSaveDraft(),PostFormData())},n.open("POST",parseURLForXDR(a),!0),n.send(i)}else if("ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa){formLogger("[SendPaymentToServer][IE11-SF][XMLHttpRequest]");var r=null;Sarissa&&Sarissa.originalXMLHttpRequest?r=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(r=new XMLHttpRequest),r.open("POST",a,!0),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status)if(r.responseText&&r.responseText.length>0){formLogger("[SendPaymentToServer][IE11-SF][XMLHttpRequest][result]"),$("#FFPaymentToken"+currentPaymentID).remove(),enableUnloadWarning=!1,t=r.responseText;var e=$.parseJSON(t);ValidatePayment(e),fs.EH.isFormValid()&&(ResetSaveDraft(),PostFormData())}else console.log(" Service call exception"+r.responseText);else 4==r.readyState&&200!=r.status&&console.log(" Service call status:"+r.status)},r.send(i)}else $.ajax({type:"POST",crossDomain:!0,async:!0,url:a,data:i,dataType:"json",processData:!1,tryCount:0,retryLimit:3,success:function(e){$("#FFPaymentToken"+currentPaymentID).remove(),enableUnloadWarning=!1,t=e,ValidatePayment(t),fs.EH.isFormValid()?(ResetSaveDraft(),PostFormData()):(console.log("Payment processing failed let's move to first error"),fs.N.ScrollToFirstError())},error:function(e,t,a){if($("#FFPaymentToken"+currentPaymentID).remove(),enableUnloadWarning=!1,$("#dvFastForms #btnsubmit").prop("disabled",!1),"timeout"==t)return this.tryCount++,this.tryCount<=this.retryLimit?void $.ajax(this):void 0}})}}else ResetSaveDraft(),PostFormData()}function UpdatePaymentAmountCall(e,t,a){switch(a){case"FFRECURRINGFEE":UpdatePaymentAmount(e,"FFRecurringFee"+t);break;case"FFAMOUNT":UpdatePaymentAmount(e,"FFAmount"+t);break;case"FFTAXES":UpdatePaymentAmount(e,"FFTaxes"+t);break;case"FFSHIPPING":UpdatePaymentAmount(e,"FFShipping"+t)}}function CallEvaluateFunction(e){return EvaluateFunction(e)}function EvaluateFunction(e){try{switch(e.type){case"CallExpression":return EvaluateCallExpression(e);case"BinaryExpression":return EvaluateBinaryExpression(e);case"Literal":return EvaluateLiteralExpression(e)}}catch(t){console.log("Exception [EvaluateFunction]:",e,t)}return!1}function EvaluateCallExpression(e){var t=e.arguments;switch(e.callee.name){case"ToAmount":return ToAmount(EvaluateFunction(t[0]));case"GetPaymentAmount":return 1==t.length?GetPaymentAmount(t[0].value):GetPaymentAmount(t[0].value,t[1].value);case"FFIf":return FFIf(EvaluateFunction(t[0]),EvaluateFunction(t[1]),EvaluateFunction(t[2]))}}function EvaluateBinaryExpression(e){switch(e.operator){case"+":return EvaluateLeftArgumentExpression(e.left)+EvaluateRightArgumentExpression(e.right);case"-":return EvaluateLeftArgumentExpression(e.left)-EvaluateRightArgumentExpression(e.right);case"*":return EvaluateLeftArgumentExpression(e.left)*EvaluateRightArgumentExpression(e.right);case"/":return EvaluateLeftArgumentExpression(e.left)/EvaluateRightArgumentExpression(e.right);case"==":return EvaluateLeftArgumentExpression(e.left)==EvaluateRightArgumentExpression(e.right)}return!1}function EvaluateLeftArgumentExpression(e){return EvaluateFunction(e)}function EvaluateRightArgumentExpression(e){return EvaluateFunction(e)}function EvaluateLiteralExpression(e){var t=e.value;if(!isSFNumeric(e.value)&&t.split("\\.").length>1){var a=e.value.replace(/\\\\/g,"");t=document.getElementById(a).value,console.log("returnVal:"+t)}return t}function isSFNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function ValidateCaptcha(e){for(var t=0;t<e.length;t++)if(!e[t].isValid){var a=$("#dvFastForms #"+e[t].captchaID+"_Captcha");ShowValidationMessage($(a).parent().parent(),"CAPTCHA"),$("#dvFastForms #btnsubmit").prop("disabled",!1),InitializeCaptcha(),fs.EH.setFormValid(!1)}}function LogEvent(e,t){if(!isNativeCloud()){$.support.cors=!0;var a=window.FormBASEURL+"EngineFrame/LogEvent";if("http:"==window.location.protocol&&0===a.lastIndexOf("https:",0)&&(a=a.replace("https:","http:")),window.XDomainRequest){var i=new XDomainRequest;i.timeout=XDR_TIMEOUT_MILLISECONDS,i.onerror=function(){console.log("Error unexpected on XDR! Method[LogEvent].")},i.ontimeout=function(){console.log("Time out error on XDR! Method[LogEvent].")},i.onprogress=function(){},i.onload=function(){},i.open("POST",parseURLForXDR(a),!0),i.send("orgId="+$("#dvFastForms #txtOrgId").val()+"&sessionId="+$("#dvFastForms #txtSessionID").val()+"&eventName="+encodeURIComponent(e)+"&details="+encodeURIComponent(t))}else if("ActiveXObject"in window&&window.XMLHttpRequest&&"undefined"!=typeof Sarissa){console.log("[LogEvent][IE11-SF][XMLHttpRequest]");var n=null;Sarissa&&Sarissa.originalXMLHttpRequest?n=new Sarissa.originalXMLHttpRequest:window.XMLHttpRequest&&(n=new XMLHttpRequest),n.open("POST",a,!0),n.send("orgId="+$("#dvFastForms #txtOrgId").val()+"&sessionId="+$("#dvFastForms #txtSessionID").val()+"&eventName="+encodeURIComponent(e)+"&details="+encodeURIComponent(t))}else $.ajax({global:!1,async:!0,type:"POST",url:a,crossDomain:!0,data:"orgId="+$("#dvFastForms #txtOrgId").val()+"&sessionId="+$("#dvFastForms #txtSessionID").val()+"&eventName="+encodeURIComponent(e)+"&details="+encodeURIComponent(t),dataType:"text",processData:!1,tryCount:0,retryLimit:3})}}function isOlderBrowser(){var e=$("#browser").attr("class");return"ie6"==e||"ie7"==e||"ie8"==e||"ie9"==e}function RedirectToUrl(e){var t=window;inIframe()&&fs.EH.isParentAccessible()&&(t=parent.window),0===e.indexOf("http://")||0===e.indexOf("https://")?t.location.href=e:t.location.href="http://"+e}function GetName(e){var t=e.attr("name");return void 0!=t&&null!=t||(t=e.attr("id")),void 0!=t&&null!=t||(t=e.attr("class")),t}function AddToArray(e,t,a){var i=e.length;e[i]=[],e[i][0]=t,e[i][1]=a}function GetParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function LoadCSS(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,$("#"+window.FS_FormConfiguration.RootElementId).length>0&&("SCRIPT"==$("#"+window.FS_FormConfiguration.RootElementId)[0].nodeName?$($("#"+window.FS_FormConfiguration.RootElementId)).after(t):$("#"+window.FS_FormConfiguration.RootElementId).prepend(t))}function LoadJS(e){var t=document.createElement("script");(t.type="text/javascript",t.src=e,fs.Utils.getFSFormConfigProperty("IsSourceLightning",!1))?document.getElementById(window.FS_FormConfiguration.RootElementId).appendChild(t):$("#"+window.FS_FormConfiguration.RootElementId).prepend(t)}function getEmbedCodeParamsRegular(){var e={},t=$("#jsFastForms").attr("src").split("?");if(2==t.length)for(var a=t[1].split("&"),i=0;i<a.length;i++){var n=a[i].split("=");e[n[0]]=decodeURIComponent(n[1])}return e}function getSFSrcAttribute(e,t){var a=$("#"+e);return void 0!==a&&void 0===$(a).attr(t)?"":$(a).attr(t)}function getEmbedCodeParams(){var e={},t=getSFSrcAttribute("jsFastFormsWrapper","data-ffparam"),a=getSFSrcAttribute("jsFastForms","src");if(""!=a&&a.toLowerCase().indexOf(".salesforce.com")<0&&(e=getEmbedCodeParamsRegular()),void 0!==t&&""!=t)for(var i=t.split("&"),n=0;n<i.length;n++){var r=i[n].split("=");e[r[0]]=decodeURIComponent(r[1])}else console.log("Formstack Parameters"+t);return e}function inIframe(){try{return void 0!==window.FSEnableOldFrameCheck?window.self!==window.top:"ffEmbedFrame"==window.self.name}catch(e){return!0}}function GetFormInfo(){GetHTML(window.FS_FormConfiguration.GetHTMLUrl)}function Main(e){e(document).ready(function(e){window.onbeforeunload=UnloadWarning;var t=!1;null!==window.FS_FormConfiguration&&void 0!==window.FS_FormConfiguration.IsSourceLightning&&window.FS_FormConfiguration.IsSourceLightning&&(ffDialogPositionOption={my:"left top",at:"left top",of:"#dvBannerHTML"},t=!0),LoadCSS(window.CDNResourceRoot+"styles/jquery-ui.css"),LoadCSS(window.CDNResourceRoot+"styles/jquery-ui-timepicker-addon.css"),LoadCSS(window.CDNResourceRoot+"styles/select2.css"),LoadCSS(window.CDNResourceRoot+"styles/ui.jqgrid.css");var a=getURLEndPoint(enumEndpoint.INDEX);window.FS_FormConfiguration.JSReady=!0;var i=getEmbedCodeParams();if(void 0!=i.d&&""!=i.d){t&&(isClassic()&&_SafeBoolean(window.FS_FormConfiguration.hasRuleOrScript,!0)?LoadJS(window.FormBASEURL+"EngineFrame/JSResource/"+i.d):_SafeBoolean(window.FS_FormConfiguration.hasRuleOrScript,!1)&&(window.FS_FormConfiguration.JSReady=!1,LoadJS(window.FormBASEURL+"services/apexrest/"+GetFormNamespace("/")+"FFNResource/v1/"+window.FS_FormConfiguration.formIdentifier)));var n=a+"?d="+encodeURIComponent(i.d);void 0!=i.dp&&""!=i.dp&&(n+="&dp="+encodeURIComponent(i.dp)),void 0!=i.ucId&&""!=i.ucId&&(n+="&ucId="+encodeURIComponent(i.ucId)),void 0!=i.ft&&""!=i.ft&&(n+="&ft="+encodeURIComponent(i.ft)),void 0!=i.iu&&""!=i.iu&&(n+="&iu="+encodeURIComponent(i.iu)),void 0!=i.cut&&""!=i.cut&&(n+="&cut="+encodeURIComponent(i.cut)),void 0!=i.cid&&""!=i.cid&&(n+="&cid="+encodeURIComponent(i.cid)),void 0!=i.ctype&&""!=i.ctype&&(n+="&ctype="+encodeURIComponent(i.ctype)),void 0!=i.cviewmode&&""!=i.cviewmode&&(n+="&cviewmode="+encodeURIComponent(i.cviewmode)),t&&void 0!=i.ls&&""!=i.ls&&(n+="&ls="+encodeURIComponent(i.ls)),n+=location.search.replace("?","&"),window.FS_FormConfiguration.GetHTMLUrl=n,IsFormJSReady()&&GetFormInfo()}else InitializeForm(),InitializeCaptcha()})}function fixedEncodeURIComponent(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function isValidationOff(e,t){return $(e).attr("data-validatefieldtype")!==t}function isValidDate(e){if(isValidationOff(e,"date"))return!0;var t=$(e).val();return""===t||(!(!moment(t,window.fs_formLocaleDate,!0).isValid()&&!moment(t,getFlexibleFormatForDate(),!0).isValid())||(window.ShowValidationMessage(e,"DATE"),!1))}function isValidDateTime(e){if(isValidationOff(e,"datetime"))return!0;var t=$(e).val();return""===t||(!!(moment(t,window.fs_formLocaleDate+" "+window.fs_formLocaleTime,!0).isValid()||moment(t,window.fs_formLocaleDate,!0).isValid()||moment(t,getFlexibleFormatForDate(),!0).isValid()||moment(t,window.fs_formLocaleDate+" HH:mm",!0).isValid()||moment(t,getFlexibleFormatForDate()+" HH:mm",!0).isValid()||moment(t,getFlexibleFormatForDate()+" "+window.fs_formLocaleTime,!0).isValid())||(window.ShowValidationMessage(e,"DATETIME"),!1))}function getFlexibleFormatForDate(){return window.fs_formLocaleDate.replace("MM","M").replace("DD","D")}function getValidDateToSubmit(e,t){var a=t,i=isClassic()?formDateSubmission:formDateFormatForNativeSubmission,n=moment(a,window.fs_formLocaleDate,!0).isValid()?window.fs_formLocaleDate:"";return""===n&&(n=getFlexibleFormatForDate()),a=moment(a,n,!0).isValid()?moment(a,n,!0).format(i):isValidationOff(e,"date")?"":"InvalidDate["+a+"]"}function getDateOrDateTimeToSubmit(e){var t=$(e).val();if(console.log("[getDateOrDateTimeToSubmit] input-vValue["+t+"]"),!isNullOrEmpty(t))if(isDateField(e))t=getValidDateToSubmit(e,t),console.log("[getDateOrDateTimeToSubmit] output-vValue["+t+"][Date]");else{var a=$(e).attr("maxlength");t=moment(t,window.fs_formLocaleDate+" "+window.fs_formLocaleTime,!0).isValid()?isClassic()&&"22"!=a?moment(t,window.fs_formLocaleDate+" "+window.fs_formLocaleTime,!0).format(formDateSubmission+" "+formTimeSubmission):moment(t,window.fs_formLocaleDate+" "+window.fs_formLocaleTime,!0).toISOString():moment(t,window.fs_formLocaleDate,!0).isValid()?isClassic()&&"22"!=a?moment(t,window.fs_formLocaleDate,!0).format(formDateSubmission+" "+formTimeSubmission):moment(t,window.fs_formLocaleDate,!0).toISOString():moment(t,getFlexibleFormatForDate()+" "+window.fs_formLocaleTime,!0).isValid()?isClassic()&&"22"!=a?moment(t,getFlexibleFormatForDate()+" "+window.fs_formLocaleTime,!0).format(formDateSubmission+" "+formTimeSubmission):moment(t,getFlexibleFormatForDate()+" "+window.fs_formLocaleTime,!0).toISOString():moment(t,getFlexibleFormatForDate(),!0).isValid()?isClassic()&&"22"!=a?moment(t,getFlexibleFormatForDate(),!0).format(formDateSubmission+" "+formTimeSubmission):moment(t,getFlexibleFormatForDate(),!0).toISOString():moment(t,window.fs_formLocaleDate+" HH:mm",!0).isValid()?isClassic()&&"22"!=a?moment(t,window.fs_formLocaleDate+" HH:mm",!0).format(formDateSubmission+" "+formTimeSubmission):moment(t,window.fs_formLocaleDate+" HH:mm",!0).toISOString():moment(t,getFlexibleFormatForDate()+" HH:mm",!0).isValid()?isClassic()&&"22"!=a?moment(t,getFlexibleFormatForDate()+" HH:mm",!0).format(formDateSubmission+" "+formTimeSubmission):moment(t,getFlexibleFormatForDate()+" HH:mm",!0).toISOString():isValidationOff(e,"datetime")?"":"InvalidDateTime["+t+"]",console.log("[getDateOrDateTimeToSubmit] output-vValue["+t+"][DateTime]")}return t}if(Object.freeze(enumFieldTypeControl),window.ValidateMaxNumberOfFiles=function(e){var t=$(e).parent().data("maxfiles"),a=$(e).parent().parent();$(a).find(".ff-fileupload-drop-area").removeClass("ff-input-type-invalid"),$(a).find(".ff-invalid-msg").remove(),$(e).parent().find(".file-item").length>t?ShowValidationMessage(e,"GENERAL","Maximum number of files allowed to upload is "+t+"."):$(e).parent().find(".file-item").length},window.RemoveFileItem=function(e){console.log("[RemoveFileItem] Starts..."),DeleteSFFile(e)},window.enableUnloadWarning=!1,window.currentPaymentID="",window.ResetSaveDraft=function(){if($("#dvFastForms #isDraft").val("False"),$("#dvFastForms #draftSaved").val("False"),$("#dvFastForms #btndiscard").hide(),$("#submitRules").length){var e=$("#submitRules").val().split(",").map(function(e){return parseInt(e,10)});ExecEvaluateRules(e)}},window.UpdatePaymentAmount=function(e,t){if($("#"+t).length>0)if(null!=e&&""!=e)if(0===t.lastIndexOf("FFTaxes",0)){var a=ToAmount($("#"+t.replace("Taxes","Amount")).text()),i=ToAmount(e);$.isNumeric(a)&&$.isNumeric(i)?$("#"+t).text(ToAmount(a*(i/100))):$("#"+t).text("0.00")}else $("#"+t).text(ToAmount(e).toFixed(2));else $("#"+t).text("0.00");UpdatePaymentTotals()},window.UpdatePaymentTotals=function(){var e=$(fsQ.S("#dvFastForms .ff-creditcard"));fsQ.forEach(e,function(e){var t=$(e).attr("id").replace("FFCreditCard",""),a=ToAmount($("#FFShipping"+t).text()),i=ToAmount($("#FFTaxes"+t).text()),n=ToAmount($("#FFRecurringFee"+t).text()),r=ToAmount($("#FFAmount"+t).text()),o=ToAmount($("#FFSubTotalAmount"+t).text()),s=ToAmount($("#FFTaxes"+t).data("taxes"));s>0&&(s=ToAmount(r*(s/100)),i=isNaN(s)?0:s,$("#FFTaxes"+t).text(i.toFixed(2))),o=ToAmount(ToAmount(r,2)+ToAmount(a,2)+ToAmount(i,2),2).toFixed(2);var l=ToAmount(ToAmount(r,2)+ToAmount(a,2)+ToAmount(i,2)+ToAmount(n,2)).toFixed(2);$("#FFSubTotalAmount"+t).text(isNaN(o)?ToAmount(0,2):o),$("#FFTotalAmount"+t).text(isNaN(l)?ToAmount(0,2).toFixed(2):l)})},window.EvaluatePaymentAmount=function(e,t,a){var i,n=replaceAll("IF(","FFIf(",a);switch(n=replaceAll("if(","FFIf(",n),n=replaceAll('["','ToAmount(GetPaymentAmount("',n),n=replaceAll("].amount",","+t+"))",n),n=replaceAll("].val","))",n),n="ToAmount("+(n=replaceAll("=","==",n))+")",e){case"SUBTOTAL":var r=$("#dvFastForms #FFAmount"+t);break;case"SHIPPING":r=$("#dvFastForms #FFShipping"+t);break;case"TAXES":r=$("#dvFastForms #FFTaxes"+t);break;case"INITIALAMOUNT":r=$("#dvFastForms #FFRecurringFee"+t)}"undefined"==typeof jsep?i=new Function("return "+n)():i=CallEvaluateFunction(jsep(n));if("TAXES"==e){$(r).text(ToAmount($("#dvFastForms #FFAmount"+t,2).text()*(ToAmount(i,2)/100)));var o=$("#dvFastForms #FFPAYMENT"+t+", #dvFastForms #lblFFPAYMENT"+t).find(".ff-tax-percentage");void 0!=o&&parseFloat(i)>0?($(o).text(" ("+ToAmount(i,2)+"%)"),$(r).data("taxes",ToAmount(i,1))):($(o).text(""),$(r).data("taxes","0.00"))}else $(r).text(isNaN(i)?ToAmount(0,2):i.toFixed(2));UpdatePaymentTotals()},window.GetPaymentAmount=function(e,t){var a=document.getElementById(e.replace(/\\/g,""));if(null==t){if("SELECT"==$(a).prop("tagName")&&"undefined"!=$(a).attr("multiple")){var i=0,n="";return $("option:selected",a).each(function(){$.isNumeric($(this).val())?i+=ToAmount($(this).val()):n+=$(this).val()}),""!=n?n:ToAmount(i)}var r=$(a).val();return $.isNumeric(r)?ToAmount(r):r}if("SELECT"==$(a).prop("tagName")&&"undefined"==$(a).attr("multiple"))return ToAmount($("option:selected",a).attr("data-amount-"+t),2);if("SELECT"==$(a).prop("tagName")&&"undefined"!=$(a).attr("multiple")){i=0;return $("option:selected",a).each(function(){i+=ToAmount($(this).attr("data-amount-"+t))}),ToAmount(i)}return"BOOLEAN"==$(a).attr("data-vatt")&&$(a).is(":checked")?ToAmount($(a).attr("data-true-amount"+t),2):"BOOLEAN"!=$(a).attr("data-vatt")||$(a).is(":checked")?ToAmount($(a).attr("data-amount-"+t)):ToAmount($(a).attr("data-false-amount"+t),2)},Number.prototype.round=function(e){return e=e||10,parseFloat(this.toFixed(e))},window.GetValue=function(e){if(void 0!=e){var t=e;if("array"==jQuery.type(e)){t=0;for(var a=0;a<e.length;a++)t+=ToAmount(e[a])}return ToAmount(t)}return 0},window.GetElem=function(e){return"SELECT"==$(e).prop("tagName")?$("option:selected",e):e},window.ToAmount=function(e,t){return $.isNumeric(e)?parseFloat(e).round(t):void 0==e?parseFloat(0).round(t):e},window.escapeRegExp=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},window.replaceAll=function(e,t,a){return a.replace(new RegExp(escapeRegExp(e),"g"),t)},window.ValidatePayment=function(e){for(var t=0;t<e.length;t++){var a=$("#dvFastForms #"+e[t].paymentFieldId+", #dvFastForms #lbl"+e[t].paymentFieldId);if(e[t].success){if(""!=e[t].transactionIdField&&null!=e[t].transactionIdField){var i=$("#dvFastForms #"+e[t].transactionIdField.replace(/\./g,"\\."));i.length>0&&$(i).val(e[t].transactionIdValue)}if(""!=e[t].totalAmountField&&null!=e[t].totalAmountField){var n=$("#dvFastForms #"+e[t].totalAmountField.replace(/\./g,"\\."));n.length>0&&$(n).val(e[t].totalAmountValue)}}else if("stripe"==$("#dvFastForms #paymentType").val().toLowerCase()&&"requires_action"==e[t].stripePaymentResult.stripeStatus)fs.EH.setFormValid(!1),fs.SPH.renderStripeUI(e[t].stripePaymentResult.redirectUrl,e[t].stripePaymentResult.paymentIntentId,e[t].stripePaymentResult.paymentMethodID,e[t].transactionIdValue);else{var r=e[t].errorMessage;isNullOrEmpty(r)||"INVALID_COUNTRY"!=r||(r=ffPaymentError_InvalidCountry),void 0!==e[t].errorSource&&"FormCustom"==e[t].errorSource?(a=$("#dvFastForms #"+e[t].paymentFieldId.replace(/\./g,"\\.")),ShowValidationMessage($(a),"GENERAL",r)):ShowValidationMessage($(a),"PAYMENT",r),fs.EH.setFormValid(!1),$("#dvFastForms #btnsubmit").prop("disabled",!1)}}},window.formLogger=function(e){null!=window.formLoggerActive&&window.formLoggerActive&&console.log(e)},window.IsFormJSReady=function(){return null!=window.FS_FormConfiguration.JSReady&&window.FS_FormConfiguration.JSReady?(console.log("[FORM] [IsFormJSReady] TRUE "+window.FS_FormConfiguration.JSReady),!0):(console.log("[FORM] [IsFormJSReady] FALSE "+window.FS_FormConfiguration.JSReady),!1)},window.callbackFormJSReady=function(){console.log("[FORM] [callbackFormJSReady] "+window.FS_FormConfiguration.GetHTMLUrl),GetFormInfo()},"undefined"!=typeof module&&void 0!==module.exports)return{isSFNumeric:isSFNumeric,getDateOrDateTimeToSubmit:getDateOrDateTimeToSubmit,IsValidFormat:IsValidFormat,isValidDate:isValidDate,isValidDateTime:isValidDateTime,isValidationOff:isValidationOff}});
//# sourceMappingURL=../../../regularlight.map