<apex:page sidebar="false" controller="breadwinner_qbo.BreadwinnerController" id="page" tabStyle="Breadwinner__tab" action="{!initializeApp}" title="Breadwinner">
    <apex:form id="theForm">
        <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <head>
                <meta charset="utf-8" />
                <apex:slds />
                <script src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/JS/jquery-1.11.3.js')}"></script>
                <script src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/JS/Wistia_Video.js')}" type="text/javascript"></script>
                <script src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/JS/Wistia_Video1.jsonp')}" type="text/javascript" ></script>
                <apex:includeScript value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/JS/jsapi.js')}" />
                    
                    <script type="text/javascript">
                        var clicky_custom = clicky_custom || {};
                        clicky_custom.href = '/breadwinner-app/',
                        clicky_custom.title = 'Breadwinner App for {!$Organization.Id}',
                        clicky_custom.timer = 500;
                        clicky_custom.timeout = 10;
                        clicky_custom.cookies_disable = 0;
                        clicky_custom.queue_disable = 0;
                        clicky_custom.sticky_data_disable = 0;
                        clicky_custom.outbound_disable = 1;
                        clicky_custom.video_disable = 1;
                        clicky_custom.history_disable = 0;
                        clicky_custom.ping_disable = 1;
                        clicky_custom.pageview_disable = 0;
                        clicky_custom.osa_disable = 1;
                        clicky_custom.heatmap_disable = 1;
                        clicky_custom.visitor = {
                            lmo: "true",
                            org_id: "{!$Organization.Id}",
                            DaddyAnalytics: (new Date()).getTime() + "-" +(Math.floor(Math.random() * (9999999 - 1000000) )+ 1000000)
                        };
                </script>
                <script src="//hello.staticstuff.net/w/__stats.js" type="text/javascript"></script>
                <script type="text/javascript">
                    try{
                        if({!NOT(isConnectedWithQBO)}){
                            clicky.init(100547279);
                            console.log('sent');
                        } 
                    }
                catch(e){console.log(e);}
                </script>            
                <script>
                
                if(document.getElementsByTagName("title") && document.getElementsByTagName("title")[0]){
                    document.getElementsByTagName("title")[0].innerHTML="Breadwinner";
                }
                
                var j$ = jQuery.noConflict();
                j$(document).ready(function(){
                    console.log('script loaded');
                    //onTabEnterPushToInteractionLog('Breadwinner Home');
                    //checkSetupTabStepsCompletedFunc();
                    onTabEnterPushToInteractionLog('Setup');
                    if(!{!islayoutupdated})createRemoteSiteMetadata();
                    checkIfLayoutIsUpdated();
                    j$('.removeMeForSBDev').remove();// removing the subscribe path item for Develper/sandbox orgs to avoid css conflicts

                });
                
                function selectTab(elmnt) {
                    j$("#Breadwinner-Left-Menu ul").children(".slds-is-active").removeClass("slds-is-active");
                    j$(elmnt).parent("li").addClass("slds-is-active");
                    
                    j$("#breadwinner-right-content div.slds-show").addClass("slds-hide");
                    j$("#breadwinner-right-content div.slds-show").removeClass("slds-show");
                    
                    j$("#breadwinner-right-content").children("div[aria-labelledby='"+elmnt.id+"']").removeClass("slds-hide").addClass("slds-show");
                }
                function showHideNestedMenu(elmnt){
                    j$(elmnt).parent("li").children("ul").toggle();
                    j$(elmnt).parent("li").toggleClass("slds-section slds-is-open");
                }
                
                function HandleSearch(){
                    var findword=j$("#MenuSearchBox").val().toLowerCase();
                    j$( "#Breadwinner-Left-Menu ul li" ).hide();
                    var checkOpenedInnerTab=j$("li.slds-list__item.slds-section.slds-is-open.slds-is-active").length;
                    
                    if(findword.length > 0){
                        
                        j$( "h2.slds-text-title_caps" ).css( "display", "none" );
                        
                        j$( "#Breadwinner-Left-Menu ul li a" ).each(function( index ) {
                            var textreturned=j$( this ).text().toLowerCase()
                            //console.log(textreturned);
                            if(textreturned.indexOf(findword)>-1){
                                j$( this ).parents("li,ul").show();
                                j$( this ).parents("li").addClass("slds-section slds-is-open");
                                //console.log($( this ).parents());
                                
                            }
                            else{
                                j$( this ).parent("li,ul").hide();
                                if(checkOpenedInnerTab==0){
                                    j$( this ).parents("li").removeClass("slds-section slds-is-open");
                                }
                            }
                        });
                        
                    }
                    else{
                        j$( "#Breadwinner-Left-Menu ul li" ).show();
                        
                        if(checkOpenedInnerTab==0){
                            j$("#Breadwinner-Left-Menu").find("li.slds-section.slds-is-open ul").hide();
                            j$("#Breadwinner-Left-Menu").find("li.slds-section.slds-is-open").removeClass("slds-section slds-is-open");
                        }
                        j$( "h2.slds-text-title_caps" ).css( "display", "initial" );
                    }
                    
                }
                function SubTabsSelect(elmnt, QBOOrgId,BillOrPOorVendorCreditParam) {
                    // slds-active
                    j$(elmnt).parent("li").siblings(".slds-active").removeClass("slds-active");
                    j$(elmnt).parent("li").addClass("slds-active");
                    
                    // tabindex
                    j$(elmnt).parent("li").siblings().children("a").attr("tabindex", -1);
                    j$(elmnt).attr("tabindex", 0);
                    
                    // aria-selected
                    j$(elmnt).parent("li").siblings().children("a").attr("aria-selected", false);
                    j$(elmnt).attr("aria-selected", true);
                    
                    
                    if(BillOrPOorVendorCreditParam==='bill'){
                        BillPassQBOOrgId(QBOOrgId);
                    }
                    if(BillOrPOorVendorCreditParam==='Po'){
                        PoPassQBOOrgId(QBOOrgId);
                    }                    
                    else{
                        VendorCreditQBOOrgId(QBOOrgId);
                    }
                    
                }
                function queryappconfigdynamic(BillOrPOParam){
                    if(BillOrPOParam=='Bill'){
                        queryappconfigdynamicBill();
                    }
                    else{
                        queryappconfigdynamicPO();
                        
                    }
                    
                }
               
                function OnOffFunctionapexBPTab(isChecked,BillOrPOParam) {
                    if(BillOrPOParam=='Bills'){
                        BillsOnOffFunctionapexBPTab(isChecked);
                    }
                    else{
                        
                        POsOnOffFunctionapexBPTab(isChecked);
                    }
                    
                }
                function  OpenContactSupportTab(){
                    var SupportTabId="ContactSupport";
                    selectTab(document.getElementById(SupportTabId)); 
                    loadIframesfun('ContactSupportIframeDivId','{!breadwinnerSupportPortalURL}/support/tickets/new?{!contactSupportPrameters}');
                }
                function reRendercheckmarkSVGIcons(){
                   var imageURL = '';
                   var SVG;
                   var SVGUse;                 
                   imageURL = '{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}';
                   SVG = j$('<svg/>', {
                       class: 'slds-icon slds-icon_x-small',
                   });                    
                   
                   SVGUse = j$('<use/>');
                   SVGUse.attr('xlink:href',imageURL);
                   j$(".slds-path__stage").prepend(SVG.append(SVGUse));
                   j$(".slds-path__stage").html(j$(".slds-path__stage").html());
                   j$('.removeMeForSBDev').remove();
               }

                </script>
                <script type="text/javascript">
                
                var j$ = jQuery.noConflict();
                function HideStyleSheet(){
                    j$("link.user[href$='elements.css']").each(function(){
                        j$(this).removeAttr("href");
                    });
                }
                function message()
                {
                    j$(".infoM6, .infoM4, .infoM3, .infoM2, .infoS1").addClass("slds-notify slds-notify_alert slds-theme_inverse-text  slds-text-align_left slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px","justify-content": "left", "background":"rgba(84,105,141,.95)"} );
                    j$(".NoRecords").addClass("slds-notify slds-notify_alert slds-theme_inverse-text  slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px"} );
                    j$(".errorM6, .errorM4, .errorM3, .errorM2, .errorS1").addClass("slds-notify slds-notify_alert slds-theme_error  slds-text-align_left slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px"} );
                    j$(".warningM6, .warningM4, .warningM3, .warningM2, .warningS1").addClass("slds-notify slds-notify_alert slds-theme_warning  slds-text-align_left slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px","justify-content": "left","display":"block"} ) ;
                    j$(".confirmM6, .confirmM4, .confirmM3, .confirmM2, .confirmS1").addClass("slds-notify slds-notify_alert slds-theme_success slds-text-align_left slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px"} ) ;                 
                    
                    j$("div .messageText h4").css( {"color": "white","padding-right" : "2px"});
                    j$("div[class*='warning'] div.messageText h4").css( "color", "black" );
                    j$("table.messageTable td").css({"color" : "white"});
                    j$("div[class*='warning'] table.messageTable td").css( "color", "black" );
                    j$("select option:contains('Revenue Codes')").attr("disabled","disabled").css( {"color":"black","font-weight":"bold" });
                    j$("select option:contains('Liabilities and Expenses')").attr("disabled","disabled").css( {"color":"black","font-weight":"bold" });
                }
                
                function addallfuncs(){
                    HideStyleSheet();
                    message();
                }
                j$(function(){
                    addallfuncs();
                    addLinkDynamically();
                });
                function connectWithQBO(id)
                {
                     var e = document.getElementById(id);               
                    if(e.style.display== 'none')
                      e.style.display= 'block';
                      else
                      e.style.display= 'none';
                }
    
                // To load iframe onclick to reduce
                function loadIframesfun(iframeSectionId,iframeURL){
                    
                    // to clear div before we insert iframe
                    j$("#"+iframeSectionId).empty();
                    
                    // to create iframe element
                    if(iframeURL.length>0){
                        var para = document.createElement("iframe");
                        para.setAttribute("src", iframeURL);
                        para.setAttribute("height","800px");
                        para.setAttribute("width","100%");
                        
                        // injecting iframe to refereced div
                        document.getElementById(iframeSectionId).appendChild(para);
                    }
                }

                function refreshStatusLogs(){
                    j$("#table_div").empty();
                    j$("#message").empty();
                }
                
                function ShowDifferences(){
                    j$("#DifferenceSection").show();
                    j$("body.sfdcBody").css({"overflow" : "hidden"});
                }
                function getSaccountCodeMappingName(){
                    sendtoController(j$("[id$=accountCodeMapping]").find('option:selected').text());
                }
                function showHideSectionConent(titledivsectionId, ImageDivId){
                    var sectiondiv=document.getElementById(titledivsectionId);
                    
                    if(j$(sectiondiv).hasClass("slds-is-open")){
                        j$(sectiondiv).removeClass("slds-is-open");
                        j$("#"+ImageDivId).attr("src","{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/SectionClose.png')}");
                        j$("#"+ImageDivId).css({"margin-bottom":"3px", "margin-right":"4px", "width":"14px"});
                    }
                    else{
                        j$(sectiondiv).addClass("slds-is-open");
                        j$("#"+ImageDivId).attr("src","{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/SectionOpen.png')}");
                        j$("#"+ImageDivId).css({"margin-bottom":"0px", "margin-right":"3px", "width":"15px"});
                    }
                }
                function identifyfield(elementt,helptext,TopMinusParam,LeftMinusParam){
                    if(j$(".bPageHeader").outerHeight(true)==null){
                        LeftMinusParam=LeftMinusParam-9;
                        TopMinusParam=TopMinusParam-100;
                    }
                    var x = j$(elementt).offset();
                    //alert("Top position: " + x.top + " Left position: " + x.left+" height: "+$(elementt).height());
                    var ToSetleft=x.left-LeftMinusParam;
                    j$("#help p").text(helptext);
                    var ToSetheight=x.top-TopMinusParam;
                    var heptextdiv=document.getElementById("help");
                    j$(heptextdiv).css({
                        top: ToSetheight + 'px',
                        left: ToSetleft + 'px',
                        display:""
                    }) 
                    
                }
                function mouseoutclose(){
                    var heptextdiv=document.getElementById("help");
                    j$(heptextdiv).css({top:"0px",left:"0px",display:"none"});
                }
                function addLinkDynamically(){
                    // adding links by identifying UX change the URLs
                    var windowparentlocation=String(window.location);
                    var getindex=windowparentlocation.search("sfdcIFrameOrigin=");
                    var resultedOpptyFieldsURL='{!$Site.BaseUrl}';
                    var resultedOpptyProdFieldsURL='{!$Site.BaseUrl}';
                    if(parseInt(getindex)>-1){
                        resultedOpptyFieldsURL+='/one/one.app?source=aloha#/setup/object/Opportunity/all/FieldsAndRelationships';
                        resultedOpptyProdFieldsURL+='/one/one.app?source=aloha#/setup/object/OpportunityLineItem/all/FieldsAndRelationships';
                    }
                    else{
                        resultedOpptyFieldsURL+='/p/setup/layout/LayoutFieldList?type=Opportunity&setupid=OpportunityFields';
                        resultedOpptyProdFieldsURL+='/p/setup/layout/LayoutFieldList?type=OpportunityLineItem&setupid=OpportunityLineItemFields';
                    }
                    //opptyFieldsLink
                    if(document.getElementById("opptyFieldsLink"))
                        document.getElementById("opptyFieldsLink").href=resultedOpptyFieldsURL;
                    
                    //opptyProdFieldsLink
                    if(document.getElementById("opptyProdFieldsLink"))
                        document.getElementById("opptyProdFieldsLink").href=resultedOpptyProdFieldsURL;
                }
                function scrolltoTop()
                {
                    window.scrollTo(0,0);
                }
                function hidereadonlymodesection(){
                    j$('#DifferenceSection').hide();
                }
                </script>
                <style>
                    .slds-scope {
                    overflow-x: hidden;
                    overflow-y: auto;
                    }
                    
                    .progress-bar {
                    background-color: aliceblue;
                    height: 25px;
                    padding: 3px;
                    width: 80%;
                    margin: 5px ;         
                    border-radius: 5px;
                    box-shadow: 0 1px 5px #000 inset, 0 1px 0 #444;           
                    }
                    
                    .progress-bar span {
                    background-color: dodgerblue;   
                    display: inline-block;
                    height: 100%;
                    border-radius: 3px;
                    box-shadow: 0 1px 0 rgba(255, 255, 255, .5) inset;
                    transition: width .4s ease-in-out;    
                    }
                    .slds-text-heading_medium{ padding:5px; }
                    .slds-scope a {
                    text-decoration: underline;
                    }
                    .message {
                    background-color: inherit;
                    border-style: none;
                    padding:initial;
                    margin-left: 0px !important;
                    margin-right: 0px !important;
                    }
                    .msgIcon{
                    display:none;
                    }                    
                    .slds-scope .slds-table .messageTable td {
                     padding: 1px;
                     border-top: 0px;!important; 
                     }
                    .message .messageText h4 {
                    font-weight: inherit;
                    display: initial;
                    }
                    .slds-table td img {
                    max-width: initial;
                    height:initial;
                    }
                    .slds-scope .slds-table td{
                        white-space: normal;
                    }
                    
                    table.google-visualization-table-table td:nth-child(4) {
                        word-break: break-word;
                    }
                    table.google-visualization-table-table td:nth-child(5) {
                        white-space: nowrap; 
                    }
                    html body.sfdcBody {
                        padding-top: 0px;
                    }
                    .slds-scope .slds-spinner_container{
                        position: fixed;
                        z-index: 9999;
                    }
                    iframe {
                        border: 0px;
                    }
                    .BredwinnerHomeClass .slds-scope .slds-text-align_left{
                        text-align:center;
                    }
                    table.bhometable td{
                        padding-bottom: 5px;
                    }
                    
                    .slds-scope .readOnlyMode .slds-checkbox_toggle .slds-checkbox_faux{
                        width: 7.3rem;
                        background-color: #30A256;
                    }
                    .slds-scope .readOnlyMode .slds-checkbox_toggle .slds-checkbox_faux:focus, .slds-scope .readOnlyMode .slds-checkbox_toggle .slds-checkbox_faux:hover{
                        background-color: darkgreen;
                    }

                    .slds-scope .readOnlyMode .slds-checkbox_toggle .slds-checkbox_faux:before{
                        position: absolute;
                        transform: rotate(0deg);
                        border-left: 2px;
                        border-right: 0px;
                        border-bottom: 0px;
                        bottom: 3px;
                        right: 0rem;
                        width: 5.6rem;
                        border-radius: 0;
                        background-color: transparent;
                        content: 'Read Only Mode';
                        color: white;
                    }
                    .slds-scope .readOnlyMode .slds-checkbox_toggle [type=checkbox]:checked+.slds-checkbox_faux:after, 
                    .slds-scope .readOnlyMode .slds-checkbox_toggle [type=checkbox]:checked+.slds-checkbox_faux_container .slds-checkbox_faux:after, 
                    .slds-scope .readOnlyMode .slds-checkbox_toggle [type=checkbox]:checked~.slds-checkbox_faux:after{
                        position: absolute;
                        transform: rotate(0deg);
                        border-left: 2px;
                        border-bottom: 0px;
                        border-right: 0px;
                        left: .6rem;
                        width: 6rem;
                        border-radius: 0;
                        background-color: transparent;
                        content: 'Active Mode';
                        color: white;
                    }
                    div[id$='ReadOnlyModeSection'] {
                        margin-left: -5.4rem;
                    }
                    @media only screen and (max-width: 1400px) {
                        div[id$='ReadOnlyModeSection'] {
                            margin-left: -3.4rem;
                        }
                    }
                    .wistia_embed{
                        align:center;
                    }
                    .slds-text-body_small {
                        font-size: .75rem;
                        color: #54698d;
                    }
                    .slds-scope .slds-page-header{
                        border:0px;
                        border-bottom: 1px solid #d8dde6;
                        background: #f7f9fb;
                        padding: 0.5rem !important;
                    }
                    .slds-scope .slds-page-header__title{
                        font-weight: normal;
                    }
                    .slds-scope .slds-media_center{
                        margin: 0.50rem;
                    }
                    .slds-scope .slds-tabs_default__item.slds-active .slds-tabs_default__link{
                        font-weight: normal;    
                    }
                    .slds-scope .slds-section-title_divider{
                        background: #f4f6f9;
                    }
                    .slds-scope .slds-section__title-action{
                        background: #f4f6f9;
                    }
                    .slds-scope .slds-tabs_default__item.slds-active .slds-tabs_default__link{
                        text-decoration: none;
                    }
                    .noSidebarCell, .sidebarCell .fixed{
                        padding: 0px !important;
                    }
                    .sfdcBody{
                        padding: 0px !important;
                    }
                    .nohover:hover {
                        box-shadow: initial !important
                    }
                    .slds-scope .slds-path__nav .slds-is-complete{
                        background: rgb(75, 202, 129);
                    }
                    .slds-scope .slds-path__nav .slds-is-active{
                        background: rgb(0, 95, 178);
                    }
                    .slds-scope .slds-path__nav .slds-is-complete:before, .slds-scope .slds-path__nav .slds-is-complete:after{
                    background: rgb(75, 202, 129);
                    }
                    
                    .slds-scope .slds-path__nav .slds-is-active:before, .slds-scope .slds-path__nav .slds-is-active:after {
                    background: rgb(0, 95, 178);
                    }
                    
                    /*completed Element*/
                    .slds-scope .slds-path__nav .slds-is-complete:hover{
                    background:rgb(4, 132, 75);
                    }
                    .slds-scope .slds-path__nav .slds-is-complete:hover:before, .slds-scope .slds-path__nav .slds-is-complete:hover:after{
                    background: rgb(4, 132, 75);
                    }
                    .slds-scope .slds-path__nav .slds-is-complete:before, .slds-scope .slds-path__nav .slds-is-complete:after{
                    background: rgb(75, 202, 129);
                    }
                    /*Active elements*/
                    
                    .slds-scope .slds-path__nav .slds-is-active:hover{
                    background:rgb(0, 57, 107);
                    }
                    
                    .slds-scope .slds-path__nav .slds-is-active:hover:before, .slds-scope .slds-path__nav .slds-is-active:hover:after{
                    background: rgb(0, 57, 107);
                    }
                </style>
            </head>
            <body>
                <div class="slds-scope slds-p-vertical_x-small" style="background-color:white;">
                    <apex:actionStatus id="assign-action-status" layout="block">
                        <apex:facet name="start">
                            <div class="slds-spinner_container">
                                <div class="slds-spinner_brand slds-spinner slds-spinner_medium" role="alert">
                                    <span class="slds-assistive-text">Loading</span>
                                    <div class="slds-spinner__dot-a"></div>
                                    <div class="slds-spinner__dot-b"></div>
                                </div>
                            </div>
                        </apex:facet>
                    </apex:actionStatus>
                    <!--SLDS modal start-->
                    <div >
                        <div class="slds-modal slds-modal_x-small" aria-hidden="false" role="dialog" id="disconnectmodal">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <h2 class="slds-text-heading_medium">Disconnect QuickBooks Online Org</h2>
                                </div>
                                <div class="slds-modal__content slds-p-around_medium">
                                    <p>Are you sure to disconnect from QuickBooks Online?<br/>Please note that disconnecting this will not delete any data in Salesforce. All the imported Invoices, Accounts, {!IF(AND(isBusinessOrHigher,isBillorPOEnabled),IF(AND(appConfig.Sync_POs__c,appConfig.Sync_Bills__c),' Bills and POs,',IF(appConfig.Sync_Bills__c,' Bills,',IF(appConfig.Sync_POs__c,' POs',''))),'')} QuickBooks Online Companies will remain in Salesforce.
                                    </p>
                                    <div align="right" style="margin-top: 1rem;">
                                        <apex:commandLink id="okaybutton" styleClass="btns slds-button slds-button_brand" value="OK" action="{!disconnectQBO}" rendered="{!AND(NOT(isOrgOutOfSync), NOT(allowDisconnecting))}"/>
                                        <apex:commandLink id="okaybutton2" styleClass="btns slds-button slds-button_brand" value="OK" action="{!deleteAppConfig}" rendered="{!allowDisconnecting}"/>
                                        <apex:commandLink id="okaybutton1" styleClass="btns slds-button slds-button_brand" value="OK" rendered="{!isOrgOutOfSync}" onclick="cancelDisc();" reRender="nothing"/>

                                        <apex:commandbutton id="cancelbutton" styleClass="btns slds-button slds-button_neutral slds-m-left_xx-small" value="Cancel" onclick="cancelDisc();" rendered="{!NOT(isOrgOutOfSync)}" reRender="nothing"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop" id="backdrop"></div>
                    </div>
                    <Script>
                        function cancelDisc(){
                            j$('#backdrop').removeClass('slds-backdrop--open');
                            j$('#disconnectmodal').removeClass('slds-fade-in-open');
                        }

                        function showDiscModal(){
                            j$('#backdrop').addClass('slds-backdrop--open');
                            j$('#disconnectmodal').addClass('slds-fade-in-open');
                        }  
                        function CustomerMatchpopup(){
                            j$("#disconnectmodal h2").text('Restarting Historical Syncs ');
                            j$("#disconnectmodal p").text('Breadwinner Sync is successfully restarted!');
                            j$('#backdrop').addClass('slds-backdrop--open');
                            j$('#disconnectmodal').addClass('slds-fade-in-open');
                        }
                    </Script>
                    <!--Modal End-->
                    <div class="slds-grid slds-flex" style="flex-wrap: wrap;">
                        <div class="slds-p-horizontal_x-small slds-size_1-of-1 slds-medium-size_1-of-6 slds-large-size_2-of-12" style="border-right: 1px solid gray;" >
                            <div class="slds-align_absolute-center slds-m-around_large">
                                <img src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/BreadwinnerLogo.png')}" alt="Breadwinner Logo" />
                            </div>
                            <hr style="margin: 0.5rem 0;border-top-color: gray;"/>
                            <!-- div class="slds-form-element slds-m-bottom--medium slds-m-top--medium">
                                <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left">
                                    <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default">
                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#search')}"></use>
                                    </svg>
                                    <input id="MenuSearchBox" class="slds-input" onkeyup="HandleSearch();" type="text" placeholder="Quick Find" autocomplete="off" />
                                </div>
                            </div -->
                            <div id="Breadwinner-Left-Menu" class="slds-grid slds-grid_vertical slds-navigation-list_vertical">
                                                            <!-- ----
                            <ul>
                            <li class="slds-is-active"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('BreadwinnerHome');" style="padding-left: 11px;font-size: 0.85rem;" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="BreadwinnerHome" title="Breadwinner Home" >Breadwinner Home</a></li>
                            </ul>
                            -- - -->
                            <apex:actionFunction name="rerenderQBOCompanysection" reRender="saveCompanyConfig" />
                            <apex:actionFunction name="queryappconfigdynamicBill" action="{!MultiOrgChanging}" status="assign-action-status" reRender="PoMenuFieldsSectionId,PosWholePanel,POsContentHeader,POsContent" oncomplete="HideStyleSheet();message();addLinkDynamically();">
                                <apex:param name="BillPassQBOOrgIdParam" value="" assignTo="{!orgIdValue}"/>
                                <apex:param name="bill" value="true" assignTo="{!isBillSection}"/>

                            </apex:actionFunction>
                            <apex:actionFunction name="queryappconfigdynamicPO" action="{!MultiOrgChanging}" status="assign-action-status" reRender="PoMenuFieldsSectionId,PosWholePanel,POsContentHeader,POsContent" oncomplete="HideStyleSheet();message();addLinkDynamically();">
                                <apex:param name="BillPassQBOOrgIdParam" value="" assignTo="{!orgIdValue}"/>
                                <apex:param name="bill" value="false" assignTo="{!isBillSection}"/>
                            </apex:actionFunction>
                             <apex:actionFunction name="EmailActionFunction"  status="assign-action-status" reRender="EmailsContent,EmailConfig" oncomplete="HideStyleSheet();message();addLinkDynamically();" ></apex:actionFunction>
                                <h2 class="slds-text-title_caps slds-p-around_medium" id="SETUPANDCONFIG">SETUP AND CONFIG</h2>
                                <apex:outputPanel >
                                    <ul>
                                        <li class="slds-is-active slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);checkSetupTabStepsCompletedFunc(); onTabEnterPushToInteractionLog('Setup'); checkIfLayoutIsUpdated();" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="Setup"  title="Setup" >Setup</a></li>
                                    </ul>
                                </apex:outputPanel>
                                <apex:outputPanel id="all">
                                                               
                                <apex:outputPanel rendered="{!AND(listAppConfig!=null,listAppConfig.size>0, isAdministrator)}">
                                    <ul>
                                        <li>
                                            <a href="javascript:void(0);" style="padding-left: 0px;" onclick="showHideNestedMenu(this);" class="slds-truncate slds-nav-vertical__action slds-text-link_reset nohover" id="Configuration" title="Configuration">
                                                <svg aria-hidden="true" class="slds-section__title-action-icon slds-button__icon slds-button__icon_left">
                                                    <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#switch')}"></use>
                                                </svg>
                                                Configuration
                                            </a>
                                            <ul class="slds-list_vertical slds-has-block-links slds-is-nested" style="display: none;">
                                                <li class="slds-nav-vertical__item">
                                                    <a href="javascript:void(0);" onclick="loadIframesfun('InvoiceConfigIframeDivId','{!$Page.OptionalSettings}');selectTab(this);onTabEnterPushToInteractionLog('Invoice Configuration');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="InvoiceConfiguration"  title="Invoices">
                                                        Invoices
                                                    </a>
                                                </li>
                                                <li class="slds-nav-vertical__item" style="display:{!if(isBusinessOrHigher,'Block','None')}"><a href="javascript:void(0);" onclick="queryappconfigdynamic('Bill');selectTab(this);onTabEnterPushToInteractionLog('Bills Configuration');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="POsContent" title="Bills">Bills</a></li>
                                                <li class="slds-nav-vertical__item" style="display:{!if(isBusinessOrHigher,'Block','None')}"><a href="javascript:void(0);" onclick="queryappconfigdynamic('PO');selectTab(this);onTabEnterPushToInteractionLog('Pos Configuration');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="POsContent" title="Purchase Orders">POs</a></li>

                                                <!--li class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Vendor Credits Configuration');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="VendorCreditsContent" title="Vendor Credits">Vendor Credits</a></li-->

                                                <li class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('QuickBooks Online Company Configuration');rerenderQBOCompanysection()" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="QBOCompaniesContent" title="QBO Companies">QBO Companies</a></li>

                                                 <li class="slds-nav-vertical__item" style="display:{!if(isBusinessOrHigher,'Block','None')}"><a href="javascript:void(0);" onclick="EmailActionFunction();selectTab(this);onTabEnterPushToInteractionLog('Emails Configuration');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="EmailsContent" title="Emails">Emails</a></li>
                                            </ul>
                                        </li>                                    
                                    </ul>
                                </apex:outputPanel> 
                                </apex:outputPanel>    
                                    <!--  <apex:outputPanel rendered="{!isAdministrator}"> -->
                                    <h2 class="slds-text-title_caps slds-p-around_medium" id="TOOL" style="color:solid black;">TOOLS</h2>
                                    <ul>
                                        <li style="display:BLOCK;" class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="loadIframesfun('ADMIN-24','{!$page.AddressSync}');selectTab(this);onTabEnterPushToInteractionLog('Address Sync');"  class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="AddressSync" title="Address Sync" >Address Sync</a></li>
                                    </ul>           
                                    <apex:outputPanel rendered="{!AND(isChargentInstalled, isAdministrator, isConnectedWithQBO)}">
                                        <ul>
                                            <li class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="loadIframesfun('ChargentIframeDivId','{!$Page.TransactionSyncSetup}');selectTab(this);onTabEnterPushToInteractionLog('Chargent');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="Chargent"  title="Chargent Settings" >Chargent Settings</a></li> 
                                        </ul>
                                    </apex:outputPanel>
                          <!--      </apex:outputPanel> -->
                                <h2 class="slds-text-title_caps slds-p-around_medium" id="LEARN">LEARN</h2>
                                <ul>
                                    <li class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('University');" class="slds-nav-vertical__action slds-text-link_reset" id="University" title="University" >University</a></li>
                                    <li class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="loadIframesfun('KnowledgeBaseIframeDivId','{!breadwinnerSupportPortalURL}/support/home');selectTab(this);onTabEnterPushToInteractionLog('KnowledgeBase');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="KnowledgeBase" title="Knowledge Base" >Knowledge Base</a></li>
                                    <li class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="loadIframesfun('ContactSupportIframeDivId','{!breadwinnerSupportPortalURL}/support/tickets/new?{!contactSupportPrameters}');selectTab(this);onTabEnterPushToInteractionLog('Support');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="ContactSupport" title="Contact Support">Contact Support</a></li>
                                </ul>
                                <h2 class="slds-text-title_caps slds-p-around_medium" id="ADMIN">ADMIN</h2>
                                <ul>
                                    <li class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Billing');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="Billing" title="Billing" >Billing</a></li>

                                    <li><a href="javascript:void(0);" style="padding-left: 0px;" onclick="showHideNestedMenu(this);" class="slds-truncate slds-nav-vertical__action slds-text-link_reset nohover" id="Troubleshoot" title="Troubleshoot">
                                        <svg aria-hidden="true" class="slds-section__title-action-icon slds-button__icon slds-button__icon_left">
                                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#switch')}"></use>
                                        </svg>
                                        Troubleshoot
                                        </a>
                                        <ul class="slds-list_vertical slds-has-block-links slds-is-nested" style="display:none;">
                                            <li class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="loadIframesfun('TroubleshootIframeDivId','{!$Page.TroubleshootingPage}');selectTab(this);onTabEnterPushToInteractionLog('Troubleshooting');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="Troubleshooting" title="Troubleshooting" >Troubleshooting</a></li>
                                            <li class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="refreshStatusLogs();selectTab(this);onTabEnterPushToInteractionLog('Status Log');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="StatusLogs" title="Status Logs">Status Logs</a></li>
                                        </ul>
                                    </li>
                                </ul>
                                <apex:outputPanel rendered="{!AND(AppConfigList != null, AppConfigList.size>0)}">
                                    <ul>
                                        <li class="slds-nav-vertical__item"><a href="javascript:void(0);" onclick="loadBreawinnerHomePage();selectTab(this);onTabEnterPushToInteractionLog('BreadwinnerHome');" style="color: #f3f3f3;" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="BreadwinnerHome" title="Home (Beta)" >Home (Beta)</a></li>
                                    </ul>
                                </apex:outputPanel>
                            </div>
                        </div>
                        <div class="slds-size_1-of-1 slds-medium-size_5-of-6 slds-large-size_10-of-12">
                            <div id="breadwinner-right-content">
                                <div id="BreadwinnerHome-TAB" class="slds-hide" aria-labelledby="BreadwinnerHome">
                                    <!-- -----------------------------BreadwinnerHome Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                    <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#home')}"></use>
                                                </svg>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Welcome to Breadwinner (Beta)">Welcome to Breadwinner (Beta)</p>
                                                <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------BreadwinnerHome Tab header END ---------------------------->
                                    <div class="BredwinnerHomeClass slds-m-horizontal_x-small slds-m-top_medium">
                                        <apex:actionFunction name="loadBreawinnerHomePage" action="{!loadBreadwinnerHomeSection}" reRender="BreadwinnerHomeWholePanel" oncomplete="addallfuncs();" />
                                        <apex:outputPanel id="BreadwinnerHomeWholePanel">
                                            <apex:pagemessage summary="You have an active, valid subscription to Breadwinner." severity="CONFIRM" strength="3"  rendered="{!IF(orgStatus =='subscribed', true, false)}"/>
                                            <apex:pagemessage summary="Your fully-featured free trial has been activated." severity="CONFIRM" strength="3"  rendered="{!IF(orgStatus =='trial', true, false)}"/>
                                            <apex:pagemessage summary="Your trial/subscription has expired." severity="ERROR" strength="3"  rendered="{!IF(orgStatus =='expired', true, false)}"></apex:pagemessage>

                                            <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;color: black;" rendered="{!isOrgOutOfSync}" >
                                                Breadwinner is not able to sync your QuickBooks Online data, there could be some validations or triggers on your Account or Opportunity which are causing the issue, please check for errors in Status Log Section, or 
                                                please&nbsp;<apex:commandLink style="color:black;" action="{!restartHistoricalTotalSync}" status="assign-action-status" oncomplete="CustomerMatchpopup();">click here to restart Sync</apex:commandLink>.
                                            </apex:outputPanel>                                     
                                            
                                            
                                            <!-- need to add permision set info in future -->
                                            
                                            <!-- need to add Duplicate Invoices info in future -->
                                            
                                            <!-- need to add Breadwinner Jobs info in future -->
                                            
                                            <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;" rendered="{!isOAuthIssue}">
                                                Please Reconnect to 
                                                <apex:variable value="{!0}" var="count">
                                                <apex:repeat value="{!AppConfigList}" var="apc">
                                                    
                                                    <apex:outputPanel rendered="{!apc.needToReconnect}">
                                                        <apex:variable value="{!count+1}" var="count"/>
                                                        {!IF(count>1,',','')}{!apc.Connecting_App_Name}</apex:outputPanel>
                                                </apex:repeat>
                                                    {!IF(count>1,'Orgs','Org')} from Setup.
                                                </apex:variable>
                                            </apex:outputPanel>
                                            <!-- apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;" rendered="{!!isScheduledJobsRunningUnderActiveUser}">
                                                Breadwinner Jobs are running under Inactive user. Please click <a href="javascript:void(0);" style="color:black" onclick="restartJobsUnderActiveUser();">here</a> to restart.
                                                <apex:actionFunction name="restartJobsUnderActiveUser" status="assign-action-status" action="{!runScheduledJobsUnderActiveUser}" rerender="BreadwinnerHomeWholePanel" oncomplete="addallfuncs();"/>
                                            </apex:outputPanel -->
                                            <apex:pagemessage summary="There are {!UnmatchedQBOCompaniesCount} QuickBooks Online Companies that are not associated with Salesforce Accounts. Please associate them from Setup." severity="warning" strength="3" rendered="{!AND(UnmatchedQBOCompaniesCount>0,OR(isAccountSyncDone,isVendorSyncDone))}" ></apex:pagemessage>
                                            
                                            <apex:pagemessage summary="It looks like there are a few duplicate Invoices created in Salesforce with Invoice numbers, {!duplicateInvoicesString}. Please review them and delete or contact support." severity="warning" strength="3" rendered="{!duplicateInvoicesString!=null}" ></apex:pagemessage>
                                           
                                            <div class="slds-grid slds-wrap">
                                            <apex:variable value="{!0}" var="OrgsCount">
                                            <apex:repeat value="{!AppConfigList}" var="apc">
                                            <div class="slds-box slds-m-top_small slds-m-horizontal_x-small">
                                                <h3 class="slds-section__title">{!apc.Connecting_App_Name}</h3>
                                                <table class="slds-m-top_small bhometable">
                                                    <tr>
                                                        <!-- <apex:outputtext value=" {!apc.Customer_Last_Sync_DateTime}"/> Please Don't remove space in value of outputtext, trick used to show dates in user timezone --> 
                                                        <td class="slds-text-color_weak" >Customers last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Customer_Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                     <tr>
                                                        <td class="slds-text-color_weak">Invoices last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                    <tr style="display:{!IF(apc.syncSalesReceipts,'','none')}">
                                                        <td class="slds-text-color_weak">Sales Receipts last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Sales_Receipt_Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                    <tr style="display:{!IF(apc.syncSalesReceipts,'','none')}">
                                                        <td class="slds-text-color_weak">Refund Receipts last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Refund_Receipt_Last_Sync_DateTime}"/></td>
                                                    </tr>                                                   
                                                    <tr>
                                                        <td class="slds-text-color_weak">Payments last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Payment_Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                    <tr style="display:{!IF(AND(isBusinessOrHigher,OR(apc.Sync_POs,apc.Sync_Bills)),'','none')}">
                                                        <td class="slds-text-color_weak">Vendors last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Vendor_Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                    <tr style="display:{!IF(AND(isBusinessOrHigher,apc.Sync_Bills),'','none')}">
                                                        <td class="slds-text-color_weak">Bills last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Bill_Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                    <tr style="display:{!IF(AND(isBusinessOrHigher,apc.Sync_POs),'','none')}">
                                                        <td class="slds-text-color_weak">POs last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.PO_Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                    <tr style="display:{!IF(AND(isBusinessOrHigher,apc.Sync_Bills),'','none')}">
                                                        <td class="slds-text-color_weak">Bill Payments last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Bill_Payment_Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                </table>
                                            </div>
                                                <apex:variable value="{!OrgsCount+1}" var="OrgsCount"/>
                                            </apex:repeat>
                                            </apex:variable>
                                            
                                        </div>
                                        
                                        </apex:outputPanel>
                                    </div>
                                    
                                    
                                </div>
                                
                                <div id="SetupAndConfig-TAB1" class="slds-show" aria-labelledby="Setup">
                                    <!-- -----------------------------Setup Tab header start ---------------------------->
                                    <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon-custom-custom3" title="Setup">
                                                    <svg aria-hidden="true" class="slds-icon">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/custom-sprite/svg/symbols.svg#custom3')}"></use>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Breadwinner Setup">Setup</p>
                                                <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------Setup Tab header END ---------------------------->
                                    <apex:outputPanel layout="block" styleClass="slds-m-horizontal_small">
                                        <apex:pagemessages id="pgmsgtag"/>
                                    </apex:outputPanel>
                                   <div id="SetupDivId">
                                    <div class="slds-m-horizontal_x-small">
                                        <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;color: black;" rendered="{!(orgStatus =='expired')}">
                                            Your trial/subscription has expired. Please contact sales@breadwinner.com<span style="display:{!IF(OR(isDeveloperOrg,isSandbox),'none','inline')}">, or please contact your Account Executive.</span>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!isOrgOutOfSync}" layout="block" styleClass="warningM3" style="border-radius:4px;color: black;" >
                                            Breadwinner is not able to sync your QuickBooks Online data, there could be some validations or triggers on your Account or Opportunity which are causing the issue, please check for errors in Status Log Section, or 
                                            please&nbsp;<apex:commandLink style="color:black;" action="{!restartHistoricalTotalSync}" status="assign-action-status" oncomplete="CustomerMatchpopup();">click here to restart Sync</apex:commandLink>.
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;color: black;" rendered="{!!isAdministrator}">
                                                You must be a Salesforce System Administrator to modify setup information.
                                        </apex:outputPanel>
                                    </div>
                                    
                                    <!---------------------------------- Differece between read only and active mode starts---------------->
                                    <script>
                                      j$('#SetupDivId').click (function (e) {
                                         if((j$(e.target).is('#DifferenceSection') ) ||  (j$(e.target).is('#LinkId') )){
                                             if( j$('#DifferenceSection').css('display') != 'none' ){
                                                 j$('#DifferenceSection').hide();
                                                 j$("body.sfdcBody").css({"overflow" : ""});
                                             }
                                                                                                
                                         }
                                     });
                                    </script>
                                    <div id="DifferenceSection" style="display:none;overflow:auto" onclick="">
                                           <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                                               <div class="slds-modal__container" style="max-width:50%">
                                                   <header class="slds-modal__header">
                                                       <button class="slds-button slds-button_icon-inverse slds-modal__close" type="button" onclick="hidereadonlymodesection();">
                                                           <svg aria-hidden="true" class="slds-button__icon slds-button__icon_large" >
                                                               <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/action-sprite/svg/symbols.svg#close')}" ></use>
                                                           </svg>
                                                           <span class="slds-assistive-text">Close</span>
                                                       </button>
                                                       <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate slds-m-top_x-small"><b>Whatâ€™s the difference between Read Only and Active Mode?</b></h2>
                                                   </header>
                                                   <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                                       <p style="padding-bottom:2%" align="left">
                                                           In Read Only Mode, no matter what you do with Breadwinner, nothing will change in QuickBooks Online. Breadwinner reads from QuickBooks Online and updates back to Salesforce, but Breadwinner does not edit, create, or delete anything in QuickBooks Online.
                                                       </p>
                                                       <table class="slds-table slds-table_bordered slds-table_col-bordered">
                                                           <thead class="slds-text-title_caps">
                                                               <tr scope="col">
                                                                   <th></th>
                                                                   <th><b>Read Only Mode</b></th>
                                                                   <th><b>Active Mode</b></th>
                                                               </tr>
                                                           </thead>
                                                           <tbody>
                                                               <tr>
                                                                   <td><b>Clicking â€œNew Invoiceâ€ in Breadwinner</b></td>
                                                                   <td>No Invoice will be created in QuickBooks Online.</td>
                                                                   <td>After confirming data to be created, Invoice created in QuickBooks Online.</td>
                                                               </tr>
                                                               <tr>
                                                                   <td><b>Clicking â€œCreate a new QuickBooks Online Company (Customer/Vendor)â€</b></td>
                                                                   <td>No Company (Customer/Vendor) will be created in QuickBooks Online.</td>
                                                                   <td>After confirming data, new Company (Customer/Vendor) created in QuickBooks Online.</td>
                                                               </tr>
                                                               <tr>
                                                                   <td><b>Clicking â€œEdit QuickBooks Online Customerâ€</b></td>
                                                                   <td>The QuickBooks Online Customer will not be edited.</td>
                                                                   <td>The QuickBooks Online Customer will be edited.</td>
                                                               </tr>
                                                               <tr>
                                                                   <td><b>Adding or Editing an Invoice directly in QuickBooks Online</b></td>
                                                                   <td colspan="2">That Invoice will be replicated over to Salesforce/Breadwinner within the hour.</td>
                                                               </tr>
                                                               <tr>
                                                                   <td><b>Adding a QuickBooks Online Customer directly in QuickBooks Online</b></td>
                                                                   <td colspan="2">Breadwinner will attempt to match the new QuickBooks Online Customer to a Salesforce Account, but if Breadwinner cannot match one, it will create a new Salesforce Account.</td>
                                                               </tr>
                                                               <tr>
                                                                   <td><b>Editing a QuickBooks Online Customer directly in QuickBooks Online</b></td>
                                                                   <td colspan="2">Breadwinner updates the QuickBooks Online Customer record in Breadwinner within the hour, but no changes will be made to the Salesforce Account.</td>
                                                               </tr>
                                                           </tbody>
                                                       </table>
                                                       <div>
                                                           <h1 align="center" class="slds-text-heading_medium" style="padding-top:1%;padding-bottom:1%">
                                                               <b>Things Breadwinner will Never Do in Either Mode</b>
                                                           </h1>
                                                           <p align="left">
                                                               <span class="slds-text-heading_small">Breadwinner, for financial security and data integrity, will never:</span><br/>
                                                               Create or Edit Credit Memos or Refund Receipts<br/>
                                                               Edit an existing Invoice or Sales Receipt once created.<br/>
                                                           </p>
                                                       </div>
                                                   </div>
                                               </div>
                                           </section>
                                           <div class="slds-backdrop slds-backdrop_open"></div>
                                       </div>         
                                            <!----Difference between read only and active mode ends-->
                                    
                                    <div>
                                        <table class="slds-m-top_medium slds-p-horizontal_x-small slds-table slds-table_bordered slds-max-medium-table_stacked slds-no-row-hover" cellpadding="0" cellspacing="0" border="0" style="border-top:  0px;">
                                            <tr>
                                                <td colspan="3" class="slds-text-heading_medium"  style="border-top-color:white;">
                                                    <div class="slds-p-bottom_medium">
                                                        <apex:outputPanel id="setupArrowPath">
                                                            
                                                            <!--apex:outputPanel >
                                                                <apex:outputPanel rendered="{!NOT(isConnectedWithQBO)}">
                                                                    <div display="block" > Congratulations! You are 20% complete! </div>
                                                                    <div class="progress-bar">
                                                                        <span  style="width: 20%"></span> 
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!AND(isConnectedWithQBO,AND(NOT(isAccountSyncDone),IF(AND(isBillorPOEnabled,isBusinessOrHigher),NOT(isVendorSyncDone),TRUE)),NOT(isLayoutUpdated))}">
                                                                    <div display="block" > Congratulations! You are 40% complete! </div>
                                                                    <div class="progress-bar">
                                                                        <span  style="width: 40%"></span>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!AND(isConnectedWithQBO, OR(AND(OR(isAccountSyncDone,isVendorSyncDone), NOT(OR(AND(unableToAddRemoteSiteSetting,bwSetting.Page_Layouts_Updated__c),isLayoutUpdated))),AND((AND(NOT(isAccountSyncDone),IF(AND(isBillorPOEnabled,isBusinessOrHigher),NOT(isVendorSyncDone),TRUE))),OR(AND(unableToAddRemoteSiteSetting,bwSetting.Page_Layouts_Updated__c),isLayoutUpdated))))}">
                                                                    <div display="block" > Congratulations! You are 60% complete!</div> 
                                                                    <div class="progress-bar">
                                                                        <span  style="width: 60%"></span> 
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!AND(isConnectedWithQBO,OR(isAccountSyncDone,isVendorSyncDone),OR(AND(unableToAddRemoteSiteSetting,bwSetting.Page_Layouts_Updated__c),isLayoutUpdated), (orgStatus !='subscribed') && NOT(isSandbox || isDeveloperOrg))}">
                                                                    <div display="block" > Congratulations! You are 80% complete! </div>
                                                                    <div class="progress-bar">
                                                                        <span  style="width: 80%"></span> 
                                                                    </div>
                                                                </apex:outputPanel>
                                                                
                                                                <apex:outputPanel rendered="{!AND(isConnectedWithQBO,OR(isAccountSyncDone,isVendorSyncDone),OR(AND(unableToAddRemoteSiteSetting,bwSetting.Page_Layouts_Updated__c),isLayoutUpdated),(orgStatus =='subscribed' || isSandbox || isDeveloperOrg))}">

                                                                    <div display="block" > Congratulations! You are {!IF(AND(isAccountSyncDone,IF(AND(isBillorPOEnabled,isBusinessOrHigher),isVendorSyncDone,true)),'100%','80%')} complete! </div> 
                                                                    <div class="progress-bar">
                                                                        <span  style="width: {!IF(AND(isAccountSyncDone,IF(AND(isBillorPOEnabled,isBusinessOrHigher),isVendorSyncDone,true)),'100%','80%')}"></span> 
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel-->
                                                            <article class="slds-card" style="border:0px;box-shadow: 0 0px;">
                                                                <div class="slds-path slds-path_has-coaching">
                                                                    <div class="slds-grid slds-path__track">
                                                                        <div class="slds-grid slds-path__scroller-container">
                                                                            <div class="slds-path__scroller" role="application">
                                                                                <div class="slds-path__scroller_inner">
                                                                                    <ul class="slds-path__nav" role="listbox" aria-orientation="horizontal">
                                                                                        <li class="slds-path__item slds-is-complete" role="presentation">
                                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-1" role="option" tabindex="-1">
                                                                                                <span class="slds-path__stage">
                                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                                    </svg>
                                                                                                    <span class="slds-assistive-text">Breadwinner Installed</span>
                                                                                                </span>
                                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">Breadwinner Installed</span>
                                                                                            </a>
                                                                                        </li>
                                                                                        <li style="display: {!if(OR(OR(orgStatus =='subscribed', isSandbox, isDeveloperOrg), orgStatus == 'expired'), '', 'none')}" class="slds-path__item {!If(orgStatus =='expired','slds-is-active','slds-is-complete')}" role="presentation" >
                                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-5" role="option" tabindex="-1">
                                                                                                <span class="slds-path__stage">
                                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                                    </svg>
                                                                                                    <span class="slds-assistive-text">Subscribed</span>
                                                                                                </span>
                                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">{!If(orgStatus =='subscribed','Subscribed', if(orgStatus =='expired', 'Trial/Subscription Expired', 'In Trial'))}
                                                                                                </span>
                                                                                            </a>
                                                                                        </li>

                                                                                        <li class="slds-path__item {!If(AND(isConnectedWithQBO, orgStatus != 'expired'), 'slds-is-complete', if(orgStatus == 'expired','slds-is-incomplete','slds-is-active'))}" role="presentation">
                                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-2" role="option" tabindex="-1">
                                                                                                <span class="slds-path__stage" id="qbopath">
                                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                                    </svg>
                                                                                                    <span class="slds-assistive-text">QuickBooks Online Connected</span>
                                                                                                </span>
                                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">{!If(isConnectedWithQBO, 'QuickBooks Online Connected', 'Connect to QuickBooks Online')}</span>
                                                                                            </a>
                                                                                        </li>
                                                                                        <li class="slds-path__item {!If(isConnectedWithQBO, If(OR(AND(unableToAddRemoteSiteSetting,bwSetting.Page_Layouts_Updated__c),isLayoutUpdated), 'slds-is-complete', 'slds-is-active'),'slds-is-incomplete')}" role="presentation" >
                                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-3" role="option" tabindex="-1">
                                                                                                <span class="slds-path__stage" id="layoutspath">
                                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                                    </svg>
                                                                                                    <span class="slds-assistive-text">Layouts updated</span>
                                                                                                </span>
                                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">{!If(isConnectedWithQBO, If(OR(AND(unableToAddRemoteSiteSetting,bwSetting.Page_Layouts_Updated__c),isLayoutUpdated), 'Layouts Updated', 'Update Layouts'),'Update Layouts')}</span>
                                                                                            </a>
                                                                                        </li>
                                                                                        <!--li class="slds-path__item {!If(isLayoutUpdated, If(isPermissionsetAssigned, 'slds-is-complete', 'slds-is-active'),'slds-is-incomplete')}slds-is-incomplete isPermissionsetAssigned" role="presentation" >
                                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-3" role="option" tabindex="-1">
                                                                                                <span class="slds-path__stage">
                                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                                    </svg>
                                                                                                    <span class="slds-assistive-text">Assigned Permissions</span>
                                                                                                </span>
                                                                                                <span class="slds-path__title">Assigned Permissions</span>
                                                                                            </a>
                                                                                        </li-->
                                                                                        <li class="slds-path__item {!If(AND(isConnectedWithQBO, isLayoutUpdated, isAccountSyncDone,IF(AND(isBillorPOEnabled,isBusinessOrHigher),isVendorSyncDone,true)), 'slds-is-complete', If(AND(OR(AND(unableToAddRemoteSiteSetting,bwSetting.Page_Layouts_Updated__c),isLayoutUpdated), isConnectedWithQBO), 'slds-is-active' ,'slds-is-incomplete'))}" role="presentation" >
                                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-4" role="option" tabindex="-1">
                                                                                                <span class="slds-path__stage">
                                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                                    </svg>
                                                                                                    <span class="slds-assistive-text">Companies Matched</span>
                                                                                                </span>
                                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">{!If(AND(isConnectedWithQBO, isLayoutUpdated, isAccountSyncDone,IF(AND(isBillorPOEnabled,isBusinessOrHigher),isVendorSyncDone,true)), 'Companies Matched', If(AND(OR(AND(unableToAddRemoteSiteSetting,bwSetting.Page_Layouts_Updated__c),isLayoutUpdated), isConnectedWithQBO), 'Match Companies' ,'Match Companies'))}</span>
                                                                                            </a>
                                                                                        </li>
                                                                                        <li class="slds-path__item {!If(AND(isConnectedWithQBO, OR(isAccountSyncDone,isVendorSyncDone), OR(AND(unableToAddRemoteSiteSetting,bwSetting.Page_Layouts_Updated__c),isLayoutUpdated), (orgStatus =='subscribed' || isSandbox || isDeveloperOrg)),'slds-is-complete',If(AND(isConnectedWithQBO, OR(isAccountSyncDone,isVendorSyncDone), isLayoutUpdated), 'slds-is-active', 'slds-is-incomplete'))} {!if(OR(OR(orgStatus =='subscribed', isSandbox, isDeveloperOrg), orgStatus =='expired'), 'slds-hide removeMeForSBDev', '')}" role="presentation" >
                                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-5" role="option" tabindex="-1">
                                                                                                <span class="slds-path__stage">
                                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                                    </svg>
                                                                                                    <span class="slds-assistive-text">Subscribe</span>
                                                                                                </span>
                                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">{!If(AND(isConnectedWithQBO, OR(isAccountSyncDone,isVendorSyncDone), OR(AND(unableToAddRemoteSiteSetting,bwSetting.Page_Layouts_Updated__c),isLayoutUpdated), (orgStatus =='subscribed' || isSandbox || isDeveloperOrg)),'Subscribed',If(AND(isConnectedWithQBO, OR(isAccountSyncDone,isVendorSyncDone), isLayoutUpdated), 'Subscribe', 'Subscribe'))}</span>
                                                                                            </a>
                                                                                        </li>
                                                                                    </ul>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </article>
                                                        </apex:outputPanel>
                                                    </div>                                                   
                                                </td>
                                            </tr>
                                            <apex:actionfunction action="{!updateReadOnlyMode}" name="updateReadOnlyMode" status="assign-action-status" reRender="ReadOnlyModeSection,test"/>
                                            <tr>
                                                <td>
                                                <div class="slds-text-heading_medium slds-p-right_xx-large">
                                                        <apex:outputtext value="Breadwinner is currently in {!if(isActiveMode,'Active Mode','Read Only Mode')}" id="test">
                                                        </apex:outputtext>
                                                </div>
                                                </td>
                                                <td> 
                                                <apex:outputpanel id="ReadOnlyModeSection" layout="block">
                                                    <div class="readOnlyMode">
                                                        <label class="slds-checkbox_toggle" id="Toggle">                                                            
                                                            <apex:inputCheckbox value="{!isActiveMode}"  disabled="{!OR(NOT(isAdministrator), (orgStatus=='expired'))}" onclick="updateReadOnlyMode()" id="readOrActiveMode" />
                                                            <span class="slds-checkbox_faux_container" aria-live="assertive">
                                                                <span class="slds-checkbox_faux slds-align_absolute-center" ></span>
                                                             </span>                                                            
                                                        </label>
                                                    </div>
                                                    </apex:outputpanel>
                                                </td>
                                                <td>
                                                   <div style="font-size:0.8rem;" class="slds-m-left_medium"> 
                                                            <a href="javascript:void(0);" onclick="ShowDifferences();" style="color:gray;">Explain the difference between Read Only and Active Mode</a>
                                                    </div>
                                                </td>
                                            </tr>
                                            <apex:outputpanel >
                                            <tr>
                                                <td>
                                                    <div class="slds-text-heading_medium">
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='subscribed', true, false)}">
                                                            You have an active, valid subscription to Breadwinner
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='trial', true, false)}">
                                                            Your fully-featured free trial has been activated
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='expired', true, false)}">
                                                            Your trial/subscription has expired
                                                        </apex:outputPanel>
                                                    </div>
                                                    <apex:outputPanel rendered="{!IF(orgStatus =='expired', true, false)}" styleClass="slds-text-body_small  slds-m-left_xx-small" >
                                                            Please contact sales@breadwinner.com<div style="display:{!IF(OR(isDeveloperOrg,isSandbox),'none','inline')}">, or please contact your Account Executive.</div>
                                                    </apex:outputPanel>
                                                </td>
                                                <td>
                                                    <div class="textDiv">
                                                        <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!orgStatus !='expired'}" /><!--rendered="{!IF(OR(orgStatus =='trial',orgStatus =='subscribed'), true, false)}"/-->                              
                                                        <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!IF(orgStatus =='expired', true, false)}"/> 
                                                    </div>
                                                </td>
                                                <td style="font-size:12px;">
                                                    <div class="slds-m-left_small slds-text-heading_medium">
                                                        <apex:outputPanel layout="block" rendered="{!IF(orgStatus =='trial', true, false)}" >
                                                            Your trial will expire in {!noOfDaysLeft} days 
                                                        </apex:outputPanel>
                                                    </div>
                                                </td>
                                            </tr>
                                            </apex:outputpanel>
                                            <apex:outputPanel >
                                                <tr>
                                                    <td style="width:50%">
                                                        <apex:outputPanel id="consumerHeaderPanel">
                                                            <apex:outputPanel >
                                                                <div class="slds-text-heading_medium">
                                                                    Connect Breadwinner / Salesforce to QuickBooks Online
                                                                </div>
                                                                <apex:outputPanel layout="block" rendered="{!NOT(isMultiOrgEnabled)}" styleClass="slds-text-body_small" style="margin-left: 0.35rem;">
                                                                    Need to connect more than one QuickBooks Online org to Salesforce? Please contact&nbsp;
                                                                    <apex:outputLink onclick="OpenContactSupportTab();" value="javascript:void(0);" style="color: gray;">Breadwinner Sales</apex:outputLink>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </td>
                                                    <td> 
                                                        <div >
                                                            <apex:outputPanel id="consumerDetailCheckIconPanel">
                                                               <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!AND(isConnectedWithQBO , !isOAuthIssue)}"/>  
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/yellow_check.png')}" rendered="{!AND(isOAuthIssue, isConnectedWithQBO)}"/> 
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!!isConnectedWithQBO}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </td>
                                                    <td > 
                                                       <div style='display:{!if( AND(isAdministrator,listAppConfig!=null,listAppConfig.size==0),"block","none")}'>
                                                                    <table >
                                                                        <tr>
                                                                            <td Style="border:none; margin-top:0px;width:20%;" >
                                                                                <apex:outputLink styleClass="slds-m-left_small" rendered="{!AND(NOT(isConnectedWithQBO),orgStatus !='expired',isAdministrator)}" value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type=production&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}" >
                                                                                    <apex:image style="height: 47px;" url="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/Connect_to_QuickBooks_Medium.png')}"/>
                                                                                </apex:outputLink>
                                                                            </td>
                                                                            <td Style="border:none; margin-top:0px; line-height: initial;">
                                                                                <apex:outputPanel rendered="{!AND(NOT(isConnectedWithQBO),orgStatus !='expired')}"> 
                                                                                    <div style="font-size:12px;color:rgba(128, 128, 128, 0.52);" Class='slds-m-right_large'>
                                                                                        Connecting to a QuickBooks Online<br/>Developer Sandbox?&nbsp;<apex:outputLink value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type=sandbox&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}" style="font-size:12px;color:rgba(128, 128, 128, 0.52);">Click here</apex:outputLink>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                            
                                                        </div>
                                                    <div >
                                                                
                                                        <apex:outputPanel id="consumerDetailLinkPanel">
                                                                <table>                                                                
                                                                 <apex:repeat value="{!AppConfigList}" var="appC">
                                                                    <tr>
                                                                        <td Style="border:none; margin-top:0px;">
                                                                           
                                                                            <apex:outputPanel layout="block" rendered="{!OR(isConnectedWithQBO,AND(orgStatus =='expired',isConnectedWithQBO))}" style="margin-left: 0.11rem;">
                                                                                <div class="slds-text-heading_medium">
                                                                                    {!appC.Connecting_App_Name} is Connected
                                                                                </div>
                                                                                <apex:outputPanel rendered="{!isAdministrator}" style="white-space: nowrap;margin-left: 6px;">
                                                                                    <apex:outputLink style="font-size:12px; color:grey;" value="{!($Page.breadwinner_qbo__InventoryImportPage)}?id={!appC.QBO_Org_ID}">Preview of Products and Services import from QuickBooks Online</apex:outputLink>
                                                                                    &nbsp;
                                                                                    <apex:outputLink style="{!IF(OR(appC.needToReconnect),'font-size:18px;color:red;font-weight:bold;','font-size:12px;color:grey;')}" value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type={!IF(CONTAINS(appC.Connecting_App_Name, 'Sandbox Company'), 'sandbox', 'production')}&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}">{!IF(OR(appConfig.breadwinner_qbo__Need_To_Reconnect__c),"Please reconnect with QuickBooks Online","Reconnect")}</apex:outputLink>
                                                                                    <apex:outputPanel >&nbsp;
                                                                                        <apex:commandlink styleClass="slds-text-body_small" style="color:grey;" value="Disconnect" status="assign-action-status" onclick="showDiscModal();" rerender="nothing" > 
                                                                                            <apex:param name="QBOOrgID" assignTo="{!qboOrgToDisconnect}" value="{!appC.QBO_Org_ID}"/>
                                                                                        </apex:commandlink>
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                
                                                                            </apex:outputPanel>
                                                                        </td>
                                                                       
                                                                    </tr>
                                                                 </apex:repeat>
                                                                 </table>
                                                                 <table border='0'>
                                                                   <tr  >
                                                                     <!--<td><b><i><u>Add another QBO Org</u></i></b><br/></td><td/>-->
                                                                     <a class='slds-m-left_medium' Style="display:{!IF(AND((isMultiOrgEnabled ),(orgStatus !='expired'),(isAdministrator),(listAppConfig!=null&&listAppConfig.size>0)),'block','none')}" onclick="connectWithQBO('QBOConnectionDisp');"><b><i><u>Add another QuickBooks Online Org</u></i></b></a>
                                                                    </tr>
                                                                    <tr id='QBOConnectionDisp' style="display:none" >
                                                                     <td  style='border-top: 0px;'  > &nbsp;&nbsp;
                                                                         <apex:outputLink rendered="{!AND(orgStatus !='expired',isAdministrator)}" value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type=production&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}" >
                                                                            <apex:image style="height: 47px;" url="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/Connect_to_QuickBooks_Medium.png')}"/>
                                                                          </apex:outputLink>
                                                                      </td>
                                                                      <td style='border-top: 0px;'>
                                                                      <apex:outputPanel rendered="{!(orgStatus !='expired')}"> 
                                                                        <div style="font-size:12px;color:rgba(128, 128, 128, 0.52);">
                                                                            Connecting to a QuickBooks Online<br/>Developer Sandbox?&nbsp;<apex:outputLink value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type=sandbox&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}" style="font-size:12px;color:rgba(128, 128, 128, 0.52);" >Click here</apex:outputLink>
                                                                        </div>
                                                                      </apex:outputPanel>
                                                                      </td>
                                                                   </tr>
                                                                    </table>
                                                                
                                                         </apex:outputPanel>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr style="display:{!IF(isAdministrator,'','none')}"> 
                                                <td>                                                      
                                                    <div class="slds-text-heading_medium">
                                                        
                                                        <apex:outputPanel id="pageLayoutHeadingPanel" >
                                                            <script>
                                                            function showLayoutEditsection(){
                                                                document.getElementById("showlayoutTRId").style.display="";
                                                                assignpermissionsettoCurrentUser();
                                                             }
                                                            function HideLayoutEditsection(){
                                                                var isLayoutUpdated = {!isLayoutUpdated};
                                                                    if(isLayoutUpdated ){
                                                                    document.getElementById("showlayoutTRId").style.display="none";}
                                                             }
                                                            </script>
                                                            
                                                            <apex:outputPanel rendered="{!AND(NOT(isLayoutUpdated),unableToAddRemoteSiteSetting) }" >
                                                                <a target="_blank" href="{!breadwinnerSupportPortalURL}/support/solutions/articles/44001692989">
                                                                    Read Instructions
                                                                </a>
                                                                on configuring your&nbsp;
                                                                <apex:outputLink value="/ui/setup/layout/PageLayouts?type=Account">Page Layout
                                                                </apex:outputLink>
                                                                <!-- div style="font-size:12px;">(we can&apos;t monitor this, so no green check will appear)</div -->
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!OR(isLayoutUpdated,NOT(unableToAddRemoteSiteSetting))}">
                                                                <apex:outputPanel rendered="{!AND(NOT(isLayoutUpdated),showProgressBar,isConnectedWithQBO)}">
                                                                    <apex:commandLink style="color:black" action="{!selectedUsetPermissionSetassignment}" oncomplete="updatingPageLayouts();" reRender="noofAssignee,pmStatus">Update Account and Opportunity Page Layouts</apex:commandLink>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!OR(isLayoutUpdated,Not(isAdministrator),Not(isConnectedWithQBO))}">
                                                                    Update Account and Opportunity Page Layouts
                                                                </apex:outputPanel>
                                                                                                                            
                                                            </apex:outputPanel>
                                                                <apex:actionfunction name="assignpermissionsettoCurrentUser" action="{!selectedUsetPermissionSetassignment}" oncomplete="updatingPageLayouts();" reRender="noofAssignee,pmStatus"/>
                                                                <apex:actionFunction name="updatingPageLayouts" action="{!updatePageLayouts}" oncomplete="addallfuncs();HideLayoutEditsection();checkIfLayoutIsUpdated1();reRendercheckmarkSVGIcons();" status="assign-action-status" reRender="pgmsgtag,pageLayoutHeadingPanel,pageLayoutUpdatePanel, setupArrowPath"></apex:actionFunction>
                                                        </apex:outputPanel>
                                                    </div>
                                                </td> 
                                                <td>
                                                    <div >
                                                        <apex:outputPanel id="pagelayoutCheck" >
                                                            <apex:outputPanel >
                                                                <apex:image value="{!IF(NOT(showProgressBar),  '/img/prev_cal_arrow.gif', IF(isLayoutUpdated, URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png') , URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')))}" height="32" width="32"/>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </td>  
                                                
                                                <td>
                                                    <!-- -- Toggle button for page layouts update in Professional orgs (API not enabled) -->
                                                    <apex:outputPanel id="professionalUpdate">
                                                        <div class="slds-m-left_medium">
                                                            <apex:outputPanel styleClass="slds-text-body_small" style="color:gray;" rendered="{!OR(AND(unableToAddRemoteSiteSetting,NOT(bwSetting.breadwinner_qbo__Page_Layouts_Updated__c)),foundException)}">
                                                                We are unable to monitor your Account or Opportunity Page Layouts.
                                                                <a  target="_blank" style="color:gray" href="{!breadwinnerSupportPortalURL}/support/solutions/articles/44001692989">Read Instructions</a> on configuring your Page Layouts.<br/>
                                                                When you have configured your page layouts, please click on the toggle below to mark it completed.
                                                                <div class="slds-clearfix">
                                                                    <div class="slds-form-element slds-float_left">
                                                                        <label class="slds-checkbox_toggle slds-grid">
                                                                            <input type="checkbox" name="Page_Layouts_Updated_Checkbox" id="profLayoutcheckbox" aria-describedby="toggle-desc" onchange="Check_PageLayoutscheckbox(this);" />
                                                                            <span id="toggle-desc" class="slds-checkbox_faux_container" aria-live="assertive">
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-checkbox_on">Done</span>
                                                                                <span class="slds-checkbox_off">Not Done</span>
                                                                            </span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <apex:actionFunction name="update_Page_Layouts_Updated_Checkbox_fun" action="{!update_Page_Layouts_Updated_Checkbox}" status="assign-action-status" reRender="progressPanel,infoPanel,pagelayoutCheck,pageLayoutUpdatePanel,pageLayoutHeadingPanel,professionalUpdate,pagelayoutCheck,pgmsgtag, setupArrowPath" oncomplete="addallfuncs();reRendercheckmarkSVGIcons();">
                                                            <apex:param value="" name="param_Page_Layouts_Updated"/>
                                                        </apex:actionFunction>
                                                    </apex:outputPanel>
                                                    
                                                </td>                         
                                            </tr>
                                            <tr style="border:none;display:none" id="showlayoutTRId" >
                                                <td colspan="3" style="border:none;border-top:0px;">
                                                    <apex:outputPanel id="pageLayoutUpdatePanel" >
                                                        <apex:outputPanel rendered="{!AND(True,NOT(isLayoutUpdated))}" >
                                                            <div class="slds-box" >
                                                                <div  class="slds-text-title slds-m-bottom_medium">
                                                                    <apex:pageMessages ></apex:pageMessages>
                                                                    Breadwinner won't change, move, or remove any of your fields, it will just add the Breadwinner fields. 
                                                                    You can still edit the page layouts further after Breadwinner auto-update them, or manually undo or alter any changes.
                                                                </div>
                                                                <div>
                                                                    
                                                                    
                                                                    <label class="slds-checkbox">
                                                                        <apex:inputCheckbox value="{!updateAccountPageLayouts}" />
                                                                        <span class="slds-checkbox_faux"></span>
                                                                        <span class="slds-form-element__label slds-m-left_small">
                                                                            Update my Account Page Layout(s) with Breadwinner's Fields, Charts, and Invoice Related Lists
                                                                        </span>
                                                                    </label>                                                        
                                                                </div>
                                                                <div>
                                                                    <label class="slds-checkbox">
                                                                        <apex:inputCheckbox value="{!updateOpportunityPageLayouts}" />
                                                                        <span class="slds-checkbox_faux"></span>
                                                                        <span class="slds-form-element__label slds-m-left_small">
                                                                            Update my Opportunity Page Layout(s) with Breadwinner's Invoice Related Lists
                                                                        </span>
                                                                    </label>
                                                                </div>
                                                                
                                                                <div class="slds-m-top_medium" >
                                                                    <apex:commandButton value="Update Automatically" styleClass="slds-button slds-button_brand" action="{!updatePageLayouts}" reRender="progressPanel,infoPanel,pagelayoutCheck,pageLayoutUpdatePanel,pageLayoutHeadingPanel" oncomplete="addallfuncs();HideLayoutEditsection();checkIfLayoutIsUpdated1();" disabled="{!NOT(isAdministrator)}" status="assign-action-status" />
                                                                    <apex:outputPanel styleClass="slds-text-title slds-m-left_medium">
                                                                        Or, alternatively, update them yourself following&nbsp;<a href="{!breadwinnerSupportPortalURL}/support/solutions/articles/44001692989" style="color: gray;" target="_blank">our suggested Page Layout guide</a>.
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>  
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="slds-text-heading_medium">
                                                        Assign Breadwinner Permission Sets

                                                    </div>
                                                    <apex:outputPanel layout="block" styleClass="slds-text-body_small" style="display:{!IF(AND(isAdministrator,noofUsersNotAssigned!=0 ),'','none')};margin-left: 0.35rem;">
                                                        Currently Breadwinner assigns permission sets to Salesforce Licensed Users only. You may assign them to other users&nbsp;<a style="color:grey;" target="{!IF(OR($User.UIThemeDisplayed = 'Theme4d',$User.UIThemeDisplayed = 'Theme4t'),'','_blank')}" href="{!breadwinnerSupportPortalURL}/support/solutions/articles/44001664706">manually</a>
                                                    </apex:outputPanel>
                                                </td>
                                                <td>
                                                    <apex:outputPanel id="pmStatus" styleclass="textDiv" style="text-align: center;"> 
                                                        <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!noofUsersNotAssigned==0}" />                              
                                                        <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!noofUsersNotAssigned==totalUsersCount}"/>
                                                        <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/yellow_check.png')}" rendered="{!AND(noofUsersNotAssigned!=totalUsersCount,noofUsersNotAssigned>0)}"/> 
                                                    </apex:outputPanel>
                                                 </td>
                                                <td >
                                                    <apex:outputPanel id="noofAssignee" style="visibility:{!IF(AND(isAdministrator,noofUsersNotAssigned>0, orgStatus!='expired'),'visible','hidden')};font-size:12px;">
                                                    <div class="slds-m-left_medium">
                                                        <div>
                                                            <apex:commandLink action="{!assignPermissionSet}" style="color:grey;" status="assign-action-status">Give all users Standard Permissions to Breadwinner
                                                            <apex:param name="permissionTypeParam" value="Standard" assignTo="{!permissionSetType}"/> 
                                                            </apex:commandLink>
                                                        </div>
                                                        <div class="slds-m-top_xxx-small">
                                                            <apex:commandLink action="{!assignPermissionSet}" style="color:grey;" status="assign-action-status">Give all users Read-Only Permissions to Breadwinner
                                                            <apex:param name="permissionTypeParam" value="ReadOnly" assignTo="{!permissionSetType}"/> 
                                                            </apex:commandLink>
                                                        </div>
                                                    </div>
                                                    </apex:outputPanel>
                                                </td> 
                                            </tr>
                                        </apex:outputPanel>
                                            <tr>
                                                <td>  
                                                    <div class="slds-text-heading_medium">
                                                        <apex:outputPanel id="accountSyncPanelMO">
                                                            Match QuickBooks Online Companies to Salesforce Accounts
                                                            <!--<apex:outputPanel rendered="{!IF(OR(isAccountSyncDone,NOT(isConnectedWithQBO)),true,false)}">
                                                                Sync Customers to Salesforce Accounts
                                                            </apex:outputPanel>
                                                            {!IF(AND(isBusinessOrHigher,isBillorPOEnabled),'Initial Match of QBO Companies and Vendors with Salesforce Accounts','Initial Match of QBO Companies with Salesforce Accounts')} -->                                                           
                                                        </apex:outputPanel>
                                                    </div>
                                                </td>
                                                <td> 
                                                    <apex:outputPanel id="companySyncStatus">
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!AND(AND(isAccountSyncDone,IF(AND(isBillorPOEnabled,isBusinessOrHigher),isVendorSyncDone,true)),AND(AND(isAccountSyncDone,NOT(areThereUnmatched_QBO_Companies)),IF(AND(isBillorPOEnabled,isBusinessOrHigher),AND(isVendorSyncDone,NOT(areThereUnmatched_QBO_Vendors)),true)))}"/>
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/yellow_check.png')}" rendered="{!AND(OR(isAccountSyncDone,isVendorSyncDone),OR(AND(isAccountSyncDone,areThereUnmatched_QBO_Companies),OR(IF(AND(isBillorPOEnabled,isBusinessOrHigher),!isVendorSyncDone,false),!isAccountSyncDone),IF(AND(isBillorPOEnabled,isBusinessOrHigher),AND(isVendorSyncDone,areThereUnmatched_QBO_Vendors),false)))}"/>
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!AND(NOT(isAccountSyncDone),IF(AND(isBillorPOEnabled,isBusinessOrHigher),NOT(isVendorSyncDone),true))}"/>
                                                   </apex:outputPanel>
                                                </td>
                                                <td style="font-size:12px;">
                                                    <div class="slds-m-left_medium" >
                                                    <apex:outputPanel id="CustomerVendor">
                                                        <apex:repeat value="{!listAppConfig}" var="appC" rendered="{!AND(isAdministrator,orgStatus!='expired')}">
                                                            
                                                            <apex:outputLink rendered="{!AND(NOT(appC.breadwinner_qbo__Is_Account_Sync_Completed__c), isConnectedWithQBO)}" style="color:red;font-size: 15px;display: block;" value="{!($Page.breadwinner_qbo__AccountSync)}">
                                                                Preview Customer Match
                                                                <apex:param name="company_id" value="{!appC.breadwinner_qbo__QBO_Org_ID__c}" />
                                                                <apex:param name="isVendor" value="false" />
                                                                <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appC.Connecting_App_Name__c}</apex:outputPanel>
                                                            </apex:outputLink>
                                                            <apex:outputLink rendered="{!AND(isBusinessOrHigher,NOT(appC.breadwinner_qbo__Is_Vendor_Sync_Completed__c),OR(appC.breadwinner_qbo__Sync_Bills__c,appC.breadwinner_qbo__Sync_POs__c), isConnectedWithQBO)}" style="color:red;font-size: 15px;display: block;" value="{!($Page.breadwinner_qbo__AccountSync)}">
                                                                Preview Vendor Match
                                                                <apex:param name="company_id" value="{!appC.breadwinner_qbo__QBO_Org_ID__c}" />
                                                                <apex:param name="isVendor" value="true" />
                                                                <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appC.Connecting_App_Name__c}</apex:outputPanel>
                                                            </apex:outputLink>

                                                            <apex:outputLink rendered="{!AND(appC.breadwinner_qbo__Is_Account_Sync_Completed__c, areThereUnmatched_QBO_Companies,CONTAINS(UnmatchedCompanyStatusMapKeys,appC.breadwinner_qbo__QBO_Org_ID__c), QBO_orgToUnmatchedCompanyStatusMap[appC.breadwinner_qbo__QBO_Org_ID__c], isConnectedWithQBO)}" style="color:red;display: block;" value="{!($Page.breadwinner_qbo__AccountSync)}">
                                                                There are a few unmatched QuickBooks Online Customers
                                                                <apex:param name="company_id" value="{!appC.breadwinner_qbo__QBO_Org_ID__c}" />
                                                                <apex:param name="isVendor" value="false" />
                                                                <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appC.Connecting_App_Name__c}</apex:outputPanel>

                                                            </apex:outputLink>
                                                           <apex:outputLink rendered="{!AND(isBusinessOrHigher,OR(appC.breadwinner_qbo__Sync_Bills__c,appC.breadwinner_qbo__Sync_POs__c),appC.breadwinner_qbo__Is_Vendor_Sync_Completed__c, areThereUnmatched_QBO_Vendors,CONTAINS(UnmatchedVendorStatusMapKeys,appC.breadwinner_qbo__QBO_Org_ID__c), QBO_orgToUnmatchedVendorStatusMap[appC.breadwinner_qbo__QBO_Org_ID__c], isConnectedWithQBO)}" style="color:red;display: block;" value="{!($Page.breadwinner_qbo__AccountSync)}">
                                                                There are a few unmatched QuickBooks Online Vendors
                                                                <apex:param name="company_id" value="{!appC.breadwinner_qbo__QBO_Org_ID__c}" />
                                                                <apex:param name="isVendor" value="true" />
                                                                <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appC.Connecting_App_Name__c}</apex:outputPanel>

                                                           </apex:outputLink>

                                                            
                                                            <!-- apex:outputPanel rendered="{!AND(appC.Is_Account_Sync_Completed__c, NOT(QBO_orgToUnmatchedCompanyStatusMap[appC.QBO_Org_ID__c]))}" style="color:grey;">  
                                                                    If asked by support, you may wish to&nbsp;
                                                                    <apex:outputLink rendered="{!appC.Is_Account_Sync_Completed__c}" value="{!($Page.breadwinner_qbo__AccountSync)}" style="color:grey;">restart the Account Sync 
                                                                        <apex:param name="company_id" value="{!appC.breadwinner_qbo__QBO_Org_ID__c}" />
                                                                    </apex:outputLink>     for {!appC.Connecting_App_Name__c} 
                                                                </apex:outputPanel -->  
                                                            
                                                        </apex:repeat>                                                        
                                                        <!-- apex:outputPanel layout="block" styleClass="slds-m-top_xxx-small" rendered="{!OR(isAccountSyncDone,isVendorSyncDone)}" style="color:grey;"> 
                                                            <apex:outputPanel rendered="{!isAdministrator}">
                                                                If asked by support, you may wish to&nbsp; 
                                                                <apex:commandLink rendered="{!isAccountSyncDone}" action="{!restartHistoricalSync}" style="color:grey;" status="assign-action-status" reRender="RestartHistoricalSyncScriptPanel" onComplete="onCompletionOfRestartHistoricalSync();">restart the Invoice Sync 
                                                                </apex:commandLink><div style="display:{!IF(isVendorSyncDone,'inline','none')}"><div style="display:{!IF(isAccountSyncDone,'inline','none')}">,</div>&nbsp; <apex:commandLink action="{!restartHistoricalBillPOSync}" style="color:grey;" status="assign-action-status" reRender="RestartHistoricalSyncScriptPanel" onComplete="onCompletionOfRestartHistoricalSync();">restart the {!displayTextforBillPO} Sync
                                                                </apex:commandLink></div><apex:outputPanel rendered="{!isMultiOrgEnabled}"> for All QuickBooks Online Orgs</apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel -->
                                                </apex:outputPanel> 
 
                                                    </div>
                                                </td>

                                            </tr>
                                            <!-- tr>
                                                <td>
                                                    <div class="slds-text-heading--medium ">  Sync Invoices (starts automatically)</div>
                                                </td>
                                                <td> 
                                                    <div >
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!isAccountSyncDone}"/>  
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!!isAccountSyncDone}"/>
                                                    </div>
                                                </td>  
                                                <td style="font-size:12px;">
                                                    <div class="slds-m-left--medium">
                                                        <apex:outputPanel rendered="{!isAccountSyncDone}" style="color:grey;"> 
                                                            <apex:outputPanel rendered="{!isAdministrator}">
                                                                 If asked by support, you may wish to&nbsp; 
                                                                <apex:commandLink action="{!restartHistoricalSync}" style="color:grey;" status="assign-action-status" reRender="RestartHistoricalSyncScriptPanel" onComplete="onCompletionOfRestartHistoricalSync();">restart the Invoice Sync 
                                                                </apex:commandLink>&nbsp;<apex:commandLink action="{!restartHistoricalTotalSync}" style="color:grey;" status="assign-action-status">.</apex:commandLink><apex:outputPanel rendered="{!isMultiOrgEnabled}">for All QBO Orgs</apex:outputPanel> 
                                                            </apex:outputPanel>
                                                         </apex:outputPanel>
                                                    </div>
                                                </td>                          
                                            </tr -->
                                            
                                            <tr>
                                                <td>  
                                                    <div class="slds-text-heading_medium" >
                                                        Subscribe to Breadwinner                                                                   
                                                    </div>
                                                </td> 
                                                <td>
                                                    <div  >
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!IF(orgStatus =='subscribed', true, false)}"/>
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/yellow_check.png')}" rendered="{!IF(AND(orgStatus =='trial',NOT(isSandbox), NOT(isDeveloperOrg)), true, false)}"/>                              
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!IF(orgStatus =='expired', true, false)}"/>                                                             
                                                    </div>
                                                </td>  
                                                <td></td>     
                                            </tr>
                                            <tr >
                                                <td style="border:none; margin-top:0px;" class="slds-text-title" colspan="3">
                                                    <div style="margin-left: 0.35rem;">
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='subscribed', true, false)}">
                                                            Your subscription to Breadwinner is Active.
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='trial', true, false)}">
                                                            <apex:outputPanel rendered="{!AND(NOT(isSandbox), NOT(isDeveloperOrg))}">
                                                                To guarantee continued access, subscribe to Breadwinner before <br/>
                                                                your trial expires in {!noOfDaysLeft} days. We will email you with more information.
                                                                <br/>
                                                                Please contact your Account Executive.
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!isSandbox}">
                                                                This is running in a Sandbox. Because payment is tied to the instance where Breadwinner is installed, you can only pay for Breadwinner from a production org, not a Sandbox.<br/>
                                                                If this was a Salesforce Production org, you would be given the option to pay here.
                                                                <br/> <br/>
                                                                If you need to extend your free trial, which will expire in {!noOfDaysLeft} days, please click Contact Support to the left and file a case requesting a 2 week extension of your Sandbox trial. Please quote Org ID <b>{!$Organization.Id}</b>.
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!isDeveloperOrg}">
                                                            You cannot subscribe on a Developer Org.<br/>
                                                            However, you can request an extension of your free trial{!IF(orgStatus =='expired','',', which expires in '+Text(noOfDaysLeft)+' days,')} by contacting&nbsp;<apex:commandLink value="Breadwinner Support" onclick="OpenContactSupportTab();" reRender="theTabPanel" status="assign-action-status" style="color: gray;"></apex:commandLink>.
                                                            <br/>Please mention that your Org ID is {!$Organization.Id}.
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='expired', true, false)}">
                                                            <apex:outputPanel rendered="{!AND(NOT(isSandbox), NOT(isDeveloperOrg))}">
                                                                You don't have an active subscription to Breadwinner.<br/>
                                                                <br/>
                                                                Please contact your Account Executive.
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!isSandbox}">
                                                                This is a Sandbox Salesforce org, and you cannot pay for Breadwinner in a Sandbox, only in a Production Org.
                                                                <br/>
                                                                However, if you need to extend your free trial, please file a case using the Contact Support section on the left, requesting a trial extension, and please quote Org ID <b>{!$Organization.Id}</b>.
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                        <apex:outputPanel layout="block" styleClass="slds-m-horizontal_medium slds-m-bottom_medium" id="SettingSectionPanel">
                                            <apex:commandLink action="{!showEditSettingSection}" status="assign-action-status" rerender="SettingSectionPanel" rendered="{!isAdministrator}"> .
                                            </apex:commandLink>
                                            <div class="slds-grid slds-wrap">
                                                <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                    <apex:outputPanel rendered="{!isEditSettingSection}">  
                                                        <div class="slds-box slds-float_left">
                                                            <label class="slds-checkbox">
                                                                <span class="slds-form-element__label">
                                                                    {!$ObjectType.Breadwinner_Settings__c.Fields.Multi_Org_Enabled__c.Label}
                                                                </span>
                                                                <apex:inputField value="{!bwSetting.breadwinner_qbo__Multi_Org_Enabled__c}"/> 
                                                                <span class="slds-checkbox_faux"></span>
                                                                
                                                            </label>
                                                                                                                                                                               
                                                            <div class="slds-m-top_medium">
                                                                <apex:commandButton value="Save" id="saveSettingSection" styleClass="slds-button slds-button_brand" action="{!saveSettingSection}" status="assign-action-status"/>   
                                                                <apex:commandButton value="Cancel" id="cancelSettingSection" styleClass="slds-button slds-button_neutral" action="{!cancelSettingSection}" reRender="SettingSectionPanel" status="assign-action-status"/>
                                                            </div>  
                                                        </div>
                                                    </apex:outputPanel>
                                                </div>
                                                
                                                <div  align="right" class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                    <div >
                                                        <apex:commandLink action="{!showEndpointUrlEditor}" rendered="{!AND(NOT(isConnectedWithQBO),isAdministrator)}" status="assign-action-status" rerender="SettingURL"> .
                                                        </apex:commandLink> 
                                                    </div>
                                                    <apex:outputPanel id="SettingURL" layout="block" >
                                                        <apex:outputPanel layout="block" styleclass="slds-box slds-float_right" rendered="{!showEndpointURLSetting}">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >{!$ObjectType.Breadwinner_Settings__c.Fields.Endpoint_URL_Override__c.Label}</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}" size="1" styleClass="slds-select">
                                                                            <apex:selectOptions value="{!AvailableEndpointURLs}">
                                                                            </apex:selectOptions>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="slds-m-top_medium">
                                                                <apex:commandButton id="saveAndCreateRemoteSite" value="Save & Create Remotesite" styleClass="slds-button slds-button_brand" action="{!saveAndCreateRemoteSite}" status="assign-action-status" rendered="{!unableToAddRemoteSiteSetting}"/>
                                                                <apex:commandButton id="updateEndpointUrlOverride" value="Save" styleClass="slds-button slds-button_brand" action="{!updateEndpointUrlOverride}" status="assign-action-status"/>
                                                                <apex:commandButton id="cancelEndpointUrlEditor" value="Cancel" styleClass="slds-button slds-button_neutral" action="{!hideEndpointUrlEditor}" reRender="SettingURL" status="assign-action-status"/>
                                                            </div>
                                                        </apex:outputPanel> 
                                                    </apex:outputPanel> 
                                                </div>
                                            </div>
                                            
                                        </apex:outputPanel>   
                                    </div>
                                    </div>
                                </div>
                                
                                <div id="SetupAndConfig-TAB2" class="slds-hide" aria-labelledby="InvoiceConfiguration">
                                    
                                    <div id="InvoiceConfigIframeDivId">
                                        
                                    </div>
                                </div>
                                 <div id="ADMIN-24" class="slds-hide" role="tabpanel" aria-labelledby="AddressSync">
                                        <apex:outputPanel layout="block" id="AddressSyncSection"></apex:outputPanel>
                                    </div>
                                <div id="SetupAndConfig-TAB3" class="slds-hide" aria-labelledby="Chargent">
                                    
                                    <div id="ChargentIframeDivId">
                                        
                                    </div>
                                </div>
                        <!-- ---------------------- Bill/Pos Menu Starts Here ------------------- -->
                        
                        <div id="SetupAndConfig-TAB5" class="slds-hide" aria-labelledby="POsContent">
                            
                            <apex:outputPanel layout="block"  >
                                <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                    <div class="slds-media slds-media_center">
                                        <div class="slds-media__figure">
                                            <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                            </svg>
                                        </div>
                                        <div class="slds-media__body">
                                            <apex:outputPanel layout="block"   styleclass="slds-page-header__title slds-truncate" title="{!IF(isBillSection,'Bills','Purchase Orders')} Configuration" id="POsContentHeader">{!IF(isBillSection,'Bills','Purchase Orders')} Configuration</apex:outputPanel>
                                            <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online</p>
                                        </div>
                                    </div>
                                </div>
                                <apex:actionFunction name="PoPassQBOOrgId" action="{!MultiOrgChanging}" status="assign-action-status"  reRender="PosWholePanel" oncomplete="HideStyleSheet();message();addLinkDynamically();" >
                                    <apex:param name="PoPassQBOOrgId" value="" assignTo="{!orgIdValue}"/>
                                    <apex:param name="po" value="false" assignTo="{!isBillSection}"/>
                                    
                                </apex:actionFunction>
                                <apex:actionFunction name="BillPassQBOOrgId" action="{!MultiOrgChanging}" status="assign-action-status"  reRender="PosWholePanel" oncomplete="HideStyleSheet();message();addLinkDynamically();" >
                                    <apex:param name="BillPassQBOOrgIdParam" value="" assignTo="{!orgIdValue}"/>
                                    <apex:param name="bill" value="true" assignTo="{!isBillSection}"/>
                                    
                                </apex:actionFunction>
                                
                                <apex:outputPanel id="PoMenuFieldsSectionId" >
                                    
                                    
                                    <apex:outputPanel id="PoMenuId" rendered="{!isMultiOrgEnabled}">
                                        <ul class="slds-tabs_default__nav slds-m-bottom_small" role="tablist">
                                            
                                            <li class="slds-tabs_default__item slds-text-title_caps slds-active slds-truncate" title="Bredwinner Wide Settings" role="presentation">
                                                <a class="slds-tabs_default__link"  role="tab" onclick="SubTabsSelect(this, '','{!IF(isBillSection,'bill','Po')}');" tabindex="0" aria-selected="true" aria-controls="tab-default-1" id="tab-default-1__item">
                                                    Breadwinner Wide Settings
                                                </a>
                                            </li>
                                            <apex:variable value="{!0}" var="i" >
                                                <apex:repeat value="{!listAppConfig}" var="appC">
                                                    
                                                    <li class="slds-tabs_default__item slds-text-title_caps slds-truncate" title="{!appC.Connecting_App_Name__c}" role="presentation">
                                                        <a class="slds-tabs_default__link" href="javascript:void(0);" role="tab" onclick="SubTabsSelect(this, '{!appC.breadwinner_qbo__QBO_Org_ID__c}','{!IF(isBillSection,'bill','Po')}'); " tabindex="0" aria-selected="true" aria-controls="{!appC.breadwinner_qbo__QBO_Org_ID__c}" id="{!appC.breadwinner_qbo__QBO_Org_ID__c}__item">
                                                            {!appC.Connecting_App_Name__c}
                                                        </a>
                                                    </li>
                                                    <apex:variable value="{!i+1}" var="i"/>
                                                </apex:repeat>
                                            </apex:variable>
                                        </ul>
                                    </apex:outputPanel>
                                    <apex:outputPanel id="PosWholePanel"   layout="block">
                                        <div id="help"  class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left" role="tooltip" aria-live="polite" style="display:none;position:absolute;top:0px;left:0px;">
                                            <div class="slds-popover__body slds-text-longform">
                                                <p>Help text will come here dynamically</p>
                                            </div>
                                        </div>
                                        <apex:actionStatus id="RevenueAccountCode-action-status" layout="block">
                                            <apex:facet name="start">
                                                <div class="slds-spinner_container">                                                   
                                                    <div class="slds-spinner_brand slds-spinner slds-spinner_medium" role="alert" >
                                                        <div class="slds-spinner__dot-a"></div>
                                                        <div class="slds-spinner__dot-b"></div>
                                                    </div>
                                                    <div class="slds-container_fluid slds-text-heading_medium slds-grid slds-grid_align-center" style="position: absolute; top: 55%;"> 
                                                        <P>
                                                           Refreshing Default QuickBooks Online Accounting code
                                                        </P>
                                                    </div>
                                                </div>                                                
                                            </apex:facet>
                                        </apex:actionStatus>
                                        <apex:outputPanel layout="block" id="Oathissuemsgpo" styleclass="slds-m-horizontal_small">
                                            <apex:pageMessage rendered="{!isOAuthIssue}" severity="WARNING" strength="2" summary="<b>There was a problem establishing a connection to QuickBooks Online:</b>" escape="false" >
                                                There was a problem establishing a connection with QuickBooks Online Company "{!appConfigoAuth.Connecting_App_Name__c}". If you are a QuickBooks Online Admin please reconnect to QuickBooks Online now, or ask someone who is a Salesforce Admin and QuickBooks Online Admin to click&nbsp;
                                                <apex:outputLink style="color: black" value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type={!IF(CONTAINS(appConfigoAuth.breadwinner_qbo__Connecting_App_Name__c, 'Sandbox Company'), 'sandbox', 'production')}&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}" target="_blank" rendered="{!NOT(OR($User.UIThemeDisplayed == 'Theme4d', $User.UIThemeDisplayed == 'Theme4t'))}" >Reconnect with QuickBooks Online</apex:outputLink>
                                                <apex:outputLink style="color: black" value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type={!IF(CONTAINS(appConfigoAuth.breadwinner_qbo__Connecting_App_Name__c, 'Sandbox Company'), 'sandbox', 'production')}&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}" rendered="{!(OR($User.UIThemeDisplayed == 'Theme4d', $User.UIThemeDisplayed == 'Theme4t'))}">Reconnect with QuickBooks Online</apex:outputLink>
                                            </apex:pageMessage>
                                            <apex:pageMessages />
                                            
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleclass="slds-m-horizontal_small  slds-m-top_medium slds-m-bottom_medium" rendered="{!OR(AND(isMultiOrgEnabled,orgIdValue!=null),NOT(isMultiOrgEnabled))}">
                                            <div class="slds-clearfix" style="display:{!IF(orgIdValue=='','none','')}">
                                                <div class="slds-form-element slds-float_left ">
                                                    <label class="slds-checkbox_toggle slds-grid ">
                                                        <span class="slds-form-element__label slds-m-bottom_none slds-m-top_xx-small">Enable {!IF(isBillSection,'Bills','Purchase Orders')} Sync</span>
                                                        <apex:inputCheckbox value="{!selectedFieldtoEnableBIllPO}" id="enableBillOrPOSync" onclick="OnOffFunctionapexBPTab(this.checked,'{!IF(isBillSection,'Bills','Purchase Orders')}');" />
                                                        <span class="slds-checkbox_faux_container" aria-live="assertive">
                                                            <span class="slds-checkbox_faux"></span>
                                                            <span class="slds-checkbox_on">Enabled</span>
                                                            <span class="slds-checkbox_off">Disabled</span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                            <apex:outputPanel rendered="{!AND(IF(isBillSection,appConfig.breadwinner_qbo__Sync_Bills__c,appConfig.breadwinner_qbo__Sync_POs__c),NOT(appConfig.breadwinner_qbo__Is_Vendor_Sync_Completed__c))}" styleClass="slds-m-top_large"> <br/><div class="infoM3"  style="border-radius: 4px;">Please finish Vendor Match from Setup tab</div></apex:outputPanel>
                                            <apex:actionFunction name="POsOnOffFunctionapexBPTab"  action="{!allowBillsPOsSync}" status="assign-action-status" rerender="PosWholePanel"  oncomplete="HideStyleSheet();message();addLinkDynamically();">
                                                <apex:param id="PosValue" name="AllowPOssync" value="" />
                                                <apex:param name="po" value="false" assignTo="{!isBillSection}"/>
                                                
                                            </apex:actionFunction>
                                            <apex:actionFunction name="BillsOnOffFunctionapexBPTab"  action="{!allowBillsPOsSync}" status="assign-action-status" rerender="PosWholePanel"  oncomplete="HideStyleSheet();message();addLinkDynamically();">
                                                <apex:param id="BillsValue" name="AllowBillssync" value="" />
                                                <apex:param name="bill" value="true" assignTo="{!isBillSection}"/>
                                                
                                            </apex:actionFunction>
                                            
                                            <apex:outputPanel rendered="{!selectedFieldtoEnableBIllPO}" layout="block">
                                                <!--Default Setting-->
                                                <div class="slds-m-top_small" id="duedateandothersettings" >
                                                    <apex:outputPanel layout="block" rendered="{!isBillSection}">
                                                        
                                                        <h3 class="slds-section-title_divider">Default Bill Creation Settings</h3>
                                                        <div class="slds-m-horizontal_small slds-grid slds-wrap">
                                                            <div class="slds-m-top_small slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_12-of-12">
                                                                <div class="slds-form-element ">
                                                                    <label class="slds-form-element__label" >Bill Default Due Date</label>
                                                                    <div class="slds-form-element__control slds-grid slds-size_1-of-1 slds-medium-size_2-of-6 slds-large-size_3-of-12">
                                                                        <apex:inputField id="dueDaysNumber" value="{!appConfig.breadwinner_qbo__Bill_Default_Due_Date_Days_Number__c}" styleClass="slds-input slds-size_1-of-5" style="padding-left:0.3rem;padding-right:0.3rem;"  html-autofocus="true"/>
                                                                        <div class="slds-select_container slds-m-left_small slds-size_4-of-5">
                                                                            <apex:selectList size="1" id="defaultDueDaysOptions" value="{!appConfig.breadwinner_qbo__Bill_Default_Due_Date_Days_Option__c}" styleClass="slds-select ">
                                                                                <apex:selectOptions value="{!defaultDueDaysOptions}"/>
                                                                            </apex:selectList>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:actionFunction name="refreshRevenueAccounts" action="{!getAccountsFromQBO}"  reRender="accountCodeMapping" status="RevenueAccountCode-action-status" oncomplete="message();addLinkDynamically();">
                                                        <apex:param id="selectedFieldForDisplayLiability" name="selectedFieldForDisplayLiability" value="" assignTo="{!selectedFieldForDisplayLiability}" />
                                                        
                                                    </apex:actionFunction>
                                                    
                                                    
                                                    <h3 class="slds-section-title_divider slds-m-top_medium">QUICKBOOKS ONLINE PRODUCT/SERVICE SETTINGS</h3>
                                                    <div class="slds-m-horizontal_small slds-grid slds-wrap">
                                                        <div class="slds-form-element slds-m-top_small">
                                                            <span class="slds-checkbox">
                                                                <label class="slds-checkbox__label" >
                                                                    <apex:inputCheckbox value="{!selectedFieldForDisplayLiability}"  id="displayLiabilities" onchange="refreshRevenueAccounts(this.checked);" />
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-form-element__label slds-m-right_small">Display Liabilities and Revenue Accounts on New {!IF(isBillSection,'Bill','Purchase Order')} creation Page</span>
                                                                </label>
                                                            </span>
                                                        </div>
                                                        <div class="slds-m-top_small slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_12-of-12">
                                                            <div class="slds-form-element ">
                                                                <label class="slds-form-element__label" style="margin-right:2px;">Default QuickBooks Online Accounting code (Revenue Code)</label>
                                                                <a href="javascript:void(0);" onmouseover="identifyfield(this,'Default Revenue Accounting Code will be set while Creating new Product from new {!IF(isBillSection,'Bill','Purchase Order')} Page.',{!IF(isBillSection,'165','183')},'26')" onmouseout="mouseoutclose();">
                                                                    <img style="margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/InfoLightning.png')}"/><span class="slds-assistive-text">Help</span>
                                                                </a>
                                                                <div class="slds-size_1-of-1 slds-medium-size_2-of-6 slds-large-size_3-of-12">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList size="1" value="{!selectedFieldForRevenueCodeValue}" styleClass="slds-select" id="accountCodeMapping" onchange="getSaccountCodeMappingName();">
                                                                            <apex:selectOptions value="{!QBOAccountList}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                    <apex:actionFunction name="sendtoController" reRender="">
                                                                        <apex:param name="name" value="" assignTo="{!selectedFieldForRevenueCodeName}" />
                                                                    </apex:actionFunction>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--Default Setting End-->
                                                <!-- --------------------------Bill/POFields Fields mapping   ------------------------- -->
                                                <h3 class="slds-section-title_divider slds-m-top_medium slds-text-title_caps" style="text-transform: uppercase;">{!IF(isBillSection,'Bill','Purchase Order')} FIELDS FROM OPPORTUNITY
                                                </h3>                                           
                                                <div class="slds-m-horizontal_small">
                                                <div class="slds-text-body_small slds-m-top_small">
                                                    {!IF(isBillSection,'Bill','Purchase Order')} Fields are populated from the Opportunity object. Please select a field or a formula field below. This only affects {!IF(isBillSection,'Bill','Purchase Order')}s created from Opportunities.
                                                </div>
                                                <div class="slds-text-body_small slds-m-top_small" style="font-style: italic;">
                                                    Note: All mapped fields must be on the <a id="opptyFieldsLink" href="javascript:void(0);" target="_blank" style="color: #16325c;text-decoration: underline;">Opportunity</a>. If you wish to map data on an object other than the Opportunity, please create a formula field on the Opportunity to pull in the data.
                                                </div>
                                                <div class="slds-text-body_small slds-m-top_small" style="display:{!IF(AND(NOT(isBillSection),(isMultiOrgEnabled)),'','none')}">
                                                    Is the field you are looking for missing? It might be a Lookup field. Breadwinner cannot easily access lookup fields, however, you can create a simple cross-object formula field on Opportunity and use that field for mapping, the formula for that filed can be "Custom_Lookup__r.Name" (or StandardLookup.Name)
                                                </div>                                              
                                                <h3 class="slds-section__title slds-m-top_small">
                                                    {!IF(isBillSection,'Bill','Purchase Order')} Default Fields
                                                    
                                                </h3>                                               
                                                <div class="slds-grid slds-wrap slds-m-horizontal_small">
                                                    <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                        <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-m-bottom_small" style="display:{!IF(NOT(isMultiOrgEnabled),'','none')}">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >{!IF(isBillSection,'Bill','Purchase Order')} Date</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList value="{!selectedFieldForBillPODate}" id="selectedFieldForBillPODate" styleClass="slds-select" size="1">
                                                                            <apex:selectOption itemvalue="" itemLabel="--Current Date--"/>
                                                                            <apex:selectOptions value="{!billPODateFields}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-m-bottom_small" style="display:{!IF(AND(isBillSection,NOT(isMultiOrgEnabled)),'','none')}">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >Bill Due Date</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList id="selectedFieldForBillPODueDate" value="{!bwSetting.breadwinner_qbo__Opportunity_Bill_Due_Date__c}" styleClass="slds-select" size="1">
                                                                            <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                            <apex:selectOptions value="{!billPODateFields}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div Class="slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-m-bottom_small"  style="display:{!IF(isBillSection,'','none')}">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >{!IF(isBillSection,'Bill','Purchase Order')} Terms</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList id="billTerms" value="{!appConfig.breadwinner_qbo__Opportunity_Bill_Terms__c}" styleClass="slds-select" size="1">
                                                                            <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                            <apex:selectOptions value="{!textFields}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                        </div>
                                                        <apex:outputPanel layout="block" styleclass="slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-m-bottom_small" rendered="{!NOT(isBillSection)}">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >Purchase Order Custom Transaction Number</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList id="purchaseOrderNumber" value="{!selectedFieldForCustomTransaction}" styleClass="slds-select" size="1">
                                                                            <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                            <apex:selectOptions value="{!TextAndNumberFields}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        
                                                    </div>
                                                    <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                        <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-m-bottom_small" style="display:{!IF(AND(NOT(isBillSection),NOT(isMultiOrgEnabled)),'','none')}">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >Your message to Vendor</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList id="msgToVendor" value="{!selectedFieldForPOMsgToVendor}" styleClass="slds-select" size="1">
                                                                            <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                            <apex:selectOptions value="{!textFields}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-m-bottom_small" style="display:{!IF(NOT(isMultiOrgEnabled),'','none')}">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >Memo</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList id="memo" value="{!selectedFieldForMemo}" styleClass="slds-select" size="1">
                                                                            <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                            <apex:selectOptions value="{!textFields}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleclass="slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-m-bottom_small" rendered="{!isBillSection}">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >Bill Custom Transaction Number</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList id="billNumber" value="{!selectedFieldForCustomTransaction}" styleClass="slds-select" size="1">
                                                                            <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                            <apex:selectOptions value="{!TextAndNumberFields}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>  
                                                <!-- --------------------------Custom Fields and Location field mapping              ------------------------- -->
                                                <apex:outputPanel layout="block" rendered="{!OR(AND(isBillSection,isBillPOLocationFieldEnabled),AND(NOT(isBillSection),OR(isBillPOLocationFieldEnabled,isPOCustomField1Enabled, isPOCustomField2Enabled, isPOCustomField3Enabled)))}">
                                                    <h3 class="slds-section__title">
                                                        {!IF(isBillSection,'QuickBooks Online Location Tracking','Custom Fields')}
                                                        
                                                    </h3>
                                                    <div class="slds-text-title slds-m-vertical_xx-small slds-m-horizontal_small" style="display:{!IF(isBillSection,'none','')}">The following Purchase Order custom fields are enabled in QuickBooks Online, at Company Settings > Expenses > Purchase orders.</div>
                                                    <apex:outputPanel layout="block" styleclass="slds-grid slds-wrap slds-m-horizontal_small" rendered="{!NOT(isBillSection)}">
                                                        <apex:outputPanel styleClass="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" rendered="{!OR(isPOCustomField1Enabled,isPOCustomField2Enabled)}">
                                                            <apex:outputPanel layout="block" styleClass="slds-m-bottom_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" rendered="{!isPOCustomField1Enabled}">
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label" >{!POCustomField1_Label}&nbsp;(Custom Field 1)</label>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-select_container">
                                                                            <apex:selectList id="customField1" value="{!appConfig.breadwinner_qbo__Opportunity_PO_Custom_Field_1__c}" styleClass="slds-select" size="1">
                                                                                <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                                <apex:selectOptions value="{!fieldsForPOCustomFields}"/>
                                                                            </apex:selectList>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="slds-m-bottom_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" rendered="{!isPOCustomField2Enabled}">
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label" >{!POCustomField2_Label}&nbsp;(Custom Field 2)</label>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-select_container">
                                                                            <apex:selectList id="customField2" value="{!appConfig.breadwinner_qbo__Opportunity_PO_Custom_Field_2__c}" styleClass="slds-select" size="1">
                                                                                <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                                <apex:selectOptions value="{!fieldsForPOCustomFields}"/>
                                                                            </apex:selectList>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" styleClass="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" >
                                                            <apex:outputPanel layout="block" styleClass="slds-m-bottom_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" rendered="{!isPOCustomField3Enabled}">
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label" >{!POCustomField3_Label}&nbsp;(Custom Field 3)</label>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-select_container">
                                                                            <apex:selectList id="customField3" value="{!appConfig.breadwinner_qbo__Opportunity_PO_Custom_Field_3__c}" size="1" styleClass="slds-select">
                                                                                <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                                <apex:selectOptions value="{!fieldsForPOCustomFields}"/>  
                                                                            </apex:selectList>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="block" styleClass="slds-m-bottom_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" rendered="{!isBillPOLocationFieldEnabled}">
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label" >{!BillPOLocationField_Label}&nbsp;(QuickBooks Online Location Tracking)</label>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-select_container">
                                                                            <apex:selectList id="location" value="{!selectedFieldForLocation}" size="1" styleClass="slds-select">
                                                                                <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                                <apex:selectOptions value="{!fieldsForPOCustomFields}"/>
                                                                            </apex:selectList>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleclass="slds-grid slds-size_1-of-2 slds-wrap slds-m-horizontal_small" rendered="{!AND(isBillSection,isBillPOLocationFieldEnabled)}">
                                                        <apex:outputPanel layout="block" styleClass="slds-m-bottom_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" >         
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >{!BillPOLocationField_Label}&nbsp;(QuickBooks Online Location Tracking)</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList id="locationField" value="{!selectedFieldForLocation}" size="1" styleClass="slds-select">
                                                                            <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                            <apex:selectOptions value="{!fieldsForPOCustomFields}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>                                                            
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                                <!-- --------------------------Custom Fields and Location field mappingEnd   ------------------------- -->
                                                <div class="slds-text-body_small" style="display:{!IF(OR(isBillSection,AND(NOT(isBillSection),NOT(isMultiOrgEnabled))),'','none')}">
                                                    Is the field you are looking for missing? It might be a Lookup field. Breadwinner cannot easily access lookup fields, however, you can create a simple cross-object formula field on Opportunity and use that field for mapping, the formula for that filed can be "Custom_Lookup__r.Name" (or StandardLookup.Name)
                                                </div>                                              
                                                </div>                                              

                                                <!-- --------------------------Bill/POFields Fields mapping  End            ------------------------- -->                                                
                                                
                                            </apex:outputPanel>
                                            
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" rendered="{!AND(isMultiOrgEnabled,IF(isBillSection,NOT(isBillEnabled),NOT(isPOEnabled)),orgIdValue=='')}" styleClass="slds-m-horizontal_small"><div class="infoM3"  style="border-radius: 4px;">Please Enable {!IF(isBillSection,'Bills','Purchase Orders')}</div></apex:outputPanel>
                                        <h3 class="slds-section-title_divider slds-m-top_medium slds-m-horizontal_small" style="display:{!IF(AND(IF(isBillSection,isBillEnabled,isPOEnabled),OR(NOT(isMultiOrgEnabled),orgIdValue=='')),'','none')};"  >
                                            {!IF(isBillSection,'Bill','Purchase Order')} Line Item Preference
                                            
                                        </h3>
                                        <div style="display:{!IF(AND(IF(isBillSection,isBillEnabled,isPOEnabled),OR(NOT(isMultiOrgEnabled),orgIdValue=='')),'','none')};" >
                                            
                                            <div class="slds-m-horizontal_small">
                                            <div class="slds-text-body_small slds-m-top_small slds-m-left_small">
                                                
                                                QuickBooks Online allows two entirely different types of line items on {!IF(isBillSection,'Bill','Purchase Order')}s. These line item types are called "Account Details" and "Item Details". While "Item Details" are more appropriate for specific products or quantified services, "Account Details" are more appropriate for general services or non-inventory items you might receive. Please ask your Accountant or Bookkeeper if you have questions about which one's to use.
                                                
                                                <br/><br/>
                                                
                                                While Breadwinner can push Opportunity Products to either "Account Details" or "Item Details", we can only push to one, not both simultaneously. Please select which you want to have your Opportunity Products populate. You can still manually add other lines in either category during an individual {!IF(isBillSection,'Bill','Purchase Order')} creation.
                                                
                                            </div>
                                            <div class="slds-grid slds-wrap slds-m-horizontal_small">
                                                <apex:outputPanel styleClass="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" >
                                                    <apex:outputPanel layout="block" styleClass="slds-m-top_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" >
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >Map Opportunity Line Items</label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="selectedMappingTypeForLineItems" value="{!selectedMappingTypeForLineItems}" styleClass="slds-select" size="1">
                                                                        <apex:selectOptions value="{!optyProductsSync}"/>
                                                                        <apex:actionSupport event="onchange" reRender="LineItemsMapping" status="assign-action-status" >
                                                                        </apex:actionSupport>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </div>
                                            </div>
                                            <h3 class="slds-section-title_divider slds-m-top_medium slds-m-horizontal_small"  >
                                                {!IF(isBillSection,'Bill','Purchase Order')} DEFAULT LINE ITEM FIELDS
                                                
                                            </h3>
                                            <div class="slds-m-horizontal_small">                                           
                                            <apex:outputPanel styleclass="slds-grid slds-wrap slds-m-horizontal_small" layout="block" id="LineItemsMapping">
                                                <div class="slds-size_1-of-1" style="display:inline">
                                                    <div class="slds-text-body_small slds-m-top_small">
                                                        {!IF(isBillSection,'Bill','Purchase Order')} Line Item Fields are populated from the Opportunity line item object. Please select a field or a formula field below. This only affects {!IF(isBillSection,'Bill','Purchase Order')}s created from Opportunities.
                                                    </div>
                                                    <div class="slds-text-body_small slds-m-top_small" style="font-style: italic;">
                                                        Note: All mapped fields must be on the <a id="opptyProdFieldsLink" href="javascript:void(0);" target="_blank" style="color: #16325c;text-decoration: underline;">Opportunity Product</a>. If you wish to map data on an object other than the Opportunity Product, please create a formula field on the Opportunity Product to pull in the data.
                                                    </div>
                                                </div>
                                                <apex:outputPanel styleClass="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" layout="block">
                                                    <apex:outputPanel layout="block" styleClass="slds-m-top_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" >
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >{!IF(isBillSection,'Bill','Purchase Order')} Vendor Account <span style="color:red">(Required)</span></label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="selectedFieldForVendorAccount" value="{!selectedFieldForVendorAccount}" styleClass="slds-select" size="1">
                                                                        <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                        <apex:selectOptions value="{!BillPOSupplierAccountFields}"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-m-top_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12"  rendered="{!OR(selectedMappingTypeForLineItems=='Items',AND(ForPurchase,selectedMappingTypeForLineItems==''))}">
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >{!IF(isBillSection,'Bill','Purchase Order')} Line Item Product/Service  <span style="color:red">(Required)</span></label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="selectedFieldForProductName" value="{!selectedFieldForProductName}" size="1" styleClass="slds-select">
                                                                        <apex:selectOption itemvalue="" itemLabel="--Use Default Product Name Field--"/>
                                                                        <apex:selectOptions value="{!BillPOSupplierTextFields}"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" styleClass="slds-m-top_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" >
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >{!IF(isBillSection,'Bill','Purchase Order')} Line Item Vendor Description</label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="selectedFieldForVendorDescription" value="{!selectedFieldForVendorDescription}" size="1" styleClass="slds-select">
                                                                        <apex:selectOption itemvalue="" itemLabel="--Use Default Product Description Field--"/>
                                                                        <apex:selectOptions value="{!BillPOSupplierTextFields}"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" >
                                                    <apex:outputPanel layout="block" styleClass="slds-m-top_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" >
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >{!IF(isBillSection,'Bill','Purchase Order')} Line Item Vendor Price <span style="color:red">(Required)</span></label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="selectedFieldForVendorPrice" value="{!selectedFieldForVendorPrice}" size="1" styleClass="slds-select">
                                                                        <apex:selectOption itemvalue="" itemLabel="--Use Default Product Sales Price Field--"/>
                                                                        <apex:selectOptions value="{!BillPOSupplierPriceFields}"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    
                                                    
                                                    <apex:outputPanel layout="block" styleClass="slds-m-top_small slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" >
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >{!IF(isBillSection,'Bill','Purchase Order')} Line Item Vendor Quantity </label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="selectedFieldForVendorQuantity" value="{!selectedFieldForVendorQuantity}" size="1" styleClass="slds-select">
                                                                        <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                        <apex:selectOptions value="{!BillPOSupplierPriceFields}"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                                <div class="slds-text-body_small slds-m-top_small">
                                                    Is the field you are looking for missing? It might be a Lookup field. Breadwinner cannot easily access lookup fields, however, you can create a simple cross-object formula field on Opportunity product and use that field for mapping, the formula for that filed can be "Custom_Lookup__r.Name" (or StandardLookup.Name)
                                                </div>
                                            </apex:outputPanel>
                                            </div>
                                            <h3 class="slds-section-title_divider slds-m-top_medium slds-m-horizontal_small"  style="display:{!IF(AND(isMultiOrgEnabled,orgIdValue==''),'','none')}">
                                                {!IF(isBillSection,'Bill','Purchase Order')} FIELDS FROM OPPORTUNITY
                                                
                                            </h3>                                           
                                            <apex:outputPanel layout="block"  rendered="{!AND(isMultiOrgEnabled,orgIdValue=='')}" styleclass="slds-m-horizontal_small">
                                                <div class="slds-text-body_small slds-m-top_small slds-size_1-of-1 slds-m-horizontal_small">
                                                    {!IF(isBillSection,'Bill','Purchase Order')} Fields are populated from the Opportunity object. Please select a field or a formula field below. This only affects {!IF(isBillSection,'Bill','Purchase Order')}s created from Opportunities.
                                                </div>
                                                <div class="slds-text-body_small slds-m-top_small slds-size_1-of-1 slds-m-horizontal_small" style="font-style: italic;">
                                                    Note: All mapped fields must be on the <a id="opptyFieldsLink" href="javascript:void(0);" target="_blank" style="color: #16325c;text-decoration: underline;">Opportunity</a>. If you wish to map data on an object other than the Opportunity, please create a formula field on the Opportunity to pull in the data.
                                                </div>
                                                <h3 class="slds-section__title slds-m-top_small slds-m-horizontal_small">
                                                    {!IF(isBillSection,'Bill','Purchase Order')} Default Fields
                                                    
                                                </h3>
                                                <div class="slds-grid slds-wrap slds-m-horizontal_small">
                                                <div class="slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-12 slds-m-horizontal_small">
                                                    <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >{!IF(isBillSection,'Bill','Purchase Order')} Date</label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="billPoDateField" value="{!selectedFieldForBillPODate}" styleClass="slds-select" size="1">
                                                                        <apex:selectOption itemvalue="" itemLabel="--Current Date--"/>
                                                                        <apex:selectOptions value="{!billPODateFields}"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <apex:outputpanel styleclass="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-m-top_small" rendered="{!isBillSection}" layout="block">
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >Bill Due Date</label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="billDueDate" value="{!bwSetting.breadwinner_qbo__Opportunity_Bill_Due_Date__c}" styleClass="slds-select" size="1">
                                                                        <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                        <apex:selectOptions value="{!billPODateFields}"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel styleclass="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-m-top_small" rendered="{!NOT(isBillSection)}" layout="block">
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >Memo</label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="poMemoField" value="{!selectedFieldForMemo}" styleClass="slds-select" size="1">
                                                                        <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                        <apex:selectOptions value="{!textFields}"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputpanel>
                                                </div>
                                                <apex:outputpanel styleclass="slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-12 slds-m-horizontal_small"  layout="block">
                                                    <apex:outputpanel styleclass="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" rendered="{!NOT(isBillSection)}" layout="block">
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >Your message to Vendor</label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="poMsgToVendorField" value="{!selectedFieldForPOMsgToVendor}" styleClass="slds-select" size="1">
                                                                        <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                        <apex:selectOptions value="{!textFields}"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel styleclass="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" rendered="{!isBillSection}" layout="block">
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label" >Memo</label>
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-select_container">
                                                                    <apex:selectList id="billMemoField" value="{!selectedFieldForMemo}" styleClass="slds-select" size="1">
                                                                        <apex:selectOption itemvalue="" itemLabel="--None--"/>
                                                                        <apex:selectOptions value="{!textFields}"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </apex:outputpanel>
                                                </apex:outputpanel>
                                                <div class="slds-text-body_small slds-m-top_small">
                                                    Is the field you are looking for missing? It might be a Lookup field. Breadwinner cannot easily access lookup fields, however, you can create a simple cross-object formula field on Opportunity and use that field for mapping, the formula for that filed can be "Custom_Lookup__r.Name" (or StandardLookup.Name)
                                                </div>
                                                </div>
                                            </apex:outputPanel>
                                                
                                        <!-- Bill Mapping to Opportunity -->
                                        
                                        <apex:outputPanel layout="block"  rendered="{!isBillSection}">  
                                                <h3 class="slds-section-title_divider slds-m-top_medium slds-m-horizontal_small" style="padding: 0.19rem;">
                                                    <button class="slds-button slds-section__title-action"  type="button" onclick="showHideSectionConent('divsection','divsectionImage');" style="letter-spacing: .0625rem;text-transform:uppercase;">
                                                        <img id="divsectionImage" src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/SectionClose.png')}" style="margin-bottom: 3px;margin-right: 4px;" />
                                                        <span style="color: #54698d;">Bill Mapping to Opportunity</span></button>
                                                </h3>
                                                 <div class="slds-section slds-m-horizontal_small" id="divsection" >
                                                
                                                <div class="slds-section__content slds-m-horizontal_small">
                                                    <div class="slds-text-title">Opportunity Mapping is only used if your Bills are created directly in QuickBooks Online, but not via Breadwinner, and you want those Bills matched back to a specific Opportunity. This is a common situation if your Finance Team creates the Bills directly in QuickBooks Online, or an API / Third Party Integration, or a repeating Bills needs subsequent Bills matched to an Opportunity.
                                                        <br/><br/>   At the time Breadwinner first discover the Bills (but not upon later edits) Breadwinner will try to match a QuickBooks Online Bill No. or Memo with an Opportunity ID. To do this, Enable following checkbox.
                                                        <br/><br/>   For this to work, you'll need to have the Opportunity ID in either the Bill Number, or the Bill Memo. The Opportunity ID always starts with 006 and can be seen in the URL when you are on the Opportunity record. The full Opportunity ID might look like "00636000006uQ7hAAE". The Opportunity ID can be anywhere in the Bill Number or Bill Memo.
                                                    </div>
                                                        <div class="slds-form-element slds-m-left_small slds-m-top_small">
                                                            <span class="slds-checkbox">
                                                                <label class="slds-checkbox__label" >
                                                                    <apex:inputCheckbox id="mapBillsToOpportunity" value="{!bwSetting.breadwinner_qbo__Map_Bills_to_Opportunity_by_Id__c}" />
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-form-element__label slds-m-right_small">Map Bills to Opportunity by ID</span>
                                                                </label>
                                                            </span>
                                                        </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                            <div id="urlgen" class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_x-large" >
                                                <apex:outputPanel layout="block" styleclass="slds-m-horizontal_small" rendered="{!AND(isAdministrator, isEnterprise)}" style="font-size: .75rem;">
                                                    <apex:outputLink id="customUrl1" value="{!URLFOR($Page.breadwinner_qbo__CustomURLGenerator)}" style="color:gray" styleClass="slds-m-left_small"> Click here</apex:outputLink>&nbsp;to go to custom {!IF(isBillSection,'Bill','PO')} URL generation page.
                                                </apex:outputPanel>
                                            </div>                                            
                                        </div>
                                        <div style="display:{!IF(IF(orgIdValue=='',IF(isBillSection,isBillEnabled,isPOEnabled),selectedFieldtoEnableBIllPO),'','none')}" >
                                            <apex:commandButton value="Save" id="saveBillPOConfiguration" action="{!saveBillPOConfiguration}" reRender="Oathissuemsgpo,SetupAndConfig-TAB5" status="assign-action-status" oncomplete="message();scrolltoTop();addLinkDynamically();" styleClass="slds-button slds-button_brand slds-m-top_large slds-m-bottom_large" style="margin-left:40%"/>
                                        </div>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>
                            
                            
                        </div>
                        <!-- ---------------------- Bill/Pos Menu Ends Here ------------------- -->

                        <!-- Vendor Credits Content -->
                        <!--div id="SetupAndConfig-TAB6" class="slds-hide" aria-labelledby="VendorCreditsContent">
                            <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                <div class="slds-media slds-media_center">
                                    <div class="slds-media__figure">
                                        <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                        </svg>
                                    </div>
                                    <div class="slds-media__body">
                                        <p class="slds-page-header__title slds-truncate" title="Vendor Credits Configuration">Vendor Credits Configuration</p>
                                        <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online </p>
                                    </div>
                                </div>
                            </div>
                            <apex:actionFunction name="VendorCreditQBOOrgId" action="{!MultiOrgChanging}" status="assign-action-status"  reRender="VendorCreditsblock" oncomplete="HideStyleSheet();message();addLinkDynamically();" >
                                <apex:param name="PoPassQBOOrgId" value="" assignTo="{!orgIdValue}"/>
                            </apex:actionFunction>

                            <apex:actionFunction name="vendorcreditsync"  action="{!allowBillsPOsSync}" status="assign-action-status" rerender="VendorCreditsblock"  oncomplete="HideStyleSheet();message();addLinkDynamically();">
                                 <apex:param id="VendorCreditValue" name="AllowVendorCreditsync" value="" />
                            </apex:actionFunction>

                            <apex:outputPanel id="VendorCreditMenuId" rendered="{!isMultiOrgEnabled}">
                                <ul class="slds-tabs_default__nav slds-m-bottom_small" role="tablist">
                                    <apex:variable value="{!0}" var="i" >
                                        <apex:repeat value="{!listAppConfig}" var="appC">
                                            
                                            <li class="slds-tabs_default__item slds-text-title_caps slds-truncate" title="{!appC.Connecting_App_Name__c}" role="presentation">
                                                <a class="slds-tabs_default__link" href="javascript:void(0);" role="tab" onclick="SubTabsSelect(this, '{!appC.breadwinner_qbo__QBO_Org_ID__c}','Vendor Credit'); " tabindex="0" aria-selected="true" aria-controls="{!appC.breadwinner_qbo__QBO_Org_ID__c}" id="{!appC.breadwinner_qbo__QBO_Org_ID__c}__item">
                                                    {!appC.Connecting_App_Name__c}
                                                </a>
                                            </li>
                                            <apex:variable value="{!i+1}" var="i"/>
                                        </apex:repeat>
                                    </apex:variable>
                                </ul>
                            </apex:outputPanel>
                           
                            <apex:outputPanel id="VendorCreditsblock">
                            <div class="slds-m-horizontal_small slds-m-top_medium">  
                            <apex:pageMessages />                              
                                <apex:outputPanel Styleclass="slds-clearfix">
                                    <div class="slds-form-element slds-float_left ">
                                        <label class="slds-checkbox_toggle slds-grid ">
                                            <span class="slds-form-element__label slds-m-bottom_none">Enable Vendor Credit Sync</span>
                                            <apex:inputCheckbox value="{!appConfig.Sync_Vendor_Credits__c}"  onclick="vendorcreditsync(this.checked)"/>
                                            <span class="slds-checkbox_faux_container" aria-live="assertive">
                                                <span class="slds-checkbox_faux"></span>
                                                <span class="slds-checkbox_on">Enabled</span>
                                                <span class="slds-checkbox_off">Disabled</span>
                                            </span>
                                        </label>
                                    </div>
                                </apex:outputPanel>
                            </div>
                            </apex:outputPanel> 
                        </div-->
                        <!-- Vendor Credits Content Ends Here --> 

                        <!-- QBO Companies Content -->
                        <div id="SetupAndConfig-TAB7" class="slds-hide" aria-labelledby="QBOCompaniesContent">
                            <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                <div class="slds-media slds-media_center">
                                    <div class="slds-media__figure">
                                        <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                        </svg>
                                    </div>
                                    <div class="slds-media__body">
                                        <p class="slds-page-header__title slds-truncate" title="QuickBooks Online Companies Configuration">QuickBooks Online Companies Configuration</p>
                                        <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online </p>
                                    </div>
                                </div>
                            </div>
                            <apex:outputPanel id="QBOCompaniesblock">
                            <div class="slds-m-horizontal_small slds-m-top_medium">
                                <apex:pageMessages id="saveCompanyConfig"/>
                                <div class="slds-section-title_divider slds-m-bottom_medium slds-m-top_xx-small"> DO NOT MATCH NEW QuickBooks Online Companies</div>
                                <div class="slds-m-left_small slds-form-element">
                                    <div class="slds-form-element__control">
                                        <span class="slds-checkbox">
                                            <label class="slds-checkbox__label" >
                                                <apex:inputCheckbox id="doNotSyncNewQBOCompanies" value="{!bwSetting.breadwinner_qbo__Do_Not_Sync_New_QBO_Companies__c}"/>
                                                <span class="slds-checkbox_faux"></span>
                                                <span class="slds-form-element__label">If a QuickBooks Online Company is not created via Breadwinner, then by default do not match that QuickBooks Online Company or it's Invoices.</span>
                                            </label>                                                                    
                                        </span>
                                        <label class="slds-form-element__label slds-m-top_xx-small slds-m-left_x-large" > (Technically, that QuickBooks Online Company will be imported into Salesforce but it will not be associated with any Salesforce Account.) </label>
                                    </div>
                                </div>
                            </div>
                            </apex:outputPanel>                
                                        <!--  Breadwinner wide QBO Companies settings ends here -->
                            
                            <div class="slds-m-top_large" align="center">
                                <apex:commandLink action="{!saveQBOCompanyConfig}" id="saveQBOCompanyConfiguration" styleClass="slds-button slds-button_brand" status="assign-action-status" value="Save" reRender="saveCompanyCOnfig,QBOCompaniesblock" oncomplete="HideStyleSheet();message();"/>
                            </div>
                        </div>
                        <!-- QBO Companies Content Ends Here -->            

                                <div id="SetupAndConfig-TAB8" class="slds-hide" aria-labelledby="EmailsContent">
                                    <!-- -----------------------------Emails Tab header start ---------------------------->
                                    <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                    <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                </svg>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Emails Configuration">Email Configuration</p>
                                                <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------Emails Tab header END ---------------------------->
                                    <!-- -------------------- Breadwinner wide Email settings starts here------------------- -->
                                    <apex:outputPanel id="EmailConfig">
                                        <div class="slds-m-horizontal_small slds-m-top_medium">
                                            <apex:pageMessage rendered="{!Not(OrgWideEmailAddresses.size > 0)}" severity="info" summary="Note:" >
                                                You do not have any Organization Wide Email Addresses setup. Please read <a target="_blank" href="https://help.salesforce.com/articleView?id=orgwide_email.htm&type=0">Salesforce's Support Article</a> for more information.
                                            </apex:pageMessage>
                                            <apex:pageMessages ></apex:pageMessages>
                                            <div class="slds-section-title_divider"> Send Emails from</div>
                                            <div class="slds-grid slds-wrap slds-m-left_small slds-m-top_medium">
                                                <div class="slds-form-element">
                                                    <label class="slds-form-element__label" >When Breadwinner sends the Invoice PDF as an Email, you can have that Email sent from an Organization Wide Email Address. To select an email address as the default Organization Wide Email Address, please select it below.</label>
                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                        <div class="slds-form-element__control">
                                                            <div class="slds-select_container">
                                                                <apex:selectList id="selectOrgWideEmailAddress" value="{!bwSetting.breadwinner_qbo__Default_OWEA_for_Send_Email__c}" size="1" styleClass="slds-select" disabled="{!(OrgWideEmailAddresses.size == 0)}">
                                                                    <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                    <apex:selectOptions value="{!OrgWideEmailAddresses}"/>    
                                                                </apex:selectList>
                                                            </div>
                                                        </div>
                                                    </div>    
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="slds-m-top_medium" align="center">
                                            <apex:commandButton action="{!SaveOrgwideEmailConfig}" id="SaveOrgwideEmailConfiguration" styleClass="slds-button slds-button_brand" status="assign-action-status" value="Save" reRender="EmailConfig,SetupAndConfig-TAB8" oncomplete="message()" disabled="{!(OrgWideEmailAddresses.size == 0)}" />
                                        </div>
                                    </apex:outputPanel>
                                    <!-- -------------------- Breadwinner wide Email settings ends here------------------- -->
                                </div> 
                                <div id="Learn-TAB1" class="slds-hide" aria-labelledby="University">
                                    <!-- -----------------------------University Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon-custom-custom16" title="University">
                                                    <svg aria-hidden="true" class="slds-icon">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/custom-sprite/svg/symbols.svg#custom16')}"></use>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="University">University</p>
                                                <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------University Tab header END ---------------------------->
                                    <div class="slds-text-heading_large slds-m-top_x-large slds-m-horizontal_x-large" style="font-size: 20px;font-weight: 400;">Welcome to the Breadwinner University!</div>
                                    <div class="slds-text-heading_large slds-m-top_small slds-m-horizontal_x-large" style="font-size: 15px;font-weight: 400;">This is a collection of educational videos, that were created to help you to learn how to use Breadwinner for QuickBooks Online.</div>
                                    <div class="slds-grid slds-wrap slds-m-horizontal_x-large slds-m-bottom_xx-large slds-m-top_large" style="align-items:inherit;">
                                        <div class="slds-col slds-size_1-of-1 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-box">
                                            <table style="width: 100%;">
                                                <tr>
                                                    <td style="width: 25%;">
                                                        <span class="wistia_embed  wistia_async_6w7sjrqlzd popover=true popoverAnimateThumbnail=true video_still_time=2"  style="display:inline-block;height:10em;width:15em">&nbsp;</span>
                                                    </td>
                                                    <td style="width: 75%;">
                                                        <div class="slds-m-horizontal_small slds-text-heading_large" style="font-size: 18px;font-weight: 400;">Understanding QBO Products</div>
                                                        <div class="slds-m-horizontal_small slds-text-heading_large slds-m-top_small" style="font-size: 14px;font-weight: 400;">This video explains the differences between QBO and SF Products, and how to use and set them up.</div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="slds-grid slds-wrap slds-m-horizontal_x-large slds-m-bottom_xx-large" style="align-items:inherit;">
                                        <div class="slds-col slds-size_1-of-1 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-box">
                                            <table style="width: 100%;">
                                                <tr>
                                                    <td style="width: 25%;">
                                                        <span class="wistia_embed  wistia_async_g755uz2c0v popover=true popoverAnimateThumbnail=true"  style="display:inline-block;height:10em;width:15em">&nbsp;</span>
                                                    </td>
                                                    <td style="width: 75%;">
                                                        <div class="slds-m-horizontal_small slds-text-heading_large" style="font-size: 18px;font-weight: 400;">Emailing Invoice PDF - QuickBooks Online</div>
                                                        <div class="slds-m-horizontal_small slds-text-heading_large slds-m-top_small" style="font-size: 14px;font-weight: 400;">This video provides an overview of sending Invoices via Breadwinner.</div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="slds-grid slds-wrap slds-m-horizontal_x-large" style="align-items:inherit;">
                                        <div class="slds-col slds-size_1-of-1 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-box">
                                            <table style="width: 100%;">
                                                <tr>
                                                    <td style="width: 25%;">
                                                        <span class="wistia_embed  wistia_async_nfwp0u6fhy popover=true popoverAnimateThumbnail=true"  style="display:inline-block;height:10em;width:15em">&nbsp;</span>
                                                    </td>
                                                    <td style="width: 75%;">
                                                        <div class="slds-m-horizontal_small slds-text-heading_large" style="font-size: 18px;font-weight: 400;">Reparenting QuickBooks Online Company to different SF Account</div>
                                                        <div class="slds-m-horizontal_small slds-text-heading_large slds-m-top_small" style="font-size: 14px;font-weight: 400;">This video provides an overview of how to reparent a QBO Company to a different SF Account.</div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div id="Learn-TAB2" class="slds-hide" aria-labelledby="KnowledgeBase">
                                    <!-- -----------------------------KnowledgeBase Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon_container_circle slds-icon-action-description" title="Knowledge Base">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon_small">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/action-sprite/svg/symbols.svg#google_news')}"></use>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Knowledge Base">Knowledge Base</p>
                                                <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------KnowledgeBase Tab header END ---------------------------->
                                    
                                    <div id="KnowledgeBaseIframeDivId">
                                    </div>
                                </div>
                                <div id="Learn-TAB3" class="slds-hide" aria-labelledby="ContactSupport">
                                    <!-- -----------------------------ContactSupport Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon_container_circle slds-icon-action-description" title="Contact Support">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon_small">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/action-sprite/svg/symbols.svg#email')}"></use>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Contact Support">Contact Support</p>
                                                <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------ContactSupport Tab header END ---------------------------->
                                    
                                    <div id="ContactSupportIframeDivId">
                                    </div>
                                </div>
                                
                                
                                <div id="ADMIN-1" class="slds-hide" role="tabpanel" aria-labelledby="Billing">
                                    <!-- -----------------------------Billing Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon-custom-custom17" title="Billing">
                                                    <svg aria-hidden="true" class="slds-icon">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/custom-sprite/svg/symbols.svg#custom17')}"></use>
                                                    </svg>
                                                </span>
                                                
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Billing">Billing</p>
                                                <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------Billing Tab header END ---------------------------->
                                    <div class="slds-m-top_medium slds-m-horizontal_small" id="BillingDiv" >
                                        <apex:outputPanel rendered="{!isAdministrator}" layout="block">
                                            <h3 class="slds-section-title_divider slds-m-top_medium">Your Breadwinner Subscription </h3>
                                            <apex:outputPanel rendered="{!orgStatus !='subscribed'}" layout="block">
                                            
                                                <apex:outputPanel layout="block" styleclass="slds-m-horizontal_small slds-m-top_medium" > 
                                                    <apex:outputPanel rendered="{!IF(orgStatus =='expired', true, false)}" layout="block" styleClass="slds-m-horizontal_small slds-text-longform" style="color: #5876a3;">
                                                        <div class="slds-m-top_medium slds-text-body_medium">
                                                            Your Data Subscription to Breadwinner has Expired. Please contact sales@breadwinner.com<div style="display:{!IF(OR(isDeveloperOrg,isSandbox),'none','inline')}">, or please contact your Account Executive.</div>
                                                        </div>
                                                        <div class="slds-m-top_medium slds-text-body_medium">
                                                            Breadwinner last sync with QuickBooks Online was {!lastSyncDays} days ago, and the average number of Invoices (as of then) was {!AverageMonthlyInvoiceCount}. 
                                                            You can see how Breadwinner calculated that&nbsp; <apex:outputLink value="{!$Page.breadwinner_qbo__InvoiceMapping}" style="color:blue;">here</apex:outputLink>. 
                                                            If the last sync was more than a week or two ago, this number might not be reflective of your real average invoice count.
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{!IF(AND(orgStatus !='expired',NOT(OR(isDeveloperOrg,isSandbox))), true, false)}">
                                                        This tab is used to display billing information, and will be active once you subscribe.
                                                        <br/><br/>You have not subscribed to Breadwinner yet, please contact your Account Executive.
                                                        
                                                        
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{!IF(AND(orgStatus !='expired',OR(isDeveloperOrg,isSandbox)), true, false)}">
                                                        You can't subscribe on {!IF(isDeveloperOrg,'Developer', IF(isSandbox, 'Sandbox',''))} Org.<br/>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                                
                                                
                                            </apex:outputPanel>   
                                            <apex:outputPanel rendered="{!Not(ISBLANK(hostedToken))}" styleClass="slds-m-horizontal_small" layout="block">
                                                <br/> 
                                                <script>
                                                    function showImages(imgId)
                                                    {   
                                                        j$('.imgCls').hide();
                                                        j$('#DivImgs').show();
                                                        j$('#'+imgId).show();
                                                        
                                                    }
                                                    j$('#BillingDiv').click (function (e) {
                                                    if(!(j$(e.target).is('.clickBtnCls') )){
                                                        if( j$('#DivImgs').css('display') != 'none' )
                                                            j$('#DivImgs').hide();
                                                        }
                                                    });
                                                    
                                                </script>

                                                <button class="slds-button slds-button_brand slds-m-top_x-small clickBtnCls " onclick="showImages('CCEditImg')"  type="button">Edit my Credit Card Details </button>
                                                <button class="slds-button slds-button_brand slds-m-top_x-small clickBtnCls " onclick="showImages('EditContactInfoImg')"  type="button"> Edit Email Address for Billing </button>                                              
                                                <button class="slds-button slds-button_brand slds-m-top_x-small clickBtnCls " onclick="showImages('DownloadInvoicesImg')"  type="button"> Download my PDF Invoices/Statements </button>
                                                <button class="slds-button slds-button_brand slds-m-top_x-small clickBtnCls " onclick="showImages('CancelImg')"  type="button"> Cancel my Breadwinner Subscription</button>
                                                
                                                <div id="DivImgs" style="display:none;">
                                                    <div aria-hidden="false" aria-labelledby="prompt-heading-id" aria-describedby="prompt-message-wrapper" role="alertdialog" class="slds-modal slds-modal_prompt slds-fade-in-open">
                                                        <div class="slds-modal__container " role="document" id="prompt-message-wrapper" tabindex="0" style="max-width:43rem;">
                                                            <a href="{!billingPortalLink}" target="_blank">  
                                                                <img src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/Update_payment.png')}"  id="CCEditImg"   style="display:none"  class="imgCls"/>
                                                                <img src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/Cancel_Subscription.png')}"  id="CancelImg"   style="display:none"  class="imgCls"/>
                                                                <img src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/Download_statements.png')}"  id="DownloadInvoicesImg"   style="display:none"  class="imgCls"/>
                                                                <img src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/Edit_ContactInfo.png')}"  id="EditContactInfoImg"   style="display:none"  class="imgCls"/>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                               <!--<p class="slds-m-top--medium"> Access Billing Portal by clicking&nbsp;<a href="{!billingPortalLink}" target="_blank">here</a>. </p> -->
                                             </apex:outputPanel>                                            
                                            
                                            <apex:outputPanel rendered="{!OR(orgStatus =='subscribed' ,orgStatus  == 'trial')}" layout="block">
                                            <h3 class="slds-section-title_divider slds-m-top_medium">Average Monthly Invoice Count </h3>
                                            <div class="slds-m-horizontal_small">
                                             <div class="slds-text-longform slds-m-top_medium">
                                                    <p>
                                                        Breadwinner is charged based on your monthly Invoice Volume, averaged over the last 3 months. 
                                                        We count Invoices created with Breadwinner, and Invoices created directly in your accounting system. 
                                                        We ignore Voided, and Deleted invoices.
                                                    </p>
                                                    <p>
                                                        We calculate the number of Invoices with an Invoice Date in the last 90 days, and divide by 3, to determine your average monthly volume.
                                                        Taking your average invoice count is beneficial to you the customer, as seasonal spikes or a particularly busy month are smoothed out.
                                                        If you consistently go over your limit, we will continue syncing your invoices, however we will contact you to begin the process of upgrading you to the next level.
                                                    </p>
                                                    <p>
                                                        You are on the {!bwSetting.Plan_Name__c} Plan and can sync up to {!ROUND(bwSetting.Invoice_Tier__c,0)} Average Invoices per month. You are currently averaging {!AverageMonthlyInvoiceCount} invoices per month.
                                                        <br/><br/>
                                                        <apex:outputLink value="{!$Page.breadwinner_qbo__InvoiceMapping}" styleclass="slds-button slds-button_brand"> Show how the Average Monthly Invoices are Calculated </apex:outputLink> 
                                                    </p>
                                                    
                                                </div>
                                                      
                                                <!--
                                                You are on the {!bwSetting.Plan_Name__c} Plan and can sync up to {!ROUND(bwSetting.Invoice_Tier__c,0)} Average Invoices per month. You are currently averaging {!AverageMonthlyInvoiceCount} invoices per month.
                                                <br/> <br/>
                                                If your Invoices volume goes over your plan amount, we will not cut off syncing or invoice creation, and Breadwinner will continue to work. However, if you are over your Invoice volume on a rolling 90-day period, we will upgrade you automatically to the appropriate plan.
                                                --> 
                                                
                                            </div>
                                            </apex:outputPanel>                       
                                         </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;color: black;" rendered="{!NOT(isAdministrator)}">
                                            You must be a Salesforce System Administrator to access billing information.
                                        </apex:outputPanel>
                                    </div>
                                    
                                </div>
                                <div id="ADMIN-21" class="slds-hide" role="tabpanel" aria-labelledby="Troubleshooting">
                                    
                                    <div id="TroubleshootIframeDivId">
                                        
                                    </div>
                                </div>
                                <div id="ADMIN-22" class="slds-hide" role="tabpanel" aria-labelledby="StatusLogs">
                                    <!-- -----------------------------Status Logs Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                    <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                </svg>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Status Logs">Status Logs</p>
                                                <p class="slds-text-body_small">Breadwinner â€¢ QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------Status Logs Tab header END ---------------------------->
                                    <div class="slds-m-top_medium slds-m-horizontal_small">
                                        <div >
                                            The Status Log shows error messages and exceptions. To check Logs please click on below <b>Check Log for Recent Errors</b> button.
                                        </div>
                                        <apex:commandButton value="Check Log for Recent Errors" styleClass="slds-m-top_medium slds-button slds-button_brand" id="Logbutton" onclick="drawTable();" reRender="ff"/>
                                        <div id="StatusLogSpinner" style="display:none;">
                                            <div class="slds-spinner_container">
                                                <div class="slds-spinner_brand slds-spinner slds-spinner_medium" role="alert">
                                                    <span class="slds-assistive-text">Loading</span>
                                                    <div class="slds-spinner__dot-a"></div>
                                                    <div class="slds-spinner__dot-b"></div>
                                                </div>
                                            </div>
                                        </div>                                        
                                        
                                        <div  class="slds-m-top_medium" id="table_div"></div>
                                        <div id="message" class="slds-m-top_medium" ></div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>

                     <apex:actionFunction name="checkSetupTabStepsCompletedFunc" action="{!initializeApp}" id="checkSetupTabStepsCompletedId"   reRender="accountSyncPanelMO,CustomerVendor,companySyncStatus,progressPanel"></apex:actionFunction>     
                     <apex:actionFunction name="checkIfLayoutIsUpdated" action="{!checkIfPagelayoutsAreUpdated}" status="assign-action-status"  reRender="progressPanel,infoPanel,pagelayoutCheck,professionalUpdate,pageLayoutUpdatePanel,pageLayoutHeadingPanel, setupArrowPath" oncomplete="reRendercheckmarkSVGIcons();"></apex:actionFunction>  
                     <apex:actionFunction action="{!checkIfPagelayoutsAreUpdated}"  name="checkIfLayoutIsUpdated1" reRender="pagelayoutCheck,progressPanel,professionalUpdate,setupArrowPath" oncomplete="reRendercheckmarkSVGIcons();" />
                     <apex:actionFunction name="deleteAPPC" action="{!deleteAppConfig}" status="assing-action-status"/>

                </div>
            </body>
        </html>
        
    </apex:form>
    <apex:outputPanel id="RestartHistoricalSyncScriptPanel">
        <script>
        function onCompletionOfRestartHistoricalSync(){
            if({!isRestartHistoricalSyncSuccessful} == true)
                alert('Historical Sync was successfully restarted');
            else
                alert('There was some Error');                
        }
        </script>
    </apex:outputPanel>
    
    <script>
    function onTabEnterPushToInteractionLog(tabName){
        Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BreadwinnerController.pushInteractionLogOnTabEnter}', 
                                                  tabName, 
                                                  function(result, event){
                                                      if (event.status){}else if (event.type === 'exception'){}else{}
                                                  },{escape: true}
                                                 );    
    }                
    </script>
    
    <script type="text/javascript">
    function createRemoteSiteMetadata(){
        try{
            var binding = new XMLHttpRequest();
            var host = "{!LEFT($Api.Enterprise_Server_URL_330, FIND('/services',$Api.Enterprise_Server_URL_330))}";
            var request = 
                '<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><SessionHeader xmlns="http://soap.sforce.com/2006/04/metadata"><sessionId>{!$Api.Session_ID}</sessionId></SessionHeader></env:Header><env:Body><upsertMetadata xmlns="http://soap.sforce.com/2006/04/metadata"><metadata xsi:type="RemoteSiteSetting"><fullName>Breadwinner_QBO_MyServer</fullName><description>Required to use Metadata API, created by Breadwinner</description><disableProtocolSecurity>false</disableProtocolSecurity><isActive>true</isActive><url>'+host+'</url></metadata></upsertMetadata></env:Body></env:Envelope>';
            
            binding.open('POST', host+'services/Soap/m/33.0');
            binding.setRequestHeader('SOAPAction','""');
            binding.setRequestHeader('Content-Type', 'text/xml');
            binding.onreadystatechange =
                function() {
                if(this.readyState==4) {
                    var parser = new DOMParser();
                    var doc  = parser.parseFromString(this.response, 'application/xml');
                    var errors = doc.getElementsByTagName('errors');
                    console.log(errors);
                }
            }
            if({!isAdministrator}) binding.send(request);
        }
        catch(error){
            console.log(error);
        }

    }
    </script>
 <apex:outputPanel id="chartPanel">
        <script type="text/javascript">
        
        google.load("visualization", "1", {packages:["table"]});
        
        function drawTable() {
            
            document.getElementById("StatusLogSpinner").style.display = "" ;
            
            Visualforce.remoting.Manager.invokeAction(
                '{!$RemoteAction.BreadwinnerController.gettableChartData}', 
                function(result, event){
                    if (event.status) {
                        if(result.length > 0){
                            
                            var dataAsArray = new Array();
                            var columnArray = ["Log Id", "Event Type", "Event Detail", "Additional Detail", "Time"];
                            dataAsArray.push(columnArray);
                            
                            for (var i=0; i<result.length; i++) {
                                var obj =result[i];
                                var rowArray = [obj.log_id, obj.event_type, obj.event_detail, decodeHtml(obj.additional_detail), obj.timestamp];
                                dataAsArray.push(rowArray);
                            }
                            
                            var data = google.visualization.arrayToDataTable(dataAsArray);
                            
                            
                            var table = new google.visualization.Table(document.getElementById('table_div'));
                            
                            table.draw(data, {showRowNumber: false});
                            humanTranslation();
                            document.getElementById("StatusLogSpinner").style.display = "none" ;
                            
                        }
                        else{
                            document.getElementById("message").innerHTML = "Your logs show no recent errors or exceptions.";
                            document.getElementById("table_div").style.display = "none" ;
                            document.getElementById("StatusLogSpinner").style.display = "none" ;

                        }
                        
                    }
                }
            );
        }
        </script>
        <script>
        function decodeHtml(htmlstr) { 
            var txt = document.createElement("textarea"); 
            txt.innerHTML = htmlstr;
            var decodedURIComp = decodeURIComponent(txt.value);
            var repalceAmpersend=decodedURIComp.replace(/&amp;/g, '&');
            var repalceQuotes=repalceAmpersend.replace(/&quot/g, '"');
            var repalceNewLines=repalceQuotes.replace(/&nl/g, ' ');
            return repalceNewLines;
        }
        function humanTranslation(){
            
            j$( "table.google-visualization-table-table td.google-visualization-table-td:nth-child(4):contains(REQUIRED_FIELD_MISSING)" ).each(function( index ) {
                
                var geteachTD=j$( this );
                
                var windowparentlocation=String(window.location);
                var getindex=windowparentlocation.search("sfdcIFrameOrigin=");
                var resultedAccountFieldsURL='';
                if(parseInt(getindex)>-1){
                    resultedAccountFieldsURL='/one/one.app/setup/object/Account/FieldsAndRelationships/view';
                }
                else{
                    resultedAccountFieldsURL='/p/setup/layout/LayoutFieldList?type=Account&setupid=AccountFields';
                }
                // check oppty or account
                // get record id
                // create link and modify text with Human trasalation text
                // append
                var gettdtext=geteachTD.text();
                if(gettdtext.match(/001/g)){
                    var AccountCount = gettdtext.match(/001/g).length;
                    console.log("---------Account Count--------"+gettdtext.match(/001/g).length);
                    var textPart1 = "<b>Human Translation:</b> One or more of your fields are required on the Account. But, on this <b>";
                    var i;
                    for(i =1; i<=AccountCount;i++){
                        textPart1 += ' ';
                        var recordId=gettdtext.substring(gettdtext.search("001"),gettdtext.search("001")+18);
                        var opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Account</a>";
                        if(AccountCount > 1)
                            opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Account"+i+"</a>";
                        textPart1 += opptyORAccountLink;
                        gettdtext = gettdtext.replace(recordId, "Account"+i);
                    }
                    var AcctErr = geteachTD.text().split("id 001");
                    console.log('------AcctErr[1]--------'+AcctErr);
                    console.log('------AcctErr[1]--------'+AcctErr[1]);
                    var fields = AcctErr[1].match(/\[.*?\]/);
                    console.log("------------fields--------------"+fields)
                    var textPart = textPart1+'</b> those fields are blank. Please populate <b>'+fields+'</b>. Other Accounts may have the same problem, but this was the Account that caused the error.';  
                    geteachTD.append('<div><p><i>'+textPart+'</i></p></div>');
                }
                if(gettdtext.match(/006/g)){
                    var OptyCount = gettdtext.match(/006/g).length;
                    var translatedText = "<b>Human Translation:</b> One or more of your fields are required on the Opportunity. But, on this<b>"; 
                    if(geteachTD.text().match(/001/g))
                        translatedText = 'One or more of your fields are required on the Opportunity. But, on this<b>';                            
                    var i;
                    for(i =1; i<=OptyCount;i++){
                        translatedText +=' ';
                        var recordId=gettdtext.substring(gettdtext.search("006"),gettdtext.search("006")+18);
                        var opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Opportunity</a>";
                        if(OptyCount > 1)
                            opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Opportunity"+i+"</a>";
                        translatedText += opptyORAccountLink;
                        gettdtext = gettdtext.replace(recordId, "Opportunity"+i);
                    }
                    var OptyErr = geteachTD.text().split("id 006");
                    var fields=OptyErr[1].match(/\[.*?\]/);
                    var OptytranslatedText = translatedText+'</b> those fields are blank. Please populate <b>'+fields+'</b>. Other Opportunities may have the same problem, but this was the Account that caused the error.';  
                    geteachTD.append('<div><p><i>'+OptytranslatedText+'</i></p></div>');
                }
                if(gettdtext.match(/Exceptions while doing manual account sync:REQUIRED_FIELD_MISSING/g)){
                    var AccountFieldsURL = "<a href=\'{!$Site.BaseUrl}"+resultedAccountFieldsURL+"\' target='_blank'>Account Fields</a>";
                    var AcctErr = geteachTD.text();
                    var fields = AcctErr.match(/\[.*?\]/);
                    var AccountInsertText = '<b>Human Translation:</b> One or more of your fields are required on the Account, please remove the validations on fields <b>'+fields+'</b> by visiting <b>'+AccountFieldsURL+'</b> here.';  
                    geteachTD.append('<div><p><i>'+AccountInsertText+'</i></p></div>');
                }
            });
        }
        
        function Check_PageLayoutscheckbox(cb){      
            document.getElementById('profLayoutcheckbox').checked = cb.checked;
            console.log('profcheckbox::'+document.getElementById('profLayoutcheckbox').checked);
            update_Page_Layouts_Updated_Checkbox_fun(cb.checked);        
        }
     function clicktrackingjsFunc(isSynchronous, event_type, event_detail, additional_detail){
         Visualforce.remoting.Manager.invokeAction(
             '{!$RemoteAction.BreadwinnerController.ClickTracking}',
             isSynchronous,event_type,event_detail,additional_detail,
             function(result, event){
                 console.log('result--'+result);
                 console.log('event--'+JSON.stringify(event));
             }
         );
     }
        
        </script>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!allowDisconnecting}">
        <script type="text/javascript">
        j$(function(){
            showDiscModal();
        });
        </script>
    </apex:outputPanel>    
</apex:page>